{"ast":null,"code":"import React,{useEffect,useRef,useState,Suspense}from'react';import{Canvas}from'@react-three/fiber';import{EffectComposer,Bloom,Vignette,ChromaticAberration}from'@react-three/postprocessing';import{BlendFunction}from'postprocessing';import{PerspectiveCamera,OrbitControls}from'@react-three/drei';import*as THREE from'three';import{createNoise3D}from'simplex-noise';import*as p5 from'p5';import anime from'animejs/lib/anime.js';import'css-doodle';import{Howl,Howler}from'howler';import*as dat from'dat.gui';import MysticalForest from'./MysticalForest';import FloatingTarotCards from'./FloatingTarotCards';import OccultPatterns from'./OccultPatterns';// Цветовая палитра из требований\nimport{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const COLOR_PALETTE={darkPurple:'#3C2F4F',// Тёмно-фиолетовый — основной фон\nbeigeParchment:'#E8D3A9',// Бежево-пергаментный — текст, акценты\ndarkTurquoise:'#1A3C34',// Тёмный бирюзовый — светлячки, свечение\ninkyBlue:'#1B263B',// Чернильный синий — тени, контуры\nmoonBlue:'#A8C7FA'// Голубоватый оттенок луны\n};// Расширенные константы для визуальных тем\nconst MAGICAL_THEMES={mystical:{backgroundColors:[COLOR_PALETTE.darkPurple,'#512b58','#7a4069','#9d4edd'],particleColor:COLOR_PALETTE.moonBlue,glowColor:COLOR_PALETTE.darkTurquoise,ambientSoundVolume:0.3,particleDensity:7000,particleOpacity:0.7,fogDensity:0.04,fogColor:COLOR_PALETTE.darkPurple},cosmic:{backgroundColors:[COLOR_PALETTE.inkyBlue,'#161b22','#30363d','#21262d'],particleColor:COLOR_PALETTE.moonBlue,glowColor:COLOR_PALETTE.darkTurquoise,ambientSoundVolume:0.2,particleDensity:5000,particleOpacity:0.5,fogDensity:0.03,fogColor:COLOR_PALETTE.inkyBlue},ethereal:{backgroundColors:[COLOR_PALETTE.darkTurquoise,COLOR_PALETTE.inkyBlue,COLOR_PALETTE.darkPurple],particleColor:COLOR_PALETTE.beigeParchment,glowColor:COLOR_PALETTE.moonBlue,ambientSoundVolume:0.4,particleDensity:9000,particleOpacity:0.9,fogDensity:0.05,fogColor:COLOR_PALETTE.darkTurquoise}};// Компонент для создания фона с эффектом градиента\nconst GradientBackground=_ref=>{let{theme='mystical',paused=false}=_ref;const canvasRef=useRef(null);const themeConfig=MAGICAL_THEMES[theme];useEffect(()=>{const canvas=canvasRef.current;if(!canvas)return;const ctx=canvas.getContext('2d');if(!ctx)return;const noise=createNoise3D();let animationFrameId;let time=0;// Функция для создания градиента\nconst drawGradient=()=>{const width=canvas.width;const height=canvas.height;// Очищаем холст\nctx.clearRect(0,0,width,height);// Создаем градиент\nconst gradient=ctx.createLinearGradient(0,0,width,height);// Добавляем цвета из темы с небольшим смещением на основе шума\nthemeConfig.backgroundColors.forEach((color,index)=>{const position=index/(themeConfig.backgroundColors.length-1);const noiseValue=noise(position,time*0.05,0)*0.1;gradient.addColorStop(Math.max(0,Math.min(1,position+noiseValue)),color);});// Заполняем фон градиентом\nctx.fillStyle=gradient;ctx.fillRect(0,0,width,height);// Убираем дорогую постобработку по пикселям для повышения FPS\n// Увеличиваем время\ntime+=0.01;// Запускаем следующий кадр только если не на паузе\nif(!paused){animationFrameId=requestAnimationFrame(drawGradient);}};// Устанавливаем размер холста\nconst resize=()=>{canvas.width=window.innerWidth;canvas.height=window.innerHeight;// При ресайзе перерисуем один кадр\ndrawGradient();};// Добавляем обработчик изменения размера окна\nwindow.addEventListener('resize',resize);resize();// Если не пауза, запускаем анимацию, иначе рисуем статический кадр\nif(!paused){animationFrameId=requestAnimationFrame(drawGradient);}else{drawGradient();}// Очистка при размонтировании\nreturn()=>{window.removeEventListener('resize',resize);cancelAnimationFrame(animationFrameId);};},[theme,paused]);return/*#__PURE__*/_jsx(\"canvas\",{ref:canvasRef,style:{position:'fixed',top:0,left:0,width:'100%',height:'100%',zIndex:-10}});};// Компонент для 3D-сцены (optimized)\nconst MysticalScene=_ref2=>{let{theme='mystical',performanceMode='auto',isLagging=false,optimizationSettings={}}=_ref2;const themeConfig=MAGICAL_THEMES[theme];// Adjust quality based on performance\nconst shouldUseEffects=!isLagging&&optimizationSettings.effectsEnabled;const particleCount=isLagging?Math.min(optimizationSettings.maxParticles||10,10):optimizationSettings.maxParticles||50;return/*#__PURE__*/_jsxs(Canvas,{style:{position:'fixed',top:0,left:0,width:'100%',height:'100%',zIndex:-5,pointerEvents:'none'},gl:{antialias:!isLagging,alpha:true,powerPreference:isLagging?\"low-power\":\"high-performance\",stencil:false,depth:true},camera:{position:[0,5,15],fov:60},frameloop:isLagging?'demand':'always',children:[!isLagging&&/*#__PURE__*/_jsx(\"fog\",{attach:\"fog\",args:[themeConfig.fogColor,5,30]}),/*#__PURE__*/_jsx(\"ambientLight\",{intensity:isLagging?0.1:0.2}),!isLagging&&/*#__PURE__*/_jsx(\"directionalLight\",{position:[5,10,5],intensity:0.3,color:COLOR_PALETTE.moonBlue}),/*#__PURE__*/_jsx(Suspense,{fallback:null,children:!isLagging&&/*#__PURE__*/_jsx(MysticalForest,{})}),shouldUseEffects&&/*#__PURE__*/_jsxs(EffectComposer,{children:[/*#__PURE__*/_jsx(Bloom,{luminanceThreshold:0.2,luminanceSmoothing:0.9,intensity:0.5}),/*#__PURE__*/_jsx(Vignette,{darkness:0.7,offset:0.1,eskil:false,blendFunction:BlendFunction.NORMAL}),/*#__PURE__*/_jsx(ChromaticAberration,{offset:[0.002,0.002],blendFunction:BlendFunction.NORMAL})]}),!isLagging&&/*#__PURE__*/_jsx(OrbitControls,{enableZoom:false,enablePan:false,enableRotate:false,autoRotate:true,autoRotateSpeed:0.5})]});};// Основной компонент MagicalBackground\nconst MagicalBackground=_ref3=>{let{theme='mystical',soundEnabled=false,debugMode=false,currentScreen='home',onCardClick=null,paused=false}=_ref3;const[isInitialized,setIsInitialized]=useState(false);const soundRef=useRef({});const guiRef=useRef(null);// Инициализация звуков\nuseEffect(()=>{if(!soundEnabled)return;const themeConfig=MAGICAL_THEMES[theme];// Создаем звуки (заглушки, так как файлов со звуком пока нет)\nsoundRef.current={ambience:new Howl({src:['/sounds/placeholder-ambience.mp3'],// Заглушка\nloop:true,volume:themeConfig.ambientSoundVolume,autoplay:false,onloaderror:()=>{console.log('Звуковой файл не найден, используем заглушку');}}),guitar:new Howl({src:['/sounds/placeholder-guitar.mp3'],// Заглушка\nloop:true,volume:0.5,autoplay:false,onloaderror:()=>{console.log('Звуковой файл не найден, используем заглушку');}})};// Очистка при размонтировании\nreturn()=>{Object.values(soundRef.current).forEach(sound=>{if(sound&&sound.stop){sound.stop();}});};},[soundEnabled,theme]);// Настройка отладочного интерфейса\nuseEffect(()=>{if(!debugMode)return;guiRef.current=new dat.GUI();const themeFolder=guiRef.current.addFolder('Theme');const settings={theme:theme,soundEnabled:soundEnabled,fogDensity:MAGICAL_THEMES[theme].fogDensity};themeFolder.add(settings,'theme',Object.keys(MAGICAL_THEMES)).onChange(value=>{// В реальном приложении здесь был бы код для изменения темы\nconsole.log('Изменена тема на:',value);});themeFolder.add(settings,'soundEnabled').onChange(value=>{// В реальном приложении здесь был бы код для включения/выключения звука\nconsole.log('Звук:',value?'включен':'выключен');});themeFolder.add(settings,'fogDensity',0,0.1).onChange(value=>{// В реальном приложении здесь был бы код для изменения плотности тумана\nconsole.log('Плотность тумана изменена на:',value);});themeFolder.open();// Очистка при размонтировании\nreturn()=>{if(guiRef.current){guiRef.current.destroy();}};},[debugMode,theme,soundEnabled]);// Эффект для отслеживания инициализации\nuseEffect(()=>{setIsInitialized(true);},[]);return/*#__PURE__*/_jsxs(\"div\",{className:\"magical-background\",style:{position:'fixed',top:0,left:0,width:'100%',height:'100%',zIndex:-1,overflow:'hidden',pointerEvents:'none',background:COLOR_PALETTE.darkPurple},children:[/*#__PURE__*/_jsx(GradientBackground,{theme:theme,paused:paused}),/*#__PURE__*/_jsx(OccultPatterns,{patternCount:15,position:\"bottom\"}),!paused&&/*#__PURE__*/_jsx(FloatingTarotCards,{onCardClick:onCardClick,currentScreen:currentScreen})]});};export default/*#__PURE__*/React.memo(MagicalBackground);","map":{"version":3,"names":["React","useEffect","useRef","useState","Suspense","Canvas","EffectComposer","Bloom","Vignette","ChromaticAberration","BlendFunction","PerspectiveCamera","OrbitControls","THREE","createNoise3D","p5","anime","Howl","Howler","dat","MysticalForest","FloatingTarotCards","OccultPatterns","jsx","_jsx","jsxs","_jsxs","COLOR_PALETTE","darkPurple","beigeParchment","darkTurquoise","inkyBlue","moonBlue","MAGICAL_THEMES","mystical","backgroundColors","particleColor","glowColor","ambientSoundVolume","particleDensity","particleOpacity","fogDensity","fogColor","cosmic","ethereal","GradientBackground","_ref","theme","paused","canvasRef","themeConfig","canvas","current","ctx","getContext","noise","animationFrameId","time","drawGradient","width","height","clearRect","gradient","createLinearGradient","forEach","color","index","position","length","noiseValue","addColorStop","Math","max","min","fillStyle","fillRect","requestAnimationFrame","resize","window","innerWidth","innerHeight","addEventListener","removeEventListener","cancelAnimationFrame","ref","style","top","left","zIndex","MysticalScene","_ref2","performanceMode","isLagging","optimizationSettings","shouldUseEffects","effectsEnabled","particleCount","maxParticles","pointerEvents","gl","antialias","alpha","powerPreference","stencil","depth","camera","fov","frameloop","children","attach","args","intensity","fallback","luminanceThreshold","luminanceSmoothing","darkness","offset","eskil","blendFunction","NORMAL","enableZoom","enablePan","enableRotate","autoRotate","autoRotateSpeed","MagicalBackground","_ref3","soundEnabled","debugMode","currentScreen","onCardClick","isInitialized","setIsInitialized","soundRef","guiRef","ambience","src","loop","volume","autoplay","onloaderror","console","log","guitar","Object","values","sound","stop","GUI","themeFolder","addFolder","settings","add","keys","onChange","value","open","destroy","className","overflow","background","patternCount","memo"],"sources":["/var/www/www-root/data/www/knigavl.ru/src/components/MagicalBackground.js"],"sourcesContent":["import React, { useEffect, useRef, useState, Suspense } from 'react';\r\nimport { Canvas } from '@react-three/fiber';\r\nimport { \r\n  EffectComposer, \r\n  Bloom, \r\n  Vignette, \r\n  ChromaticAberration \r\n} from '@react-three/postprocessing';\r\nimport { BlendFunction } from 'postprocessing';\r\nimport { PerspectiveCamera, OrbitControls } from '@react-three/drei';\r\nimport * as THREE from 'three';\r\nimport { createNoise3D } from 'simplex-noise';\r\nimport * as p5 from 'p5';\r\nimport anime from 'animejs/lib/anime.js';\r\nimport 'css-doodle';\r\nimport { Howl, Howler } from 'howler';\r\nimport * as dat from 'dat.gui';\r\nimport MysticalForest from './MysticalForest';\r\nimport FloatingTarotCards from './FloatingTarotCards';\r\nimport OccultPatterns from './OccultPatterns';\r\n\r\n// Цветовая палитра из требований\r\nconst COLOR_PALETTE = {\r\n  darkPurple: '#3C2F4F',    // Тёмно-фиолетовый — основной фон\r\n  beigeParchment: '#E8D3A9', // Бежево-пергаментный — текст, акценты\r\n  darkTurquoise: '#1A3C34',  // Тёмный бирюзовый — светлячки, свечение\r\n  inkyBlue: '#1B263B',       // Чернильный синий — тени, контуры\r\n  moonBlue: '#A8C7FA',       // Голубоватый оттенок луны\r\n};\r\n\r\n// Расширенные константы для визуальных тем\r\nconst MAGICAL_THEMES = {\r\n  mystical: {\r\n    backgroundColors: [COLOR_PALETTE.darkPurple, '#512b58', '#7a4069', '#9d4edd'],\r\n    particleColor: COLOR_PALETTE.moonBlue,\r\n    glowColor: COLOR_PALETTE.darkTurquoise,\r\n    ambientSoundVolume: 0.3,\r\n    particleDensity: 7000,\r\n    particleOpacity: 0.7,\r\n    fogDensity: 0.04,\r\n    fogColor: COLOR_PALETTE.darkPurple\r\n  },\r\n  cosmic: {\r\n    backgroundColors: [COLOR_PALETTE.inkyBlue, '#161b22', '#30363d', '#21262d'],\r\n    particleColor: COLOR_PALETTE.moonBlue,\r\n    glowColor: COLOR_PALETTE.darkTurquoise,\r\n    ambientSoundVolume: 0.2,\r\n    particleDensity: 5000,\r\n    particleOpacity: 0.5,\r\n    fogDensity: 0.03,\r\n    fogColor: COLOR_PALETTE.inkyBlue\r\n  },\r\n  ethereal: {\r\n    backgroundColors: [COLOR_PALETTE.darkTurquoise, COLOR_PALETTE.inkyBlue, COLOR_PALETTE.darkPurple],\r\n    particleColor: COLOR_PALETTE.beigeParchment,\r\n    glowColor: COLOR_PALETTE.moonBlue,\r\n    ambientSoundVolume: 0.4,\r\n    particleDensity: 9000,\r\n    particleOpacity: 0.9,\r\n    fogDensity: 0.05,\r\n    fogColor: COLOR_PALETTE.darkTurquoise\r\n  }\r\n};\r\n\r\n// Компонент для создания фона с эффектом градиента\r\nconst GradientBackground = ({ theme = 'mystical', paused = false }) => {\r\n  const canvasRef = useRef(null);\r\n  const themeConfig = MAGICAL_THEMES[theme];\r\n  \r\n  useEffect(() => {\r\n    const canvas = canvasRef.current;\r\n    if (!canvas) return;\r\n    \r\n    const ctx = canvas.getContext('2d');\r\n    if (!ctx) return;\r\n    \r\n    const noise = createNoise3D();\r\n    \r\n    let animationFrameId;\r\n    let time = 0;\r\n    \r\n    // Функция для создания градиента\r\n    const drawGradient = () => {\r\n      const width = canvas.width;\r\n      const height = canvas.height;\r\n      \r\n      // Очищаем холст\r\n      ctx.clearRect(0, 0, width, height);\r\n      \r\n      // Создаем градиент\r\n      const gradient = ctx.createLinearGradient(0, 0, width, height);\r\n      \r\n      // Добавляем цвета из темы с небольшим смещением на основе шума\r\n      themeConfig.backgroundColors.forEach((color, index) => {\r\n        const position = index / (themeConfig.backgroundColors.length - 1);\r\n        const noiseValue = noise(position, time * 0.05, 0) * 0.1;\r\n        gradient.addColorStop(Math.max(0, Math.min(1, position + noiseValue)), color);\r\n      });\r\n      \r\n      // Заполняем фон градиентом\r\n      ctx.fillStyle = gradient;\r\n      ctx.fillRect(0, 0, width, height);\r\n      \r\n      // Убираем дорогую постобработку по пикселям для повышения FPS\r\n      \r\n      // Увеличиваем время\r\n      time += 0.01;\r\n      \r\n      // Запускаем следующий кадр только если не на паузе\r\n      if (!paused) {\r\n        animationFrameId = requestAnimationFrame(drawGradient);\r\n      }\r\n    };\r\n    \r\n    // Устанавливаем размер холста\r\n    const resize = () => {\r\n      canvas.width = window.innerWidth;\r\n      canvas.height = window.innerHeight;\r\n      // При ресайзе перерисуем один кадр\r\n      drawGradient();\r\n    };\r\n    \r\n    // Добавляем обработчик изменения размера окна\r\n    window.addEventListener('resize', resize);\r\n    resize();\r\n    \r\n    // Если не пауза, запускаем анимацию, иначе рисуем статический кадр\r\n    if (!paused) {\r\n      animationFrameId = requestAnimationFrame(drawGradient);\r\n    } else {\r\n      drawGradient();\r\n    }\r\n    \r\n    // Очистка при размонтировании\r\n    return () => {\r\n      window.removeEventListener('resize', resize);\r\n      cancelAnimationFrame(animationFrameId);\r\n    };\r\n  }, [theme, paused]);\r\n  \r\n  return (\r\n    <canvas \r\n      ref={canvasRef} \r\n      style={{\r\n        position: 'fixed',\r\n        top: 0,\r\n        left: 0,\r\n        width: '100%',\r\n        height: '100%',\r\n        zIndex: -10\r\n      }}\r\n    />\r\n  );\r\n};\r\n\r\n// Компонент для 3D-сцены (optimized)\r\nconst MysticalScene = ({ \r\n  theme = 'mystical', \r\n  performanceMode = 'auto', \r\n  isLagging = false,\r\n  optimizationSettings = {}\r\n}) => {\r\n  const themeConfig = MAGICAL_THEMES[theme];\r\n  \r\n  // Adjust quality based on performance\r\n  const shouldUseEffects = !isLagging && optimizationSettings.effectsEnabled;\r\n  const particleCount = isLagging ? \r\n    Math.min(optimizationSettings.maxParticles || 10, 10) : \r\n    optimizationSettings.maxParticles || 50;\r\n  \r\n  return (\r\n    <Canvas \r\n      style={{ \r\n        position: 'fixed', \r\n        top: 0, \r\n        left: 0, \r\n        width: '100%', \r\n        height: '100%', \r\n        zIndex: -5,\r\n        pointerEvents: 'none'\r\n      }}\r\n      gl={{ \r\n        antialias: !isLagging,\r\n        alpha: true,\r\n        powerPreference: isLagging ? \"low-power\" : \"high-performance\",\r\n        stencil: false,\r\n        depth: true\r\n      }}\r\n      camera={{ position: [0, 5, 15], fov: 60 }}\r\n      frameloop={isLagging ? 'demand' : 'always'}\r\n    >\r\n      {!isLagging && (\r\n        <fog \r\n          attach=\"fog\" \r\n          args={[themeConfig.fogColor, 5, 30]} \r\n        />\r\n      )}\r\n      \r\n      <ambientLight intensity={isLagging ? 0.1 : 0.2} />\r\n      {!isLagging && (\r\n        <directionalLight \r\n          position={[5, 10, 5]} \r\n          intensity={0.3} \r\n          color={COLOR_PALETTE.moonBlue} \r\n        />\r\n      )}\r\n      \r\n      <Suspense fallback={null}>\r\n        {!isLagging && <MysticalForest />}\r\n      </Suspense>\r\n      \r\n      {shouldUseEffects && (\r\n        <EffectComposer>\r\n          <Bloom \r\n            luminanceThreshold={0.2}\r\n            luminanceSmoothing={0.9}\r\n            intensity={0.5}\r\n          />\r\n          <Vignette \r\n            darkness={0.7} \r\n            offset={0.1} \r\n            eskil={false} \r\n            blendFunction={BlendFunction.NORMAL}\r\n          />\r\n          <ChromaticAberration \r\n            offset={[0.002, 0.002]} \r\n            blendFunction={BlendFunction.NORMAL}\r\n          />\r\n        </EffectComposer>\r\n      )}\r\n      \r\n      {!isLagging && (\r\n        <OrbitControls \r\n          enableZoom={false} \r\n          enablePan={false}\r\n          enableRotate={false}\r\n          autoRotate={true}\r\n          autoRotateSpeed={0.5}\r\n        />\r\n      )}\r\n    </Canvas>\r\n  );\r\n};\r\n\r\n// Основной компонент MagicalBackground\r\nconst MagicalBackground = ({ \r\n  theme = 'mystical', \r\n  soundEnabled = false,\r\n  debugMode = false,\r\n  currentScreen = 'home',\r\n  onCardClick = null,\r\n  paused = false\r\n}) => {\r\n  const [isInitialized, setIsInitialized] = useState(false);\r\n  const soundRef = useRef({});\r\n  const guiRef = useRef(null);\r\n  \r\n  // Инициализация звуков\r\n  useEffect(() => {\r\n    if (!soundEnabled) return;\r\n    \r\n    const themeConfig = MAGICAL_THEMES[theme];\r\n    \r\n    // Создаем звуки (заглушки, так как файлов со звуком пока нет)\r\n    soundRef.current = {\r\n      ambience: new Howl({\r\n        src: ['/sounds/placeholder-ambience.mp3'], // Заглушка\r\n        loop: true,\r\n        volume: themeConfig.ambientSoundVolume,\r\n        autoplay: false,\r\n        onloaderror: () => {\r\n          console.log('Звуковой файл не найден, используем заглушку');\r\n        }\r\n      }),\r\n      guitar: new Howl({\r\n        src: ['/sounds/placeholder-guitar.mp3'], // Заглушка\r\n        loop: true,\r\n        volume: 0.5,\r\n        autoplay: false,\r\n        onloaderror: () => {\r\n          console.log('Звуковой файл не найден, используем заглушку');\r\n        }\r\n      })\r\n    };\r\n    \r\n    // Очистка при размонтировании\r\n    return () => {\r\n      Object.values(soundRef.current).forEach(sound => {\r\n        if (sound && sound.stop) {\r\n          sound.stop();\r\n        }\r\n      });\r\n    };\r\n  }, [soundEnabled, theme]);\r\n  \r\n  // Настройка отладочного интерфейса\r\n  useEffect(() => {\r\n    if (!debugMode) return;\r\n    \r\n    guiRef.current = new dat.GUI();\r\n    const themeFolder = guiRef.current.addFolder('Theme');\r\n    \r\n    const settings = {\r\n      theme: theme,\r\n      soundEnabled: soundEnabled,\r\n      fogDensity: MAGICAL_THEMES[theme].fogDensity\r\n    };\r\n    \r\n    themeFolder.add(settings, 'theme', Object.keys(MAGICAL_THEMES)).onChange(value => {\r\n      // В реальном приложении здесь был бы код для изменения темы\r\n      console.log('Изменена тема на:', value);\r\n    });\r\n    \r\n    themeFolder.add(settings, 'soundEnabled').onChange(value => {\r\n      // В реальном приложении здесь был бы код для включения/выключения звука\r\n      console.log('Звук:', value ? 'включен' : 'выключен');\r\n    });\r\n    \r\n    themeFolder.add(settings, 'fogDensity', 0, 0.1).onChange(value => {\r\n      // В реальном приложении здесь был бы код для изменения плотности тумана\r\n      console.log('Плотность тумана изменена на:', value);\r\n    });\r\n    \r\n    themeFolder.open();\r\n    \r\n    // Очистка при размонтировании\r\n    return () => {\r\n      if (guiRef.current) {\r\n        guiRef.current.destroy();\r\n      }\r\n    };\r\n  }, [debugMode, theme, soundEnabled]);\r\n  \r\n  // Эффект для отслеживания инициализации\r\n  useEffect(() => {\r\n    setIsInitialized(true);\r\n  }, []);\r\n  \r\n  return (\r\n    <div \r\n      className=\"magical-background\" \r\n      style={{\r\n        position: 'fixed', \r\n        top: 0, \r\n        left: 0, \r\n        width: '100%', \r\n        height: '100%', \r\n        zIndex: -1, \r\n        overflow: 'hidden',\r\n        pointerEvents: 'none',\r\n        background: COLOR_PALETTE.darkPurple\r\n      }}\r\n    >\r\n      {/* Градиентный фон */}\r\n      <GradientBackground theme={theme} paused={paused} />\r\n      \r\n      {/* Оккультные узоры */}\r\n      <OccultPatterns patternCount={15} position=\"bottom\" />\r\n      \r\n      {/* Парящие карты Таро */}\r\n      {!paused && (\r\n        <FloatingTarotCards \r\n          onCardClick={onCardClick} \r\n          currentScreen={currentScreen}\r\n        />\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default React.memo(MagicalBackground);"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}