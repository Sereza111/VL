{"ast":null,"code":"import { clamp } from '../utils/index.js';\nexport default function parse_grid(size) {\n  let GRID = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 64;\n  const [min, max, total] = [1, GRID, GRID * GRID];\n  let [x, y, z] = (size + '').replace(/\\s+/g, '').replace(/[,，xX]+/g, 'x').split('x').map(n => parseInt(n));\n  const max_xy = x == 1 || y == 1 ? total : max;\n  const max_z = x == 1 && y == 1 ? total : min;\n  const ret = {\n    x: clamp(x || min, 1, max_xy),\n    y: clamp(y || x || min, 1, max_xy),\n    z: clamp(z || min, 1, max_z)\n  };\n  return Object.assign({}, ret, {\n    count: ret.x * ret.y * ret.z,\n    ratio: ret.x / ret.y\n  });\n}","map":{"version":3,"names":["clamp","parse_grid","size","GRID","arguments","length","undefined","min","max","total","x","y","z","replace","split","map","n","parseInt","max_xy","max_z","ret","Object","assign","count","ratio"],"sources":["/var/www/www-root/data/www/knigavl.ru/node_modules/css-doodle/src/parser/parse-grid.js"],"sourcesContent":["import { clamp } from '../utils/index.js';\n\nexport default function parse_grid(size, GRID = 64) {\n  const [min, max, total] = [1, GRID, GRID * GRID];\n\n  let [x, y, z] = (size + '')\n    .replace(/\\s+/g, '')\n    .replace(/[,，xX]+/g, 'x')\n    .split('x')\n    .map(n => parseInt(n));\n\n  const max_xy = (x == 1 || y == 1) ? total : max;\n  const max_z = (x == 1 && y == 1) ? total : min;\n\n  const ret = {\n    x: clamp(x || min, 1, max_xy),\n    y: clamp(y || x || min, 1, max_xy),\n    z: clamp(z || min, 1, max_z)\n  };\n\n  return Object.assign({}, ret, {\n    count: ret.x * ret.y * ret.z,\n    ratio: ret.x / ret.y\n  });\n}\n"],"mappings":"AAAA,SAASA,KAAK,QAAQ,mBAAmB;AAEzC,eAAe,SAASC,UAAUA,CAACC,IAAI,EAAa;EAAA,IAAXC,IAAI,GAAAC,SAAA,CAAAC,MAAA,QAAAD,SAAA,QAAAE,SAAA,GAAAF,SAAA,MAAG,EAAE;EAChD,MAAM,CAACG,GAAG,EAAEC,GAAG,EAAEC,KAAK,CAAC,GAAG,CAAC,CAAC,EAAEN,IAAI,EAAEA,IAAI,GAAGA,IAAI,CAAC;EAEhD,IAAI,CAACO,CAAC,EAAEC,CAAC,EAAEC,CAAC,CAAC,GAAG,CAACV,IAAI,GAAG,EAAE,EACvBW,OAAO,CAAC,MAAM,EAAE,EAAE,CAAC,CACnBA,OAAO,CAAC,UAAU,EAAE,GAAG,CAAC,CACxBC,KAAK,CAAC,GAAG,CAAC,CACVC,GAAG,CAACC,CAAC,IAAIC,QAAQ,CAACD,CAAC,CAAC,CAAC;EAExB,MAAME,MAAM,GAAIR,CAAC,IAAI,CAAC,IAAIC,CAAC,IAAI,CAAC,GAAIF,KAAK,GAAGD,GAAG;EAC/C,MAAMW,KAAK,GAAIT,CAAC,IAAI,CAAC,IAAIC,CAAC,IAAI,CAAC,GAAIF,KAAK,GAAGF,GAAG;EAE9C,MAAMa,GAAG,GAAG;IACVV,CAAC,EAAEV,KAAK,CAACU,CAAC,IAAIH,GAAG,EAAE,CAAC,EAAEW,MAAM,CAAC;IAC7BP,CAAC,EAAEX,KAAK,CAACW,CAAC,IAAID,CAAC,IAAIH,GAAG,EAAE,CAAC,EAAEW,MAAM,CAAC;IAClCN,CAAC,EAAEZ,KAAK,CAACY,CAAC,IAAIL,GAAG,EAAE,CAAC,EAAEY,KAAK;EAC7B,CAAC;EAED,OAAOE,MAAM,CAACC,MAAM,CAAC,CAAC,CAAC,EAAEF,GAAG,EAAE;IAC5BG,KAAK,EAAEH,GAAG,CAACV,CAAC,GAAGU,GAAG,CAACT,CAAC,GAAGS,GAAG,CAACR,CAAC;IAC5BY,KAAK,EAAEJ,GAAG,CAACV,CAAC,GAAGU,GAAG,CAACT;EACrB,CAAC,CAAC;AACJ","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}