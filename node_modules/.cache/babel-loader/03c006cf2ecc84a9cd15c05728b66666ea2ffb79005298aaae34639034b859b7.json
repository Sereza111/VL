{"ast":null,"code":"import React,{useEffect,useState}from'react';import'./GothicBalance.css';/**\r\n * GothicBalance — компактный интерактивный блок баланса для шапки\r\n * Темная эстетика, белые акценты, без золота. Клик — открывает детали.\r\n */import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const GothicBalance=_ref=>{let{balance=0,incomePerHour=0,onClick,change,symbol='✦',progress=0}=_ref;const[angle,setAngle]=useState(0);const[pulse,setPulse]=useState(false);// Мягкий пульс при изменении баланса\nuseEffect(()=>{if(change!==null&&change!==undefined){setPulse(true);const t=setTimeout(()=>setPulse(false),600);return()=>clearTimeout(t);}},[change]);const handleClick=()=>{setAngle(a=>(a+120)%360);if(typeof onClick==='function')onClick();};const clamped=Math.max(0,Math.min(1,progress||0));return/*#__PURE__*/_jsxs(\"button\",{className:\"gothic-balance \".concat(pulse?'pulse':''),onClick:handleClick,title:\"\\u041E\\u0442\\u043A\\u0440\\u044B\\u0442\\u044C \\u0434\\u0435\\u0442\\u0430\\u043B\\u0438 \\u0431\\u0430\\u043B\\u0430\\u043D\\u0441\\u0430\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"orb\",style:{['--angle']:\"\".concat(angle,\"deg\"),['--progressDeg']:\"\".concat(clamped*360,\"deg\")},children:[/*#__PURE__*/_jsx(\"div\",{className:\"orb-core\"}),/*#__PURE__*/_jsx(\"div\",{className:\"orb-symbol\",children:symbol}),Array.from({length:8}).map((_,i)=>/*#__PURE__*/_jsx(\"span\",{className:\"tick\",style:{['--i']:i}},i))]}),/*#__PURE__*/_jsxs(\"div\",{className:\"numbers\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"value\",children:[balance.toFixed(2),\" \\u2726\"]}),incomePerHour>0&&/*#__PURE__*/_jsxs(\"div\",{className:\"income\",children:[\"+\",incomePerHour.toFixed(2),\" VL/\\u0447\\u0430\\u0441\"]})]}),change&&/*#__PURE__*/_jsx(\"div\",{className:\"delta \".concat(String(change).startsWith('-')?'down':'up'),children:change})]});};export default GothicBalance;","map":{"version":3,"names":["React","useEffect","useState","jsx","_jsx","jsxs","_jsxs","GothicBalance","_ref","balance","incomePerHour","onClick","change","symbol","progress","angle","setAngle","pulse","setPulse","undefined","t","setTimeout","clearTimeout","handleClick","a","clamped","Math","max","min","className","concat","title","children","style","Array","from","length","map","_","i","toFixed","String","startsWith"],"sources":["/var/www/www-root/data/www/knigavl.ru/src/components/GothicBalance.js"],"sourcesContent":["import React, { useEffect, useState } from 'react';\r\nimport './GothicBalance.css';\r\n\r\n/**\r\n * GothicBalance — компактный интерактивный блок баланса для шапки\r\n * Темная эстетика, белые акценты, без золота. Клик — открывает детали.\r\n */\r\nconst GothicBalance = ({ balance = 0, incomePerHour = 0, onClick, change, symbol = '✦', progress = 0 }) => {\r\n  const [angle, setAngle] = useState(0);\r\n  const [pulse, setPulse] = useState(false);\r\n\r\n  // Мягкий пульс при изменении баланса\r\n  useEffect(() => {\r\n    if (change !== null && change !== undefined) {\r\n      setPulse(true);\r\n      const t = setTimeout(() => setPulse(false), 600);\r\n      return () => clearTimeout(t);\r\n    }\r\n  }, [change]);\r\n\r\n  const handleClick = () => {\r\n    setAngle((a) => (a + 120) % 360);\r\n    if (typeof onClick === 'function') onClick();\r\n  };\r\n\r\n  const clamped = Math.max(0, Math.min(1, progress || 0));\r\n\r\n  return (\r\n    <button\r\n      className={`gothic-balance ${pulse ? 'pulse' : ''}`}\r\n      onClick={handleClick}\r\n      title=\"Открыть детали баланса\"\r\n    >\r\n      <div \r\n        className=\"orb\" \r\n        style={{ ['--angle']: `${angle}deg`, ['--progressDeg']: `${clamped * 360}deg` }}\r\n      >\r\n        <div className=\"orb-core\" />\r\n        <div className=\"orb-symbol\">{symbol}</div>\r\n        {/* тонкие метки по окружности */}\r\n        {Array.from({ length: 8 }).map((_, i) => (\r\n          <span key={i} className=\"tick\" style={{ ['--i']: i }} />\r\n        ))}\r\n      </div>\r\n\r\n      <div className=\"numbers\">\r\n        <div className=\"value\">{balance.toFixed(2)} ✦</div>\r\n        {incomePerHour > 0 && (\r\n          <div className=\"income\">+{incomePerHour.toFixed(2)} VL/час</div>\r\n        )}\r\n      </div>\r\n\r\n      {change && (\r\n        <div className={`delta ${String(change).startsWith('-') ? 'down' : 'up'}`}>{change}</div>\r\n      )}\r\n    </button>\r\n  );\r\n};\r\n\r\nexport default GothicBalance;\r\n\r\n\r\n"],"mappings":"AAAA,MAAO,CAAAA,KAAK,EAAIC,SAAS,CAAEC,QAAQ,KAAQ,OAAO,CAClD,MAAO,qBAAqB,CAE5B;AACA;AACA;AACA,GAHA,OAAAC,GAAA,IAAAC,IAAA,CAAAC,IAAA,IAAAC,KAAA,yBAIA,KAAM,CAAAC,aAAa,CAAGC,IAAA,EAAqF,IAApF,CAAEC,OAAO,CAAG,CAAC,CAAEC,aAAa,CAAG,CAAC,CAAEC,OAAO,CAAEC,MAAM,CAAEC,MAAM,CAAG,GAAG,CAAEC,QAAQ,CAAG,CAAE,CAAC,CAAAN,IAAA,CACpG,KAAM,CAACO,KAAK,CAAEC,QAAQ,CAAC,CAAGd,QAAQ,CAAC,CAAC,CAAC,CACrC,KAAM,CAACe,KAAK,CAAEC,QAAQ,CAAC,CAAGhB,QAAQ,CAAC,KAAK,CAAC,CAEzC;AACAD,SAAS,CAAC,IAAM,CACd,GAAIW,MAAM,GAAK,IAAI,EAAIA,MAAM,GAAKO,SAAS,CAAE,CAC3CD,QAAQ,CAAC,IAAI,CAAC,CACd,KAAM,CAAAE,CAAC,CAAGC,UAAU,CAAC,IAAMH,QAAQ,CAAC,KAAK,CAAC,CAAE,GAAG,CAAC,CAChD,MAAO,IAAMI,YAAY,CAACF,CAAC,CAAC,CAC9B,CACF,CAAC,CAAE,CAACR,MAAM,CAAC,CAAC,CAEZ,KAAM,CAAAW,WAAW,CAAGA,CAAA,GAAM,CACxBP,QAAQ,CAAEQ,CAAC,EAAK,CAACA,CAAC,CAAG,GAAG,EAAI,GAAG,CAAC,CAChC,GAAI,MAAO,CAAAb,OAAO,GAAK,UAAU,CAAEA,OAAO,CAAC,CAAC,CAC9C,CAAC,CAED,KAAM,CAAAc,OAAO,CAAGC,IAAI,CAACC,GAAG,CAAC,CAAC,CAAED,IAAI,CAACE,GAAG,CAAC,CAAC,CAAEd,QAAQ,EAAI,CAAC,CAAC,CAAC,CAEvD,mBACER,KAAA,WACEuB,SAAS,mBAAAC,MAAA,CAAoBb,KAAK,CAAG,OAAO,CAAG,EAAE,CAAG,CACpDN,OAAO,CAAEY,WAAY,CACrBQ,KAAK,CAAC,4HAAwB,CAAAC,QAAA,eAE9B1B,KAAA,QACEuB,SAAS,CAAC,KAAK,CACfI,KAAK,CAAE,CAAE,CAAC,SAAS,KAAAH,MAAA,CAAMf,KAAK,OAAK,CAAE,CAAC,eAAe,KAAAe,MAAA,CAAML,OAAO,CAAG,GAAG,OAAM,CAAE,CAAAO,QAAA,eAEhF5B,IAAA,QAAKyB,SAAS,CAAC,UAAU,CAAE,CAAC,cAC5BzB,IAAA,QAAKyB,SAAS,CAAC,YAAY,CAAAG,QAAA,CAAEnB,MAAM,CAAM,CAAC,CAEzCqB,KAAK,CAACC,IAAI,CAAC,CAAEC,MAAM,CAAE,CAAE,CAAC,CAAC,CAACC,GAAG,CAAC,CAACC,CAAC,CAAEC,CAAC,gBAClCnC,IAAA,SAAcyB,SAAS,CAAC,MAAM,CAACI,KAAK,CAAE,CAAE,CAAC,KAAK,EAAGM,CAAE,CAAE,EAA1CA,CAA4C,CACxD,CAAC,EACC,CAAC,cAENjC,KAAA,QAAKuB,SAAS,CAAC,SAAS,CAAAG,QAAA,eACtB1B,KAAA,QAAKuB,SAAS,CAAC,OAAO,CAAAG,QAAA,EAAEvB,OAAO,CAAC+B,OAAO,CAAC,CAAC,CAAC,CAAC,SAAE,EAAK,CAAC,CAClD9B,aAAa,CAAG,CAAC,eAChBJ,KAAA,QAAKuB,SAAS,CAAC,QAAQ,CAAAG,QAAA,EAAC,GAAC,CAACtB,aAAa,CAAC8B,OAAO,CAAC,CAAC,CAAC,CAAC,wBAAO,EAAK,CAChE,EACE,CAAC,CAEL5B,MAAM,eACLR,IAAA,QAAKyB,SAAS,UAAAC,MAAA,CAAWW,MAAM,CAAC7B,MAAM,CAAC,CAAC8B,UAAU,CAAC,GAAG,CAAC,CAAG,MAAM,CAAG,IAAI,CAAG,CAAAV,QAAA,CAAEpB,MAAM,CAAM,CACzF,EACK,CAAC,CAEb,CAAC,CAED,cAAe,CAAAL,aAAa","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}