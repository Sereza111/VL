{"ast":null,"code":"import parse_value_group from './parser/parse-value-group.js';\nimport parse_grid from './parser/parse-grid.js';\nimport { shapes } from './generator/shapes.js';\nimport { is_preset, get_preset } from './preset-size.js';\nimport { prefixer } from './utils/prefixer.js';\nimport { memo } from './utils/memo.js';\nimport { add_alias } from './utils/index.js';\nconst map_left_right = {\n  center: '50%',\n  left: '0%',\n  right: '100%',\n  top: '50%',\n  bottom: '50%'\n};\nconst map_top_bottom = {\n  center: '50%',\n  top: '0%',\n  bottom: '100%',\n  left: '50%',\n  right: '50%'\n};\nexport default add_alias({\n  size(value, _ref) {\n    let {\n      is_special_selector,\n      grid\n    } = _ref;\n    let [w, h = w, ratio] = parse_value_group(value);\n    if (is_preset(w)) {\n      [w, h] = get_preset(w, h);\n    }\n    let styles = \"\\n      width: \".concat(w, \";\\n      height: \").concat(h, \";\\n    \");\n    if (w === 'auto' || h === 'auto') {\n      if (ratio) {\n        if (/^\\(.+\\)$/.test(ratio)) {\n          ratio = ratio.substring(1, ratio.length - 1);\n        } else if (!/^calc/.test(ratio)) {\n          ratio = \"calc(\".concat(ratio, \")\");\n        }\n        if (!is_special_selector) {\n          styles += \"aspect-ratio: \".concat(ratio, \";\");\n        }\n      }\n      if (is_special_selector) {\n        styles += \"aspect-ratio: \".concat(ratio || grid.ratio, \";\");\n      }\n    }\n    if (!is_special_selector) {\n      styles += \"\\n        --internal-cell-width: \".concat(w, \";\\n        --internal-cell-height: \").concat(h, \";\\n      \");\n    }\n    return styles;\n  },\n  place(value, _ref2) {\n    let {\n      extra\n    } = _ref2;\n    let [left, top = '50%'] = parse_value_group(value);\n    left = map_left_right[left] || left;\n    top = map_top_bottom[top] || top;\n    const cw = 'var(--internal-cell-width, 25%)';\n    const ch = 'var(--internal-cell-height, 25%)';\n    return \"\\n      position: absolute;\\n      left: \".concat(left, \";\\n      top: \").concat(top, \";\\n      width: \").concat(cw, \";\\n      height: \").concat(ch, \";\\n      margin-left: calc(\").concat(cw, \" / -2);\\n      margin-top: calc(\").concat(ch, \" / -2);\\n      grid-area: unset;\\n      --plot-angle: \").concat(extra || 0, \";\\n      rotate: \").concat(extra || 0, \"deg;\\n    \");\n  },\n  grid(value, options) {\n    let result = {\n      clip: true\n    };\n    if (/no\\-*clip/i.test(value)) {\n      result.clip = false;\n      value = value.replace(/no\\-*clip/i, '');\n    }\n    let groups = parse_value_group(value, {\n      symbol: ['/', '+', '*', '|', '-', '~'],\n      noSpace: true,\n      verbose: true\n    });\n    for (let {\n      group,\n      value\n    } of groups) {\n      if (group === '+') result.scale = value;\n      if (group === '*') result.rotate = value;\n      if (group === '~') result.translate = value;\n      if (group === '/') {\n        if (result.size === undefined) result.size = this.size(value, options);else result.fill = value;\n      }\n      if ((group === '|' || group == '-' || group == '') && !result.grid) {\n        result.grid = parse_grid(value, options.max_grid);\n        if (group === '|') {\n          result.flexColumn = true;\n        }\n        if (group === '-') {\n          result.flexRow = true;\n        }\n      }\n    }\n    return result;\n  },\n  gap(value) {\n    return value;\n  },\n  seed(value) {\n    return value;\n  },\n  shape: memo('shape-property', value => {\n    let [type, ...args] = parse_value_group(value);\n    if (typeof shapes[type] !== 'function') return '';\n    let prop = 'clip-path';\n    let points = shapes[type](...args);\n    let rules = \"\".concat(prop, \": polygon(\").concat(points.join(','), \");\");\n    return prefixer(prop, rules) + 'overflow: hidden;';\n  }),\n  use(rules) {\n    if (rules.length > 2) {\n      return rules;\n    }\n  },\n  content(value) {\n    return value;\n  }\n}, {\n  // legacy names.\n  'place-cell': 'place',\n  'offset': 'place',\n  'position': 'place'\n});","map":{"version":3,"names":["parse_value_group","parse_grid","shapes","is_preset","get_preset","prefixer","memo","add_alias","map_left_right","center","left","right","top","bottom","map_top_bottom","size","value","_ref","is_special_selector","grid","w","h","ratio","styles","concat","test","substring","length","place","_ref2","extra","cw","ch","options","result","clip","replace","groups","symbol","noSpace","verbose","group","scale","rotate","translate","undefined","fill","max_grid","flexColumn","flexRow","gap","seed","shape","type","args","prop","points","rules","join","use","content"],"sources":["/var/www/www-root/data/www/knigavl.ru/node_modules/css-doodle/src/property.js"],"sourcesContent":["import parse_value_group from './parser/parse-value-group.js';\nimport parse_grid from './parser/parse-grid.js';\n\nimport { shapes } from './generator/shapes.js';\nimport { is_preset, get_preset } from './preset-size.js';\n\nimport { prefixer } from './utils/prefixer.js';\nimport { memo } from './utils/memo.js';\nimport { add_alias } from './utils/index.js';\n\nconst map_left_right = {\n  center: '50%',\n  left: '0%', right: '100%',\n  top: '50%', bottom: '50%'\n};\n\nconst map_top_bottom = {\n  center: '50%',\n  top: '0%', bottom: '100%',\n  left: '50%', right: '50%',\n};\n\nexport default add_alias({\n\n  size(value, { is_special_selector, grid }) {\n    let [w, h = w, ratio] = parse_value_group(value);\n    if (is_preset(w)) {\n      [w, h] = get_preset(w, h);\n    }\n    let styles = `\n      width: ${ w };\n      height: ${ h };\n    `;\n    if (w === 'auto' || h === 'auto') {\n      if (ratio) {\n        if (/^\\(.+\\)$/.test(ratio)) {\n          ratio = ratio.substring(1, ratio.length - 1);\n        } else if (!/^calc/.test(ratio)) {\n          ratio = `calc(${ratio})`;\n        }\n        if (!is_special_selector) {\n          styles += `aspect-ratio: ${ ratio };`;\n        }\n      }\n      if (is_special_selector) {\n        styles += `aspect-ratio: ${ ratio || grid.ratio };`;\n      }\n    }\n    if (!is_special_selector) {\n      styles += `\n        --internal-cell-width: ${ w };\n        --internal-cell-height: ${ h };\n      `;\n    }\n    return styles;\n  },\n\n  place(value, { extra }) {\n    let [left, top = '50%'] = parse_value_group(value);\n    left = map_left_right[left] || left;\n    top = map_top_bottom[top] || top;\n    const cw = 'var(--internal-cell-width, 25%)';\n    const ch = 'var(--internal-cell-height, 25%)';\n    return `\n      position: absolute;\n      left: ${ left };\n      top: ${ top };\n      width: ${ cw };\n      height: ${ ch };\n      margin-left: calc(${ cw } / -2);\n      margin-top: calc(${ ch } / -2);\n      grid-area: unset;\n      --plot-angle: ${ extra || 0 };\n      rotate: ${ extra || 0 }deg;\n    `;\n  },\n\n  grid(value, options) {\n    let result = {\n      clip: true,\n    };\n    if (/no\\-*clip/i.test(value)) {\n      result.clip = false;\n      value = value.replace(/no\\-*clip/i, '');\n    }\n    let groups = parse_value_group(value, {\n      symbol: ['/', '+', '*', '|', '-', '~'],\n      noSpace: true,\n      verbose: true\n    });\n    for (let { group, value } of groups) {\n      if (group === '+') result.scale = value;\n      if (group === '*') result.rotate = value;\n      if (group === '~') result.translate = value;\n      if (group === '/') {\n        if (result.size === undefined) result.size = this.size(value, options);\n        else result.fill = value;\n      }\n      if ((group === '|' || group == '-' || group == '') && !result.grid) {\n        result.grid = parse_grid(value, options.max_grid);\n        if (group === '|') {\n          result.flexColumn = true;\n        }\n        if (group === '-') {\n          result.flexRow = true;\n        }\n      }\n    }\n    return result;\n  },\n\n  gap(value) {\n    return value;\n  },\n\n  seed(value) {\n    return value;\n  },\n\n  shape: memo('shape-property', value => {\n    let [type, ...args] = parse_value_group(value);\n    if (typeof shapes[type] !== 'function') return '';\n    let prop = 'clip-path';\n    let points = shapes[type](...args);\n    let rules = `${ prop }: polygon(${points.join(',')});`;\n    return prefixer(prop, rules) + 'overflow: hidden;';\n  }),\n\n  use(rules) {\n    if (rules.length > 2) {\n      return rules;\n    }\n  },\n\n  content(value) {\n    return value;\n  },\n\n}, {\n  // legacy names.\n  'place-cell': 'place',\n  'offset': 'place',\n  'position': 'place',\n});\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}