{"ast":null,"code":"import _objectSpread from \"/var/www/www-root/data/www/knigavl.ru/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";\nimport _objectWithoutProperties from \"/var/www/www-root/data/www/knigavl.ru/node_modules/@babel/runtime/helpers/esm/objectWithoutProperties.js\";\nconst _excluded = [\"active\"];\nimport { jsx } from \"react/jsx-runtime\";\nimport { GlitchEffect, GlitchMode } from \"postprocessing\";\nimport { forwardRef, useMemo, useLayoutEffect, useEffect } from \"react\";\nimport { useThree } from \"@react-three/fiber\";\nimport { useVector2 } from \"../util.js\";\nconst Glitch = forwardRef(function Glitch2(_ref, ref) {\n  let {\n      active = true\n    } = _ref,\n    props = _objectWithoutProperties(_ref, _excluded);\n  const invalidate = useThree(state => state.invalidate);\n  const delay = useVector2(props, \"delay\");\n  const duration = useVector2(props, \"duration\");\n  const strength = useVector2(props, \"strength\");\n  const chromaticAberrationOffset = useVector2(props, \"chromaticAberrationOffset\");\n  const effect = useMemo(() => new GlitchEffect(_objectSpread(_objectSpread({}, props), {}, {\n    delay,\n    duration,\n    strength,\n    chromaticAberrationOffset\n  })), [delay, duration, props, strength, chromaticAberrationOffset]);\n  useLayoutEffect(() => {\n    effect.mode = active ? props.mode || GlitchMode.SPORADIC : GlitchMode.DISABLED;\n    invalidate();\n  }, [active, effect, invalidate, props.mode]);\n  useEffect(() => {\n    return () => {\n      var _a;\n      (_a = effect.dispose) == null ? void 0 : _a.call(effect);\n    };\n  }, [effect]);\n  return /* @__PURE__ */jsx(\"primitive\", {\n    ref,\n    object: effect,\n    dispose: null\n  });\n});\nexport { Glitch };","map":{"version":3,"names":["Glitch","forwardRef","Glitch2","_ref","ref","active","props","_objectWithoutProperties","_excluded","invalidate","useThree","state","delay","useVector2","duration","strength","chromaticAberrationOffset","effect","useMemo","GlitchEffect","_objectSpread","useLayoutEffect","mode","GlitchMode","SPORADIC","DISABLED","useEffect","_a","dispose","call","jsx","object"],"sources":["/var/www/www-root/data/www/knigavl.ru/node_modules/@react-three/postprocessing/src/effects/Glitch.tsx"],"sourcesContent":["import { Vector2 } from 'three'\nimport { GlitchEffect, GlitchMode } from 'postprocessing'\nimport { Ref, forwardRef, useMemo, useLayoutEffect, useEffect } from 'react'\nimport { ReactThreeFiber, useThree } from '@react-three/fiber'\nimport { useVector2 } from '../util'\n\nexport type GlitchProps = ConstructorParameters<typeof GlitchEffect>[0] &\n  Partial<{\n    mode: GlitchMode\n    active: boolean\n    delay: ReactThreeFiber.Vector2\n    duration: ReactThreeFiber.Vector2\n    chromaticAberrationOffset: ReactThreeFiber.Vector2\n    strength: ReactThreeFiber.Vector2\n  }>\n\nexport const Glitch = forwardRef<GlitchEffect, GlitchProps>(function Glitch(\n  { active = true, ...props }: GlitchProps,\n  ref: Ref<GlitchEffect>\n) {\n  const invalidate = useThree((state) => state.invalidate)\n  const delay = useVector2(props, 'delay')\n  const duration = useVector2(props, 'duration')\n  const strength = useVector2(props, 'strength')\n  const chromaticAberrationOffset = useVector2(props, 'chromaticAberrationOffset')\n  const effect = useMemo(\n    () => new GlitchEffect({ ...props, delay, duration, strength, chromaticAberrationOffset }),\n    [delay, duration, props, strength, chromaticAberrationOffset]\n  )\n  useLayoutEffect(() => {\n    effect.mode = active ? props.mode || GlitchMode.SPORADIC : GlitchMode.DISABLED\n    invalidate()\n  }, [active, effect, invalidate, props.mode])\n  useEffect(() => {\n    return () => {\n      effect.dispose?.()\n    }\n  }, [effect])\n  return <primitive ref={ref} object={effect} dispose={null} />\n})\n"],"mappings":";;;;;;;;AAgBa,MAAAA,MAAA,GAASC,UAAA,CAAsC,SAASC,QAAAC,IAAA,EAEnEC,GAAA,EACA;EAAA,IAFA;MAAEC,MAAA,GAAS;IAAe,IAAAF,IAAA;IAANG,KAAA,GAAAC,wBAAA,CAAAJ,IAAA,EAAAK,SAAA;EAGpB,MAAMC,UAAA,GAAaC,QAAA,CAAUC,KAAA,IAAUA,KAAA,CAAMF,UAAU;EACjD,MAAAG,KAAA,GAAQC,UAAA,CAAWP,KAAA,EAAO,OAAO;EACjC,MAAAQ,QAAA,GAAWD,UAAA,CAAWP,KAAA,EAAO,UAAU;EACvC,MAAAS,QAAA,GAAWF,UAAA,CAAWP,KAAA,EAAO,UAAU;EACvC,MAAAU,yBAAA,GAA4BH,UAAA,CAAWP,KAAA,EAAO,2BAA2B;EAC/E,MAAMW,MAAA,GAASC,OAAA,CACb,MAAM,IAAIC,YAAA,CAAAC,aAAA,CAAAA,aAAA,KAAkBd,KAAA;IAAOM,KAAA;IAAOE,QAAA;IAAUC,QAAA;IAAUC;EAAA,EAA2B,GACzF,CAACJ,KAAA,EAAOE,QAAA,EAAUR,KAAA,EAAOS,QAAA,EAAUC,yBAAyB;EAE9DK,eAAA,CAAgB,MAAM;IACpBJ,MAAA,CAAOK,IAAA,GAAOjB,MAAA,GAASC,KAAA,CAAMgB,IAAA,IAAQC,UAAA,CAAWC,QAAA,GAAWD,UAAA,CAAWE,QAAA;IAC3DhB,UAAA;EAAA,GACV,CAACJ,MAAA,EAAQY,MAAA,EAAQR,UAAA,EAAYH,KAAA,CAAMgB,IAAI,CAAC;EAC3CI,SAAA,CAAU,MAAM;IACd,OAAO,MAAM;;MACX,CAAAC,EAAA,GAAAV,MAAA,CAAOW,OAAA,KAAP,gBAAAD,EAAA,CAAAE,IAAA,CAAAZ,MAAA;IAAiB;EACnB,GACC,CAACA,MAAM,CAAC;EACX,sBAAAa,GAAA,CAAQ,aAAU;IAAA1B,GAAA;IAAU2B,MAAA,EAAQd,MAAA;IAAQW,OAAA,EAAS;EAAM;AAC7D,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}