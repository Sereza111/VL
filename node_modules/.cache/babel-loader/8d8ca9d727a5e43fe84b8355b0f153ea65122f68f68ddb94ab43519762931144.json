{"ast":null,"code":"import React,{useEffect,useRef,useState,useCallback}from'react';import anime from'animejs/lib/anime.js';import AdvancedPortalManager from'./AdvancedPortalManager';// Enhanced Portal Reveal with cinematic transitions\nimport{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const PortalReveal=_ref=>{let{isOpen=false,progress=0,onOpen=null,onComplete=null,accentColor='#A8C7FA',size=260,className='',clickPosition=null,enableCinematicMode=true,fallbackToSimple=false}=_ref;const canvasRef=useRef(null);const containerRef=useRef(null);const[localProgress,setLocalProgress]=useState(progress);const[showAdvancedPortal,setShowAdvancedPortal]=useState(false);const[clickPos,setClickPos]=useState(clickPosition);const rafRef=useRef(0);useEffect(()=>{setLocalProgress(progress);},[progress]);useEffect(()=>{const canvas=canvasRef.current;if(!canvas)return;const ctx=canvas.getContext('2d');if(!ctx)return;let t=0;const dpr=Math.min(2,window.devicePixelRatio||1);const render=()=>{const w=size;const h=size;if(canvas.width!==w*dpr||canvas.height!==h*dpr){canvas.width=w*dpr;canvas.height=h*dpr;canvas.style.width=w+'px';canvas.style.height=h+'px';ctx.setTransform(dpr,0,0,dpr,0,0);}ctx.clearRect(0,0,w,h);// Portal ring - proper proportions\nconst maxR=Math.min(w,h)*0.35;const r=12+localProgress*maxR;// Dark center with mystical glow\nctx.save();const centerGrad=ctx.createRadialGradient(w/2,h/2,0,w/2,h/2,r);centerGrad.addColorStop(0,'rgba(60,47,79,0.9)');centerGrad.addColorStop(0.7,'rgba(27,38,59,0.6)');centerGrad.addColorStop(1,'rgba(26,60,52,0.3)');ctx.fillStyle=centerGrad;ctx.beginPath();ctx.arc(w/2,h/2,r,0,Math.PI*2);ctx.fill();ctx.restore();// Mystical runes around the portal\nconst runes=['✦','☽','⚝','⚜','☾','✧','⚹','♱'];ctx.save();ctx.translate(w/2,h/2);for(let i=0;i<runes.length;i++){const angle=i/runes.length*Math.PI*2+t*0.3;const runeR=r+15;const x=Math.cos(angle)*runeR;const y=Math.sin(angle)*runeR;ctx.fillStyle=\"hsla(210, 80%, 70%, \".concat(0.4+localProgress*0.6,\")\");ctx.font='14px serif';ctx.textAlign='center';ctx.textBaseline='middle';ctx.fillText(runes[i],x,y);}ctx.restore();// Portal energy waves\nif(localProgress>0.3){for(let wave=0;wave<3;wave++){ctx.save();ctx.globalAlpha=0.3*localProgress;ctx.strokeStyle='#A8C7FA';ctx.lineWidth=1;const waveR=r*(0.8+wave*0.1)+Math.sin(t*2+wave)*3;ctx.beginPath();ctx.arc(w/2,h/2,waveR,0,Math.PI*2);ctx.stroke();ctx.restore();}}t+=0.02;rafRef.current=requestAnimationFrame(render);};rafRef.current=requestAnimationFrame(render);return()=>cancelAnimationFrame(rafRef.current);},[size,accentColor,localProgress]);// Обработчик клика для определения позиции\nconst handlePortalClick=useCallback(event=>{if(enableCinematicMode&&!fallbackToSimple&&isOpen&&localProgress>=0.8){var _containerRef$current;const rect=(_containerRef$current=containerRef.current)===null||_containerRef$current===void 0?void 0:_containerRef$current.getBoundingClientRect();if(rect){const x=event.clientX;const y=event.clientY;setClickPos({x,y});setShowAdvancedPortal(true);// Воспроизводим событие для других компонентов\nwindow.dispatchEvent(new CustomEvent('portal-opened',{detail:{x,y,source:'PortalReveal'}}));}}else if(onOpen&&localProgress>=1){onOpen();}},[enableCinematicMode,fallbackToSimple,isOpen,localProgress,onOpen]);// Обработчик завершения портальных эффектов\nconst handleAdvancedPortalComplete=useCallback(result=>{if(onComplete){onComplete(result);}if(onOpen){onOpen(result);}},[onComplete,onOpen]);// Обработчик закрытия продвинутого портала\nconst handleAdvancedPortalClose=useCallback(()=>{setShowAdvancedPortal(false);setLocalProgress(0);// Сбрасываем прогресс для повторного использования\n},[]);useEffect(()=>{if(isOpen&&onOpen&&localProgress>=1&&!enableCinematicMode){onOpen();}},[isOpen,localProgress,onOpen,enableCinematicMode]);// Animate progress when isOpen toggles true\nuseEffect(()=>{if(!isOpen)return;anime({targets:{p:localProgress},p:1,duration:enableCinematicMode?2000:1600,// Дольше для кинематографического режима\neasing:enableCinematicMode?'easeOutCubic':'easeInOutQuad',update:anim=>setLocalProgress(anim.animations[0].currentValue),complete:()=>{if(!enableCinematicMode&&onOpen){onOpen();}// В кинематографическом режиме ждем клика пользователя\n}});},[isOpen,enableCinematicMode,onOpen]);return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"div\",{ref:containerRef,className:\"portal-reveal \".concat(className,\" \").concat(enableCinematicMode?'cinematic-mode':''),style:{position:'relative',cursor:enableCinematicMode&&isOpen&&localProgress>=0.8?'pointer':'default'},onClick:handlePortalClick,onKeyDown:e=>{if(e.key==='Enter'||e.key===' '){e.preventDefault();handlePortalClick(e);}},tabIndex:isOpen&&localProgress>=0.8?0:-1,role:enableCinematicMode?\"button\":undefined,\"aria-label\":enableCinematicMode?\"Открыть портал в алхимическую лабораторию\":undefined,children:[/*#__PURE__*/_jsx(\"canvas\",{ref:canvasRef}),enableCinematicMode&&isOpen&&localProgress>=0.8&&!showAdvancedPortal&&/*#__PURE__*/_jsx(\"div\",{className:\"portal-click-indicator\",style:{position:'absolute',top:'50%',left:'50%',transform:'translate(-50%, -50%)',color:accentColor,fontSize:'14px',textAlign:'center',textShadow:'0 0 10px currentColor',animation:'portalPulse 2s ease-in-out infinite',pointerEvents:'none',zIndex:10},children:\"\\u2726 \\u041D\\u0430\\u0436\\u043C\\u0438\\u0442\\u0435 \\u0434\\u043B\\u044F \\u0432\\u0445\\u043E\\u0434\\u0430 \\u2726\"})]}),showAdvancedPortal&&/*#__PURE__*/_jsx(AdvancedPortalManager,{isOpen:showAdvancedPortal,clickPosition:clickPos,onClose:handleAdvancedPortalClose,onComplete:handleAdvancedPortalComplete}),/*#__PURE__*/_jsx(\"style\",{jsx:true,children:\"\\n        @keyframes portalPulse {\\n          0%, 100% { opacity: 0.6; transform: translate(-50%, -50%) scale(1); }\\n          50% { opacity: 1; transform: translate(-50%, -50%) scale(1.1); }\\n        }\\n        \\n        .portal-reveal.cinematic-mode:hover {\\n          filter: brightness(1.1);\\n        }\\n        \\n        .portal-reveal.cinematic-mode:focus-visible {\\n          outline: 2px solid \".concat(accentColor,\";\\n          outline-offset: 3px;\\n        }\\n        \\n        .portal-click-indicator {\\n          font-family: serif;\\n          font-weight: bold;\\n          letter-spacing: 2px;\\n        }\\n        \\n        @media (max-width: 768px) {\\n          .portal-click-indicator {\\n            font-size: 12px;\\n          }\\n        }\\n      \")})]});};export default/*#__PURE__*/React.memo(PortalReveal);","map":{"version":3,"names":["React","useEffect","useRef","useState","useCallback","anime","AdvancedPortalManager","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","PortalReveal","_ref","isOpen","progress","onOpen","onComplete","accentColor","size","className","clickPosition","enableCinematicMode","fallbackToSimple","canvasRef","containerRef","localProgress","setLocalProgress","showAdvancedPortal","setShowAdvancedPortal","clickPos","setClickPos","rafRef","canvas","current","ctx","getContext","t","dpr","Math","min","window","devicePixelRatio","render","w","h","width","height","style","setTransform","clearRect","maxR","r","save","centerGrad","createRadialGradient","addColorStop","fillStyle","beginPath","arc","PI","fill","restore","runes","translate","i","length","angle","runeR","x","cos","y","sin","concat","font","textAlign","textBaseline","fillText","wave","globalAlpha","strokeStyle","lineWidth","waveR","stroke","requestAnimationFrame","cancelAnimationFrame","handlePortalClick","event","_containerRef$current","rect","getBoundingClientRect","clientX","clientY","dispatchEvent","CustomEvent","detail","source","handleAdvancedPortalComplete","result","handleAdvancedPortalClose","targets","p","duration","easing","update","anim","animations","currentValue","complete","children","ref","position","cursor","onClick","onKeyDown","e","key","preventDefault","tabIndex","role","undefined","top","left","transform","color","fontSize","textShadow","animation","pointerEvents","zIndex","onClose","memo"],"sources":["/var/www/www-root/data/www/knigavl.ru/src/components/PortalReveal.js"],"sourcesContent":["import React, { useEffect, useRef, useState, useCallback } from 'react';\r\nimport anime from 'animejs/lib/anime.js';\r\nimport AdvancedPortalManager from './AdvancedPortalManager';\r\n\r\n// Enhanced Portal Reveal with cinematic transitions\r\nconst PortalReveal = ({\r\n  isOpen = false,\r\n  progress = 0,\r\n  onOpen = null,\r\n  onComplete = null,\r\n  accentColor = '#A8C7FA',\r\n  size = 260,\r\n  className = '',\r\n  clickPosition = null,\r\n  enableCinematicMode = true,\r\n  fallbackToSimple = false\r\n}) => {\r\n  const canvasRef = useRef(null);\r\n  const containerRef = useRef(null);\r\n  const [localProgress, setLocalProgress] = useState(progress);\r\n  const [showAdvancedPortal, setShowAdvancedPortal] = useState(false);\r\n  const [clickPos, setClickPos] = useState(clickPosition);\r\n  const rafRef = useRef(0);\r\n\r\n  useEffect(() => {\r\n    setLocalProgress(progress);\r\n  }, [progress]);\r\n\r\n  useEffect(() => {\r\n    const canvas = canvasRef.current;\r\n    if (!canvas) return;\r\n    const ctx = canvas.getContext('2d');\r\n    if (!ctx) return;\r\n\r\n    let t = 0;\r\n    const dpr = Math.min(2, window.devicePixelRatio || 1);\r\n    const render = () => {\r\n      const w = size;\r\n      const h = size;\r\n      if (canvas.width !== w * dpr || canvas.height !== h * dpr) {\r\n        canvas.width = w * dpr;\r\n        canvas.height = h * dpr;\r\n        canvas.style.width = w + 'px';\r\n        canvas.style.height = h + 'px';\r\n        ctx.setTransform(dpr, 0, 0, dpr, 0, 0);\r\n      }\r\n      ctx.clearRect(0, 0, w, h);\r\n\r\n      // Portal ring - proper proportions\r\n      const maxR = Math.min(w, h) * 0.35;\r\n      const r = 12 + localProgress * maxR;\r\n\r\n      // Dark center with mystical glow\r\n      ctx.save();\r\n      const centerGrad = ctx.createRadialGradient(w/2, h/2, 0, w/2, h/2, r);\r\n      centerGrad.addColorStop(0, 'rgba(60,47,79,0.9)');\r\n      centerGrad.addColorStop(0.7, 'rgba(27,38,59,0.6)');\r\n      centerGrad.addColorStop(1, 'rgba(26,60,52,0.3)');\r\n      ctx.fillStyle = centerGrad;\r\n      ctx.beginPath();\r\n      ctx.arc(w/2, h/2, r, 0, Math.PI * 2);\r\n      ctx.fill();\r\n      ctx.restore();\r\n\r\n      // Mystical runes around the portal\r\n      const runes = ['✦', '☽', '⚝', '⚜', '☾', '✧', '⚹', '♱'];\r\n      ctx.save();\r\n      ctx.translate(w/2, h/2);\r\n      for (let i = 0; i < runes.length; i++) {\r\n        const angle = (i / runes.length) * Math.PI * 2 + t * 0.3;\r\n        const runeR = r + 15;\r\n        const x = Math.cos(angle) * runeR;\r\n        const y = Math.sin(angle) * runeR;\r\n        ctx.fillStyle = `hsla(210, 80%, 70%, ${0.4 + localProgress * 0.6})`;\r\n        ctx.font = '14px serif';\r\n        ctx.textAlign = 'center';\r\n        ctx.textBaseline = 'middle';\r\n        ctx.fillText(runes[i], x, y);\r\n      }\r\n      ctx.restore();\r\n\r\n      // Portal energy waves\r\n      if (localProgress > 0.3) {\r\n        for (let wave = 0; wave < 3; wave++) {\r\n          ctx.save();\r\n          ctx.globalAlpha = 0.3 * localProgress;\r\n          ctx.strokeStyle = '#A8C7FA';\r\n          ctx.lineWidth = 1;\r\n          const waveR = r * (0.8 + wave * 0.1) + Math.sin(t * 2 + wave) * 3;\r\n          ctx.beginPath();\r\n          ctx.arc(w/2, h/2, waveR, 0, Math.PI * 2);\r\n          ctx.stroke();\r\n          ctx.restore();\r\n        }\r\n      }\r\n\r\n      t += 0.02;\r\n      rafRef.current = requestAnimationFrame(render);\r\n    };\r\n    rafRef.current = requestAnimationFrame(render);\r\n    return () => cancelAnimationFrame(rafRef.current);\r\n  }, [size, accentColor, localProgress]);\r\n\r\n  // Обработчик клика для определения позиции\r\n  const handlePortalClick = useCallback((event) => {\r\n    if (enableCinematicMode && !fallbackToSimple && isOpen && localProgress >= 0.8) {\r\n      const rect = containerRef.current?.getBoundingClientRect();\r\n      if (rect) {\r\n        const x = event.clientX;\r\n        const y = event.clientY;\r\n        setClickPos({ x, y });\r\n        setShowAdvancedPortal(true);\r\n        \r\n        // Воспроизводим событие для других компонентов\r\n        window.dispatchEvent(new CustomEvent('portal-opened', { \r\n          detail: { x, y, source: 'PortalReveal' } \r\n        }));\r\n      }\r\n    } else if (onOpen && localProgress >= 1) {\r\n      onOpen();\r\n    }\r\n  }, [enableCinematicMode, fallbackToSimple, isOpen, localProgress, onOpen]);\r\n\r\n  // Обработчик завершения портальных эффектов\r\n  const handleAdvancedPortalComplete = useCallback((result) => {\r\n    if (onComplete) {\r\n      onComplete(result);\r\n    }\r\n    if (onOpen) {\r\n      onOpen(result);\r\n    }\r\n  }, [onComplete, onOpen]);\r\n\r\n  // Обработчик закрытия продвинутого портала\r\n  const handleAdvancedPortalClose = useCallback(() => {\r\n    setShowAdvancedPortal(false);\r\n    setLocalProgress(0); // Сбрасываем прогресс для повторного использования\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    if (isOpen && onOpen && localProgress >= 1 && !enableCinematicMode) {\r\n      onOpen();\r\n    }\r\n  }, [isOpen, localProgress, onOpen, enableCinematicMode]);\r\n\r\n  // Animate progress when isOpen toggles true\r\n  useEffect(() => {\r\n    if (!isOpen) return;\r\n    \r\n    anime({\r\n      targets: { p: localProgress },\r\n      p: 1,\r\n      duration: enableCinematicMode ? 2000 : 1600, // Дольше для кинематографического режима\r\n      easing: enableCinematicMode ? 'easeOutCubic' : 'easeInOutQuad',\r\n      update: (anim) => setLocalProgress(anim.animations[0].currentValue),\r\n      complete: () => {\r\n        if (!enableCinematicMode && onOpen) {\r\n          onOpen();\r\n        }\r\n        // В кинематографическом режиме ждем клика пользователя\r\n      }\r\n    });\r\n  }, [isOpen, enableCinematicMode, onOpen]);\r\n\r\n  return (\r\n    <>\r\n      <div \r\n        ref={containerRef} \r\n        className={`portal-reveal ${className} ${enableCinematicMode ? 'cinematic-mode' : ''}`} \r\n        style={{ \r\n          position: 'relative',\r\n          cursor: (enableCinematicMode && isOpen && localProgress >= 0.8) ? 'pointer' : 'default'\r\n        }}\r\n        onClick={handlePortalClick}\r\n        onKeyDown={(e) => {\r\n          if (e.key === 'Enter' || e.key === ' ') {\r\n            e.preventDefault();\r\n            handlePortalClick(e);\r\n          }\r\n        }}\r\n        tabIndex={isOpen && localProgress >= 0.8 ? 0 : -1}\r\n        role={enableCinematicMode ? \"button\" : undefined}\r\n        aria-label={enableCinematicMode ? \"Открыть портал в алхимическую лабораторию\" : undefined}\r\n      >\r\n        <canvas ref={canvasRef} />\r\n        \r\n        {/* Индикатор готовности к клику в кинематографическом режиме */}\r\n        {enableCinematicMode && isOpen && localProgress >= 0.8 && !showAdvancedPortal && (\r\n          <div \r\n            className=\"portal-click-indicator\"\r\n            style={{\r\n              position: 'absolute',\r\n              top: '50%',\r\n              left: '50%',\r\n              transform: 'translate(-50%, -50%)',\r\n              color: accentColor,\r\n              fontSize: '14px',\r\n              textAlign: 'center',\r\n              textShadow: '0 0 10px currentColor',\r\n              animation: 'portalPulse 2s ease-in-out infinite',\r\n              pointerEvents: 'none',\r\n              zIndex: 10\r\n            }}\r\n          >\r\n            ✦ Нажмите для входа ✦\r\n          </div>\r\n        )}\r\n      </div>\r\n      \r\n      {/* Продвинутый портальный менеджер */}\r\n      {showAdvancedPortal && (\r\n        <AdvancedPortalManager\r\n          isOpen={showAdvancedPortal}\r\n          clickPosition={clickPos}\r\n          onClose={handleAdvancedPortalClose}\r\n          onComplete={handleAdvancedPortalComplete}\r\n        />\r\n      )}\r\n      \r\n      {/* CSS для анимации индикатора */}\r\n      <style jsx>{`\r\n        @keyframes portalPulse {\r\n          0%, 100% { opacity: 0.6; transform: translate(-50%, -50%) scale(1); }\r\n          50% { opacity: 1; transform: translate(-50%, -50%) scale(1.1); }\r\n        }\r\n        \r\n        .portal-reveal.cinematic-mode:hover {\r\n          filter: brightness(1.1);\r\n        }\r\n        \r\n        .portal-reveal.cinematic-mode:focus-visible {\r\n          outline: 2px solid ${accentColor};\r\n          outline-offset: 3px;\r\n        }\r\n        \r\n        .portal-click-indicator {\r\n          font-family: serif;\r\n          font-weight: bold;\r\n          letter-spacing: 2px;\r\n        }\r\n        \r\n        @media (max-width: 768px) {\r\n          .portal-click-indicator {\r\n            font-size: 12px;\r\n          }\r\n        }\r\n      `}</style>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default React.memo(PortalReveal);\r\n\r\n\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}