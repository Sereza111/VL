{"ast":null,"code":"import _objectSpread from\"/var/www/www-root/data/www/knigavl.ru/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";// src/screens/FarmScreen.js - –ú–∏—Å—Ç–∏—á–µ—Å–∫–∞—è –≤–µ—Ä—Å–∏—è\nimport React,{useState,useEffect,useRef,useCallback}from'react';import{FaLeaf,FaMoon,FaStar,FaInfoCircle,FaHistory}from'react-icons/fa';import anime from'animejs/lib/anime.js';import BalanceButton from'../components/BalanceButton';import'./FarmScreen.css';import config from'../config';import PortalReveal from'../components/PortalReveal';import AdvancedPortalManager from'../components/AdvancedPortalManager';import AlchemyLab from'./mini/AlchemyLab';import CrystalMine from'./mini/CrystalMine';import GenerativeIcon from'../components/GenerativeIcon';import RuneProgress from'../components/RuneProgress';// –¶–≤–µ—Ç–æ–≤–∞—è –ø–∞–ª–∏—Ç—Ä–∞ –∏–∑ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏–π\nimport{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const COLOR_PALETTE={darkPurple:'#3C2F4F',// –¢—ë–º–Ω–æ-—Ñ–∏–æ–ª–µ—Ç–æ–≤—ã–π ‚Äî –æ—Å–Ω–æ–≤–Ω–æ–π —Ñ–æ–Ω\nbeigeParchment:'#E8D3A9',// –ë–µ–∂–µ–≤–æ-–ø–µ—Ä–≥–∞–º–µ–Ω—Ç–Ω—ã–π ‚Äî —Ç–µ–∫—Å—Ç, –∞–∫—Ü–µ–Ω—Ç—ã\ndarkTurquoise:'#1A3C34',// –¢—ë–º–Ω—ã–π –±–∏—Ä—é–∑–æ–≤—ã–π ‚Äî —Å–≤–µ—Ç–ª—è—á–∫–∏, —Å–≤–µ—á–µ–Ω–∏–µ\ninkyBlue:'#1B263B',// –ß–µ—Ä–Ω–∏–ª—å–Ω—ã–π —Å–∏–Ω–∏–π ‚Äî —Ç–µ–Ω–∏, –∫–æ–Ω—Ç—É—Ä—ã\nmoonBlue:'#A8C7FA'// –ì–æ–ª—É–±–æ–≤–∞—Ç—ã–π –æ—Ç—Ç–µ–Ω–æ–∫ –ª—É–Ω—ã\n};const FarmScreen=_ref=>{var _config$features2,_config$features3,_config$features4;let{balance,updateBalance}=_ref;// –°–æ—Å—Ç–æ—è–Ω–∏—è\nconst[farmStats,setFarmStats]=useState({totalClicks:0,maxCombo:0,todayEarned:0,lastDate:new Date().toDateString()});const[comboCount,setComboCount]=useState(0);const[comboMultiplier,setComboMultiplier]=useState(1);const[showTutorial,setShowTutorial]=useState(false);const[showHistory,setShowHistory]=useState(false);const[energyHistory,setEnergyHistory]=useState([]);const[activeZone,setActiveZone]=useState('crystal');// 'crystal', 'moon', 'forest'\nconst[zoneStats,setZoneStats]=useState({crystal:{level:1,totalEnergy:0,multiplier:1},moon:{level:1,totalEnergy:0,multiplier:1.5,unlocked:false},forest:{level:1,totalEnergy:0,multiplier:2,unlocked:false}});const[energyParticles,setEnergyParticles]=useState([]);const[portalCharge,setPortalCharge]=useState(0);// 0..1 –ø—Ä–æ–≥—Ä–µ—Å—Å –æ—Ç–∫—Ä—ã—Ç–∏—è –ø–æ—Ä—Ç–∞–ª–∞\nconst[portalOpen,setPortalOpen]=useState(false);const[showPortalUI,setShowPortalUI]=useState(false);const[showPotionLab,setShowPotionLab]=useState(false);const[showCrystalMine,setShowCrystalMine]=useState(false);const[potions,setPotions]=useState([]);const[crystalAttempts,setCrystalAttempts]=useState(3);const[enableCinematicPortals]=useState(true);// –í—Å–µ–≥–¥–∞ –≤–∫–ª—é—á–µ–Ω\nconst[artifacts,setArtifacts]=useState([]);const[showAdvancedPortal,setShowAdvancedPortal]=useState(false);const[portalClickPosition,setPortalClickPosition]=useState(null);// Refs\nconst containerRef=useRef(null);const particlesRef=useRef([]);const comboTimerRef=useRef(null);const clickAreaRef=useRef(null);const decayTimerRef=useRef(null);// –ó–∞–≥—Ä—É–∑–∫–∞ –¥–∞–Ω–Ω—ã—Ö –ø—Ä–∏ –º–æ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∏–∏\nuseEffect(()=>{// –ó–∞–≥—Ä—É–∂–∞–µ–º —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É —Ñ–µ—Ä–º—ã\nconst savedStats=JSON.parse(localStorage.getItem('farmStats'))||{totalClicks:0,maxCombo:0,todayEarned:0,lastDate:new Date().toDateString()};// –°–±—Ä–∞—Å—ã–≤–∞–µ–º –¥–Ω–µ–≤–Ω–æ–π –∑–∞—Ä–∞–±–æ—Ç–æ–∫, –µ—Å–ª–∏ —ç—Ç–æ –Ω–æ–≤—ã–π –¥–µ–Ω—å\nconst today=new Date().toDateString();if(savedStats.lastDate!==today){savedStats.todayEarned=0;savedStats.lastDate=today;}setFarmStats(savedStats);// –ó–∞–≥—Ä—É–∂–∞–µ–º —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É –∑–æ–Ω\nconst savedZoneStats=JSON.parse(localStorage.getItem('zoneStats'))||{crystal:{level:1,totalEnergy:0,multiplier:1},moon:{level:1,totalEnergy:0,multiplier:1.5,unlocked:false},forest:{level:1,totalEnergy:0,multiplier:2,unlocked:false}};setZoneStats(savedZoneStats);// –ó–∞–≥—Ä—É–∂–∞–µ–º –∏—Å—Ç–æ—Ä–∏—é —Å–±–æ—Ä–∞ —ç–Ω–µ—Ä–≥–∏–∏\nconst savedHistory=JSON.parse(localStorage.getItem('energyHistory'))||[];setEnergyHistory(savedHistory);// –ó–∞–≥—Ä—É–∂–∞–µ–º –∑–µ–ª—å—è\nconst savedPotions=JSON.parse(localStorage.getItem('potions'))||[];setPotions(savedPotions);// –ó–∞–≥—Ä—É–∂–∞–µ–º –∞—Ä—Ç–µ—Ñ–∞–∫—Ç—ã\nconst savedArtifacts=JSON.parse(localStorage.getItem('artifacts'))||[];setArtifacts(savedArtifacts);// –°–æ–∑–¥–∞–µ–º —Ñ–æ–Ω–æ–≤—ã–µ —á–∞—Å—Ç–∏—Ü—ã\ncreateBackgroundParticles();// –ó–∞–ø—É—Å–∫–∞–µ–º –ø–ª–∞–≤–Ω—ã–π —Å–ø–∞–¥ –∑–∞—Ä—è–¥–∫–∏ –ø–æ—Ä—Ç–∞–ª–∞\nif(!decayTimerRef.current){decayTimerRef.current=setInterval(()=>{setPortalCharge(prev=>{if(portalOpen||showPortalUI||showPotionLab||showCrystalMine)return prev;const next=Math.max(0,prev-0.002);// –ú–µ–¥–ª–µ–Ω–Ω–µ–µ —Å–ø–∞–¥–∞–µ—Ç\nreturn next;});},200);// –†–µ–∂–µ –ø—Ä–æ–≤–µ—Ä—è–µ–º\n}// –û—á–∏—Å—Ç–∫–∞ –ø—Ä–∏ —Ä–∞–∑–º–æ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∏–∏\nreturn()=>{if(comboTimerRef.current){clearTimeout(comboTimerRef.current);}if(decayTimerRef.current){clearInterval(decayTimerRef.current);decayTimerRef.current=null;}particlesRef.current.forEach(particle=>{if(particle.parentNode){particle.parentNode.removeChild(particle);}});};},[]);// –°–æ–∑–¥–∞–Ω–∏–µ —Ñ–æ–Ω–æ–≤—ã—Ö —á–∞—Å—Ç–∏—Ü\nconst createBackgroundParticles=()=>{if(!containerRef.current)return;const container=containerRef.current;const particles=[];// –£–¥–∞–ª—è–µ–º —Å—Ç–∞—Ä—ã–µ —á–∞—Å—Ç–∏—Ü—ã\nparticlesRef.current.forEach(particle=>{if(particle.parentNode){particle.parentNode.removeChild(particle);}});// –°–æ–∑–¥–∞–µ–º –Ω–æ–≤—ã–µ —á–∞—Å—Ç–∏—Ü—ã\nfor(let i=0;i<20;i++){const particle=document.createElement('div');particle.className='mystical-particle';// –°–ª—É—á–∞–π–Ω—ã–π —Ä–∞–∑–º–µ—Ä –∏ –ø–æ–∑–∏—Ü–∏—è\nconst size=2+Math.random()*4;const posX=Math.random()*100;const posY=Math.random()*100;const delay=Math.random()*5;const duration=10+Math.random()*20;const color=Math.random()>0.5?COLOR_PALETTE.beigeParchment:COLOR_PALETTE.moonBlue;// –°—Ç–∏–ª–∏ —á–∞—Å—Ç–∏—Ü—ã\nObject.assign(particle.style,{position:'absolute',width:\"\".concat(size,\"px\"),height:\"\".concat(size,\"px\"),borderRadius:'50%',backgroundColor:color,opacity:0,top:\"\".concat(posY,\"%\"),left:\"\".concat(posX,\"%\"),boxShadow:\"0 0 \".concat(size*2,\"px \").concat(color),zIndex:-1,pointerEvents:'none'});// –î–æ–±–∞–≤–ª—è–µ–º —á–∞—Å—Ç–∏—Ü—É –≤ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä\ncontainer.appendChild(particle);particles.push(particle);// –ê–Ω–∏–º–∏—Ä—É–µ–º —á–∞—Å—Ç–∏—Ü—É\nanime({targets:particle,opacity:[0,0.3,0],translateY:[0,-100],translateX:()=>[0,(Math.random()-0.5)*50],scale:[1,0.5,0],easing:'easeInOutQuad',duration:duration*1000,delay:delay*1000,loop:true});}particlesRef.current=particles;};// –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –Ω–∞–∂–∞—Ç–∏—è –Ω–∞ –æ–±–ª–∞—Å—Ç—å —Å–±–æ—Ä–∞ —ç–Ω–µ—Ä–≥–∏–∏\nconst handleEnergyTap=amount=>{var _config$features;// –†–∞—Å—Å—á–∏—Ç—ã–≤–∞–µ–º –±–∞–∑–æ–≤—É—é —ç–Ω–µ—Ä–≥–∏—é –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç –∞–∫—Ç–∏–≤–Ω–æ–π –∑–æ–Ω—ã\nconst activeZoneStats=zoneStats[activeZone];const baseEnergy=amount*activeZoneStats.multiplier*activeZoneStats.level;// –û–±–Ω–æ–≤–ª—è–µ–º —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É —Ñ–µ—Ä–º—ã\nconst newStats=_objectSpread(_objectSpread({},farmStats),{},{totalClicks:farmStats.totalClicks+1,todayEarned:parseFloat((farmStats.todayEarned+baseEnergy).toFixed(3)),lastDate:new Date().toDateString()});setFarmStats(newStats);localStorage.setItem('farmStats',JSON.stringify(newStats));// –û–±–Ω–æ–≤–ª—è–µ–º —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É –∑–æ–Ω—ã\nconst newZoneStats=_objectSpread({},zoneStats);newZoneStats[activeZone].totalEnergy+=baseEnergy;// –ü—Ä–æ–≤–µ—Ä—è–µ–º, –º–æ–∂–Ω–æ –ª–∏ –ø–æ–≤—ã—Å–∏—Ç—å —É—Ä–æ–≤–µ–Ω—å –∑–æ–Ω—ã\nconst currentLevel=newZoneStats[activeZone].level;const requiredEnergy=currentLevel*50;// 50, 100, 150, ...\nif(newZoneStats[activeZone].totalEnergy>=requiredEnergy){newZoneStats[activeZone].level+=1;// –ê–Ω–∏–º–∞—Ü–∏—è –ø–æ–≤—ã—à–µ–Ω–∏—è —É—Ä–æ–≤–Ω—è\nanime({targets:'.zone-level',scale:[1,1.5,1],opacity:[1,0.5,1],duration:1000,easing:'easeInOutQuad'});}// –ü—Ä–æ–≤–µ—Ä—è–µ–º, –º–æ–∂–Ω–æ –ª–∏ —Ä–∞–∑–±–ª–æ–∫–∏—Ä–æ–≤–∞—Ç—å –Ω–æ–≤—ã–µ –∑–æ–Ω—ã\nif(!newZoneStats.moon.unlocked&&newZoneStats.crystal.level>=5){newZoneStats.moon.unlocked=true;// –ê–Ω–∏–º–∞—Ü–∏—è —Ä–∞–∑–±–ª–æ–∫–∏—Ä–æ–≤–∫–∏\nanime({targets:'.zone-selector',scale:[1,1.1,1],duration:1000,easing:'easeInOutQuad'});}if(!newZoneStats.forest.unlocked&&newZoneStats.moon.level>=5){newZoneStats.forest.unlocked=true;// –ê–Ω–∏–º–∞—Ü–∏—è —Ä–∞–∑–±–ª–æ–∫–∏—Ä–æ–≤–∫–∏\nanime({targets:'.zone-selector',scale:[1,1.1,1],duration:1000,easing:'easeInOutQuad'});}setZoneStats(newZoneStats);localStorage.setItem('zoneStats',JSON.stringify(newZoneStats));// –î–æ–±–∞–≤–ª—è–µ–º –∑–∞–ø–∏—Å—å –≤ –∏—Å—Ç–æ—Ä–∏—é\nconst historyEntry={timestamp:new Date().toISOString(),amount:baseEnergy,zone:activeZone,combo:comboMultiplier};const newHistory=[historyEntry,...energyHistory.slice(0,19)];// –•—Ä–∞–Ω–∏–º —Ç–æ–ª—å–∫–æ 20 –ø–æ—Å–ª–µ–¥–Ω–∏—Ö –∑–∞–ø–∏—Å–µ–π\nsetEnergyHistory(newHistory);localStorage.setItem('energyHistory',JSON.stringify(newHistory));// –û–±–Ω–æ–≤–ª—è–µ–º –±–∞–ª–∞–Ω—Å\nupdateBalance(baseEnergy,baseEnergy*0.1);// 10% —ç–Ω–µ—Ä–≥–∏–∏ –∏–¥–µ—Ç –Ω–∞ –æ–ø—ã—Ç\n// –ó–∞—Ä—è–¥ –ø–æ—Ä—Ç–∞–ª–∞ (–ø–æ –∫–ª–∏–∫—É –ø–æ—Å—Ç–µ–ø–µ–Ω–Ω–æ –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç—Å—è –Ω–æ–≤–æ–µ –ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–æ)\nif(config!==null&&config!==void 0&&(_config$features=config.features)!==null&&_config$features!==void 0&&_config$features.enablePortalMechanic){const increment=0.08;// –§–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –±—ã—Å—Ç—Ä—ã–π –∑–∞—Ä—è–¥ - –ø–æ—Ä—Ç–∞–ª –æ—Ç–∫—Ä–æ–µ—Ç—Å—è –∑–∞ ~12 –∫–ª–∏–∫–æ–≤\nsetPortalCharge(prev=>{const next=Math.min(1,prev+increment);// –¢—Ä–∏–≥–≥–µ—Ä –æ—Ç–∫—Ä—ã—Ç–∏—è –ø–æ—Ä—Ç–∞–ª–∞ –ø—Ä–∏ –ø–æ–ª–Ω–æ–º –∑–∞—Ä—è–¥–µ\nif(next>=1&&!portalOpen){setPortalOpen(true);// –ù–µ–±–æ–ª—å—à–æ–π –≤–∏–∑—É–∞–ª—å–Ω—ã–π –∏–º–ø—É–ª—å—Å –∑–∞–≥–æ–ª–æ–≤–∫–∞\nanime({targets:'.farm-header',scale:[1,1.03,1],duration:600,easing:'easeOutQuad'});}return next;});}};// –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–≥–æ –∫–æ–º–±–æ\nconst updateMaxCombo=combo=>{setComboCount(combo);if(combo>=10){setComboMultiplier(3);}else if(combo>=5){setComboMultiplier(2);}else{setComboMultiplier(1);}if(combo>farmStats.maxCombo){const newStats=_objectSpread(_objectSpread({},farmStats),{},{maxCombo:combo});setFarmStats(newStats);localStorage.setItem('farmStats',JSON.stringify(newStats));}};// –ü–æ–ª—É—á–µ–Ω–∏–µ –∏–∫–æ–Ω–∫–∏ –¥–ª—è –∞–∫—Ç–∏–≤–Ω–æ–π –∑–æ–Ω—ã\nconst getZoneIcon=()=>{switch(activeZone){case'moon':return/*#__PURE__*/_jsx(FaMoon,{className:\"zone-icon moon\"});case'forest':return/*#__PURE__*/_jsx(FaLeaf,{className:\"zone-icon forest\"});default:return/*#__PURE__*/_jsx(FaStar,{className:\"zone-icon crystal\"});}};// –ü–æ–ª—É—á–µ–Ω–∏–µ –Ω–∞–∑–≤–∞–Ω–∏—è –¥–ª—è –∞–∫—Ç–∏–≤–Ω–æ–π –∑–æ–Ω—ã\nconst getZoneName=()=>{switch(activeZone){case'moon':return'–õ—É–Ω–Ω–∞—è –ø–æ–ª—è–Ω–∞';case'forest':return'–ú–∏—Å—Ç–∏—á–µ—Å–∫–∏–π –ª–µ—Å';default:return'–ö—Ä–∏—Å—Ç–∞–ª—å–Ω–∞—è –ø–µ—â–µ—Ä–∞';}};// –ü–æ–ª—É—á–µ–Ω–∏–µ –æ–ø–∏—Å–∞–Ω–∏—è –¥–ª—è –∞–∫—Ç–∏–≤–Ω–æ–π –∑–æ–Ω—ã\nconst getZoneDescription=()=>{switch(activeZone){case'moon':return'–≠–Ω–µ—Ä–≥–∏—è –ª—É–Ω–Ω–æ–≥–æ —Å–≤–µ—Ç–∞ —É—Å–∏–ª–∏–≤–∞–µ—Ç –≤–∞—à–∏ —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏. –ë–∞–∑–æ–≤—ã–π –º–Ω–æ–∂–∏—Ç–µ–ª—å: x1.5';case'forest':return'–î—Ä–µ–≤–Ω—è—è —ç–Ω–µ—Ä–≥–∏—è –ª–µ—Å–∞ —Ç–µ—á–µ—Ç —Å–∫–≤–æ–∑—å –≤–∞—Å. –ë–∞–∑–æ–≤—ã–π –º–Ω–æ–∂–∏—Ç–µ–ª—å: x2';default:return'–ö—Ä–∏—Å—Ç–∞–ª–ª—ã —Ä–µ–∑–æ–Ω–∏—Ä—É—é—Ç —Å –≤–∞—à–µ–π —ç–Ω–µ—Ä–≥–∏–µ–π. –ë–∞–∑–æ–≤—ã–π –º–Ω–æ–∂–∏—Ç–µ–ª—å: x1';}};// –ü–æ–ª—É—á–µ–Ω–∏–µ —Ü–≤–µ—Ç–∞ –¥–ª—è –∞–∫—Ç–∏–≤–Ω–æ–π –∑–æ–Ω—ã\nconst getZoneColor=()=>{switch(activeZone){case'moon':return COLOR_PALETTE.moonBlue;case'forest':return COLOR_PALETTE.darkTurquoise;default:return COLOR_PALETTE.beigeParchment;}};// –§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–∞—Ç—ã –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –≤ –∏—Å—Ç–æ—Ä–∏–∏\nconst formatDate=dateString=>{const date=new Date(dateString);return\"\".concat(date.getHours().toString().padStart(2,'0'),\":\").concat(date.getMinutes().toString().padStart(2,'0'));};// –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –¥–ª—è –ø–æ—Ä—Ç–∞–ª—å–Ω–æ–π —Å–∏—Å—Ç–µ–º—ã\nconst handlePortalEnergyReward=reward=>{updateBalance(reward,reward*0.2);// 20% –æ–ø—ã—Ç–∞ –æ—Ç –ø–æ—Ä—Ç–∞–ª—å–Ω—ã—Ö –Ω–∞–≥—Ä–∞–¥\n// –î–æ–±–∞–≤–ª—è–µ–º –∑–∞–ø–∏—Å—å –≤ –∏—Å—Ç–æ—Ä–∏—é –∫–∞–∫ –ø–æ—Ä—Ç–∞–ª—å–Ω—É—é –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å\nconst historyEntry={timestamp:new Date().toISOString(),amount:reward,zone:'portal',combo:1,type:'portal_energy'};const newHistory=[historyEntry,...energyHistory.slice(0,19)];setEnergyHistory(newHistory);localStorage.setItem('energyHistory',JSON.stringify(newHistory));};const handlePortalAddPotion=potion=>{const enhancedPotion=_objectSpread(_objectSpread({},potion),{},{timestamp:Date.now(),fromPortal:true});const newPotions=[...potions,enhancedPotion];setPotions(newPotions);localStorage.setItem('potions',JSON.stringify(newPotions));// –ü–æ–∫–∞–∑—ã–≤–∞–µ–º —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –æ –ø–æ–ª—É—á–µ–Ω–∏–∏ –∑–µ–ª—å—è\nanime({targets:'.farm-actions',scale:[1,1.1,1],duration:600,easing:'easeOutQuad'});};const handlePortalAddArtifact=artifact=>{const enhancedArtifact=_objectSpread(_objectSpread({},artifact),{},{timestamp:Date.now(),fromPortal:true});const newArtifacts=[...artifacts,enhancedArtifact];setArtifacts(newArtifacts);localStorage.setItem('artifacts',JSON.stringify(newArtifacts));// –ü–æ—Ä—Ç–∞–ª—å–Ω—ã–µ –∞—Ä—Ç–µ—Ñ–∞–∫—Ç—ã –¥–∞—é—Ç –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—É—é —ç–Ω–µ—Ä–≥–∏—é\nif(artifact.energyBonus){updateBalance(artifact.energyBonus,0);}};// –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –∫–ª–∏–∫–∞ –ø–æ —ç–∫—Ä–∞–Ω—É –¥–ª—è –æ—Ç–∫—Ä—ã—Ç–∏—è –ø–æ—Ä—Ç–∞–ª–∞\nconst handleScreenClick=useCallback(event=>{// –ü—Ä–æ–≤–µ—Ä—è–µ–º, —á—Ç–æ –∫–ª–∏–∫ –Ω–µ –ø–æ –∫–Ω–æ–ø–∫–∞–º –∏–ª–∏ –¥—Ä—É–≥–∏–º —ç–ª–µ–º–µ–Ω—Ç–∞–º —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è\nif(event.target.closest('button')||event.target.closest('.action-button')||event.target.closest('.zone-selector')||event.target.closest('.modal-overlay')||event.target.closest('.large-button-container')||event.target.closest('.tutorial-button')||event.target.closest('.balance-button')){return;}// –ü—Ä–æ–≤–µ—Ä—è–µ–º, –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –ª–∏ –∑–∞—Ä—è–¥–∞ –ø–æ—Ä—Ç–∞–ª–∞ –∏ –≤–∫–ª—é—á–µ–Ω—ã –ª–∏ –∫–∏–Ω–µ–º–∞—Ç–æ–≥—Ä–∞—Ñ–∏—á–µ—Å–∫–∏–µ –ø–æ—Ä—Ç–∞–ª—ã\nif(enableCinematicPortals&&portalCharge>=0.8&&!showAdvancedPortal){console.log('üåÄ –û—Ç–∫—Ä—ã—Ç–∏–µ –ø–æ—Ä—Ç–∞–ª–∞...');// –ü—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–∞–µ–º –≤—Å–ø–ª—ã—Ç–∏–µ —Å–æ–±—ã—Ç–∏—è\nevent.preventDefault();event.stopPropagation();// –ü–æ–ª—É—á–∞–µ–º –∞–±—Å–æ–ª—é—Ç–Ω—ã–µ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã –∫–ª–∏–∫–∞\nconst x=event.clientX;const y=event.clientY;setPortalClickPosition({x,y});setShowAdvancedPortal(true);// –°–±—Ä–∞—Å—ã–≤–∞–µ–º –∑–∞—Ä—è–¥ –ø–æ—Ä—Ç–∞–ª–∞\nsetPortalCharge(0);setPortalOpen(false);// –í–æ—Å–ø—Ä–æ–∏–∑–≤–æ–¥–∏–º —Å–æ–±—ã—Ç–∏–µ –æ—Ç–∫—Ä—ã—Ç–∏—è –ø–æ—Ä—Ç–∞–ª–∞\nwindow.dispatchEvent(new CustomEvent('portal-opened',{detail:{x,y,source:'FarmScreen'}}));}},[enableCinematicPortals,portalCharge,showAdvancedPortal]);// –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è –∫–∏–Ω–µ–º–∞—Ç–æ–≥—Ä–∞—Ñ–∏—á–µ—Å–∫–æ–≥–æ –ø–æ—Ä—Ç–∞–ª–∞\nconst handleAdvancedPortalComplete=useCallback(result=>{if(result){switch(result.type){case'brew':handlePortalEnergyReward(result.reward);if(result.potion){handlePortalAddPotion(result.potion);}console.log('‚ú® –ê–ª—Ö–∏–º–∏—è –∑–∞–≤–µ—Ä—à–µ–Ω–∞! –ù–∞–≥—Ä–∞–¥–∞:',result.reward);break;case'potion':handlePortalAddPotion(result.potion);console.log('üß™ –ü–æ–ª—É—á–µ–Ω–æ –∑–µ–ª—å–µ:',result.potion.name);break;case'crystal':handlePortalEnergyReward(result.reward);if(result.artifact){handlePortalAddArtifact(result.artifact);}console.log('üíé –ù–∞–π–¥–µ–Ω –∫—Ä–∏—Å—Ç–∞–ª–ª! –ù–∞–≥—Ä–∞–¥–∞:',result.reward);break;default:handlePortalEnergyReward(0.05);}// –ó–∞–∫—Ä—ã–≤–∞–µ–º –ø–æ—Ä—Ç–∞–ª —Ç–æ–ª—å–∫–æ –ø–æ—Å–ª–µ —Ä–µ–∞–ª—å–Ω–æ–≥–æ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏\nsetTimeout(()=>{setShowAdvancedPortal(false);setPortalClickPosition(null);},1000);// –î–∞–µ–º –±–æ–ª—å—à–µ –≤—Ä–µ–º–µ–Ω–∏ –Ω–∞ –∑–∞–≤–µ—Ä—à–µ–Ω–∏–µ –∞–Ω–∏–º–∞—Ü–∏–∏\n}// –ï—Å–ª–∏ result –ø—É—Å—Ç–æ–π - –ù–ï –∑–∞–∫—Ä—ã–≤–∞–µ–º –ø–æ—Ä—Ç–∞–ª (—ç—Ç–æ –±—ã–ª –ø—Ä–æ—Å—Ç–æ –≤—ã–∑–æ–≤ –æ—Ç–∫—Ä—ã—Ç–∏—è)\n},[handlePortalEnergyReward,handlePortalAddPotion,handlePortalAddArtifact]);// –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –∑–∞–∫—Ä—ã—Ç–∏—è –∫–∏–Ω–µ–º–∞—Ç–æ–≥—Ä–∞—Ñ–∏—á–µ—Å–∫–æ–≥–æ –ø–æ—Ä—Ç–∞–ª–∞\nconst handleAdvancedPortalClose=useCallback(()=>{setShowAdvancedPortal(false);setPortalClickPosition(null);},[]);return/*#__PURE__*/_jsxs(\"div\",{className:\"farm-screen \".concat(portalCharge>=0.8&&enableCinematicPortals?'portal-ready':''),ref:containerRef,onClick:handleScreenClick,style:{cursor:portalCharge>=0.8&&enableCinematicPortals?'pointer':'default'},children:[/*#__PURE__*/_jsx(\"div\",{className:\"mystical-overlay\"}),portalCharge>=0.8&&enableCinematicPortals&&!showAdvancedPortal&&/*#__PURE__*/_jsx(\"div\",{className:\"portal-ready-overlay\",style:{position:'absolute',top:0,left:0,right:0,bottom:0,background:'radial-gradient(circle, rgba(168,199,250,0.1) 0%, transparent 70%)',pointerEvents:'none',zIndex:1,animation:'portalReadyPulse 3s ease-in-out infinite'}}),portalCharge>=0.8&&enableCinematicPortals&&!showAdvancedPortal&&/*#__PURE__*/_jsxs(\"div\",{className:\"portal-instruction\",style:{position:'absolute',top:'50%',left:'50%',transform:'translate(-50%, -50%)',textAlign:'center',color:COLOR_PALETTE.moonBlue,fontSize:'18px',textShadow:'0 0 20px currentColor',pointerEvents:'none',zIndex:10,animation:'portalInstructionFloat 4s ease-in-out infinite'},children:[/*#__PURE__*/_jsx(\"div\",{style:{marginBottom:'8px',fontSize:'24px'},children:\"\\u2728 \\u041F\\u043E\\u0440\\u0442\\u0430\\u043B \\u0433\\u043E\\u0442\\u043E\\u0432 \\u043A \\u043E\\u0442\\u043A\\u0440\\u044B\\u0442\\u0438\\u044E \\u2728\"}),/*#__PURE__*/_jsx(\"div\",{style:{fontSize:'14px',opacity:0.8},children:\"\\u041A\\u043B\\u0438\\u043A\\u043D\\u0438\\u0442\\u0435 \\u0432 \\u043B\\u044E\\u0431\\u043E\\u0435 \\u043C\\u0435\\u0441\\u0442\\u043E \\u044D\\u043A\\u0440\\u0430\\u043D\\u0430\"}),/*#__PURE__*/_jsx(\"div\",{style:{fontSize:'12px',opacity:0.6,marginTop:'4px'},children:\"(\\u0438\\u0437\\u0431\\u0435\\u0433\\u0430\\u0439\\u0442\\u0435 \\u043A\\u043D\\u043E\\u043F\\u043E\\u043A \\u0438 \\u044D\\u043B\\u0435\\u043C\\u0435\\u043D\\u0442\\u043E\\u0432 \\u0438\\u043D\\u0442\\u0435\\u0440\\u0444\\u0435\\u0439\\u0441\\u0430)\"})]}),process.env.NODE_ENV==='development'&&/*#__PURE__*/_jsxs(\"div\",{style:{position:'fixed',top:'10px',left:'10px',background:'rgba(0,0,0,0.8)',color:'white',padding:'8px',fontSize:'12px',fontFamily:'monospace',borderRadius:'4px',zIndex:1000,pointerEvents:'none'},children:[/*#__PURE__*/_jsxs(\"div\",{children:[\"\\u041F\\u043E\\u0440\\u0442\\u0430\\u043B: \",Math.round(portalCharge*100),\"%\"]}),/*#__PURE__*/_jsxs(\"div\",{children:[\"\\u041A\\u0438\\u043D\\u0435\\u043C\\u0430\\u0442\\u043E\\u0433\\u0440\\u0430\\u0444: \",enableCinematicPortals?'–í–ö–õ':'–í–´–ö–õ']}),/*#__PURE__*/_jsxs(\"div\",{children:[\"\\u0421\\u0442\\u0430\\u0442\\u0443\\u0441: \",showAdvancedPortal?'–û–¢–ö–†–´–¢':'–ó–ê–ö–†–´–¢']}),portalClickPosition&&/*#__PURE__*/_jsxs(\"div\",{children:[\"\\u041F\\u043E\\u0437\\u0438\\u0446\\u0438\\u044F: \",portalClickPosition.x,\", \",portalClickPosition.y]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"farm-header\",children:[/*#__PURE__*/_jsx(\"h2\",{children:getZoneName()}),/*#__PURE__*/_jsxs(\"div\",{className:\"zone-level\",children:[\"\\u0423\\u0440\\u043E\\u0432\\u0435\\u043D\\u044C \",zoneStats[activeZone].level]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"farm-stats\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"farm-stat\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"farm-stat-label\",children:\"\\u0421\\u0435\\u0433\\u043E\\u0434\\u043D\\u044F \\u0441\\u043E\\u0431\\u0440\\u0430\\u043D\\u043E\"}),/*#__PURE__*/_jsxs(\"span\",{className:\"farm-stat-value\",children:[farmStats.todayEarned.toFixed(3),\" \\u2726\"]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"farm-stat\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"farm-stat-label\",children:\"\\u041C\\u0430\\u043A\\u0441. \\u043A\\u043E\\u043C\\u0431\\u043E\"}),/*#__PURE__*/_jsxs(\"span\",{className:\"farm-stat-value\",children:[\"\\xD7\",farmStats.maxCombo]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"farm-stat\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"farm-stat-label\",children:\"\\u0412\\u0441\\u0435\\u0433\\u043E \\u043D\\u0430\\u0436\\u0430\\u0442\\u0438\\u0439\"}),/*#__PURE__*/_jsx(\"span\",{className:\"farm-stat-value\",children:farmStats.totalClicks})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"zone-selectors\",children:[/*#__PURE__*/_jsxs(\"button\",{className:\"zone-selector \".concat(activeZone==='crystal'?'active':''),onClick:()=>setActiveZone('crystal'),children:[/*#__PURE__*/_jsx(FaStar,{className:\"zone-selector-icon\"}),/*#__PURE__*/_jsx(\"span\",{children:\"\\u041A\\u0440\\u0438\\u0441\\u0442\\u0430\\u043B\\u043B\"})]}),/*#__PURE__*/_jsxs(\"button\",{className:\"zone-selector \".concat(activeZone==='moon'?'active':'',\" \").concat(!zoneStats.moon.unlocked?'locked':''),onClick:()=>zoneStats.moon.unlocked&&setActiveZone('moon'),children:[/*#__PURE__*/_jsx(FaMoon,{className:\"zone-selector-icon\"}),/*#__PURE__*/_jsx(\"span\",{children:zoneStats.moon.unlocked?'–õ—É–Ω–∞':'–ó–∞–∫—Ä—ã—Ç–æ'}),!zoneStats.moon.unlocked&&/*#__PURE__*/_jsx(\"div\",{className:\"unlock-info\",children:\"\\u0422\\u0440\\u0435\\u0431\\u0443\\u0435\\u0442\\u0441\\u044F 5 \\u0443\\u0440. \\u043A\\u0440\\u0438\\u0441\\u0442\\u0430\\u043B\\u043B\\u0430\"})]}),/*#__PURE__*/_jsxs(\"button\",{className:\"zone-selector \".concat(activeZone==='forest'?'active':'',\" \").concat(!zoneStats.forest.unlocked?'locked':''),onClick:()=>zoneStats.forest.unlocked&&setActiveZone('forest'),children:[/*#__PURE__*/_jsx(FaLeaf,{className:\"zone-selector-icon\"}),/*#__PURE__*/_jsx(\"span\",{children:zoneStats.forest.unlocked?'–õ–µ—Å':'–ó–∞–∫—Ä—ã—Ç–æ'}),!zoneStats.forest.unlocked&&/*#__PURE__*/_jsx(\"div\",{className:\"unlock-info\",children:\"\\u0422\\u0440\\u0435\\u0431\\u0443\\u0435\\u0442\\u0441\\u044F 5 \\u0443\\u0440. \\u043B\\u0443\\u043D\\u044B\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"energy-collection-area\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"large-button-container\",children:[/*#__PURE__*/_jsx(BalanceButton,{onTap:handleEnergyTap,onComboChange:updateMaxCombo,size:\"large\",progress:Math.min(1,zoneStats[activeZone].totalEnergy%(zoneStats[activeZone].level*50)/(zoneStats[activeZone].level*50))}),/*#__PURE__*/_jsx(\"button\",{className:\"tutorial-button\",onClick:()=>setShowTutorial(true),children:/*#__PURE__*/_jsx(FaInfoCircle,{})})]}),/*#__PURE__*/_jsx(\"p\",{className:\"zone-description\",children:getZoneDescription()}),/*#__PURE__*/_jsxs(\"div\",{className:\"progress-container\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"progress-label\",children:[\"\\u0414\\u043E \\u0441\\u043B\\u0435\\u0434\\u0443\\u044E\\u0449\\u0435\\u0433\\u043E \\u0443\\u0440\\u043E\\u0432\\u043D\\u044F: \",(zoneStats[activeZone].level*50-zoneStats[activeZone].totalEnergy).toFixed(2),\" \\u2726\"]}),/*#__PURE__*/_jsx(\"div\",{className:\"progress-bar\",children:/*#__PURE__*/_jsx(\"div\",{className:\"progress-fill\",style:{width:\"\".concat(Math.min(100,zoneStats[activeZone].totalEnergy/(zoneStats[activeZone].level*50)*100),\"%\"),backgroundColor:getZoneColor()}})})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"farm-actions\",children:[/*#__PURE__*/_jsxs(\"button\",{className:\"action-button history-button\",onClick:()=>setShowHistory(true),children:[/*#__PURE__*/_jsx(FaHistory,{}),\" \\u0418\\u0441\\u0442\\u043E\\u0440\\u0438\\u044F\"]}),potions.length>0&&/*#__PURE__*/_jsxs(\"button\",{className:\"action-button\",onClick:()=>alert(\"\\u0423 \\u0432\\u0430\\u0441 \".concat(potions.length,\" \\u0437\\u0435\\u043B\\u0438\\u0439: \").concat(potions.map(p=>p.name).join(', '))),children:[\"\\uD83E\\uDDEA \\u0417\\u0435\\u043B\\u044C\\u044F (\",potions.length,\")\"]}),artifacts.length>0&&/*#__PURE__*/_jsxs(\"button\",{className:\"action-button\",onClick:()=>alert(\"\\u0423 \\u0432\\u0430\\u0441 \".concat(artifacts.length,\" \\u0430\\u0440\\u0442\\u0435\\u0444\\u0430\\u043A\\u0442\\u043E\\u0432: \").concat(artifacts.map(a=>a.name).join(', '))),children:[\"\\uD83D\\uDD2E \\u0410\\u0440\\u0442\\u0435\\u0444\\u0430\\u043A\\u0442\\u044B (\",artifacts.length,\")\"]}),process.env.NODE_ENV==='development'&&/*#__PURE__*/_jsxs(\"button\",{className:\"action-button\",onClick:e=>{e.stopPropagation();setPortalCharge(1.0);},style:{background:\"linear-gradient(90deg, #A8C7FA \".concat(portalCharge*100,\"%, #333 \").concat(portalCharge*100,\"%)\"),fontSize:'11px',color:'white',opacity:0.7},children:[\"\\u26A1 \\u0417\\u0410\\u0420\\u042F\\u0414\\u041A\\u0410 (\",Math.round(portalCharge*100),\"%)\"]})]}),showTutorial&&/*#__PURE__*/_jsx(\"div\",{className:\"modal-overlay\",onClick:()=>setShowTutorial(false),children:/*#__PURE__*/_jsxs(\"div\",{className:\"modal-content farm-tutorial\",onClick:e=>e.stopPropagation(),children:[/*#__PURE__*/_jsx(\"h3\",{children:\"\\u041A\\u0430\\u043A \\u0441\\u043E\\u0431\\u0438\\u0440\\u0430\\u0442\\u044C \\u044D\\u043D\\u0435\\u0440\\u0433\\u0438\\u044E\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"tutorial-steps\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"tutorial-step\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"step-number\",children:\"1\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"step-content\",children:[/*#__PURE__*/_jsx(\"h4\",{children:\"\\u041D\\u0430\\u0436\\u0438\\u043C\\u0430\\u0439\\u0442\\u0435 \\u043D\\u0430 \\u044D\\u043D\\u0435\\u0440\\u0433\\u0435\\u0442\\u0438\\u0447\\u0435\\u0441\\u043A\\u0443\\u044E \\u0441\\u0444\\u0435\\u0440\\u0443\"}),/*#__PURE__*/_jsx(\"p\",{children:\"\\u041A\\u0430\\u0436\\u0434\\u043E\\u0435 \\u043D\\u0430\\u0436\\u0430\\u0442\\u0438\\u0435 \\u043F\\u0440\\u0438\\u043D\\u043E\\u0441\\u0438\\u0442 \\u044D\\u043D\\u0435\\u0440\\u0433\\u0438\\u044E \\u0432 \\u0437\\u0430\\u0432\\u0438\\u0441\\u0438\\u043C\\u043E\\u0441\\u0442\\u0438 \\u043E\\u0442 \\u0432\\u044B\\u0431\\u0440\\u0430\\u043D\\u043D\\u043E\\u0439 \\u0437\\u043E\\u043D\\u044B\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"tutorial-step\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"step-number\",children:\"2\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"step-content\",children:[/*#__PURE__*/_jsx(\"h4\",{children:\"\\u0421\\u043E\\u0437\\u0434\\u0430\\u0432\\u0430\\u0439\\u0442\\u0435 \\u043A\\u043E\\u043C\\u0431\\u043E\"}),/*#__PURE__*/_jsx(\"p\",{children:\"5 \\u043D\\u0430\\u0436\\u0430\\u0442\\u0438\\u0439 \\u043F\\u043E\\u0434\\u0440\\u044F\\u0434 \\u0430\\u043A\\u0442\\u0438\\u0432\\u0438\\u0440\\u0443\\u044E\\u0442 \\u043A\\u043E\\u043C\\u0431\\u043E x2, 10 \\u043D\\u0430\\u0436\\u0430\\u0442\\u0438\\u0439 - \\u043A\\u043E\\u043C\\u0431\\u043E x3\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"tutorial-step\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"step-number\",children:\"3\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"step-content\",children:[/*#__PURE__*/_jsx(\"h4\",{children:\"\\u041F\\u043E\\u0432\\u044B\\u0448\\u0430\\u0439\\u0442\\u0435 \\u0443\\u0440\\u043E\\u0432\\u0435\\u043D\\u044C \\u0437\\u043E\\u043D\"}),/*#__PURE__*/_jsx(\"p\",{children:\"\\u041A\\u0430\\u0436\\u0434\\u044B\\u0439 \\u0443\\u0440\\u043E\\u0432\\u0435\\u043D\\u044C \\u0437\\u043E\\u043D\\u044B \\u0443\\u0432\\u0435\\u043B\\u0438\\u0447\\u0438\\u0432\\u0430\\u0435\\u0442 \\u0431\\u0430\\u0437\\u043E\\u0432\\u0443\\u044E \\u044D\\u043D\\u0435\\u0440\\u0433\\u0438\\u044E \\u043E\\u0442 \\u043D\\u0430\\u0436\\u0430\\u0442\\u0438\\u044F\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"tutorial-step\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"step-number\",children:\"4\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"step-content\",children:[/*#__PURE__*/_jsx(\"h4\",{children:\"\\u041E\\u0442\\u043A\\u0440\\u044B\\u0432\\u0430\\u0439\\u0442\\u0435 \\u043D\\u043E\\u0432\\u044B\\u0435 \\u0437\\u043E\\u043D\\u044B\"}),/*#__PURE__*/_jsx(\"p\",{children:\"\\u0420\\u0430\\u0437\\u0432\\u0438\\u0432\\u0430\\u0439\\u0442\\u0435 \\u0437\\u043E\\u043D\\u044B \\u0434\\u043B\\u044F \\u043E\\u0442\\u043A\\u0440\\u044B\\u0442\\u0438\\u044F \\u043D\\u043E\\u0432\\u044B\\u0445 \\u0441 \\u0431\\u043E\\u043B\\u0435\\u0435 \\u0432\\u044B\\u0441\\u043E\\u043A\\u0438\\u043C\\u0438 \\u043C\\u043D\\u043E\\u0436\\u0438\\u0442\\u0435\\u043B\\u044F\\u043C\\u0438\"})]})]})]}),/*#__PURE__*/_jsx(\"button\",{className:\"close-button\",onClick:()=>setShowTutorial(false),children:\"\\u041F\\u043E\\u043D\\u044F\\u0442\\u043D\\u043E\"})]})}),showHistory&&/*#__PURE__*/_jsx(\"div\",{className:\"modal-overlay\",onClick:()=>setShowHistory(false),children:/*#__PURE__*/_jsxs(\"div\",{className:\"modal-content history-modal\",onClick:e=>e.stopPropagation(),children:[/*#__PURE__*/_jsx(\"h3\",{children:\"\\u0418\\u0441\\u0442\\u043E\\u0440\\u0438\\u044F \\u0441\\u0431\\u043E\\u0440\\u0430 \\u044D\\u043D\\u0435\\u0440\\u0433\\u0438\\u0438\"}),energyHistory.length===0?/*#__PURE__*/_jsx(\"p\",{className:\"empty-history\",children:\"\\u0418\\u0441\\u0442\\u043E\\u0440\\u0438\\u044F \\u043F\\u0443\\u0441\\u0442\\u0430\"}):/*#__PURE__*/_jsx(\"div\",{className:\"history-list\",children:energyHistory.map((entry,index)=>/*#__PURE__*/_jsxs(\"div\",{className:\"history-item\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"history-time\",children:formatDate(entry.timestamp)}),/*#__PURE__*/_jsxs(\"div\",{className:\"history-zone\",children:[entry.zone==='crystal'&&/*#__PURE__*/_jsx(FaStar,{className:\"history-icon crystal\"}),entry.zone==='moon'&&/*#__PURE__*/_jsx(FaMoon,{className:\"history-icon moon\"}),entry.zone==='forest'&&/*#__PURE__*/_jsx(FaLeaf,{className:\"history-icon forest\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"history-amount\",children:[\"+\",entry.amount.toFixed(3),\" \\u2726\"]}),entry.combo>1&&/*#__PURE__*/_jsxs(\"div\",{className:\"history-combo\",children:[\"x\",entry.combo]})]},index))}),/*#__PURE__*/_jsx(\"button\",{className:\"close-button\",onClick:()=>setShowHistory(false),children:\"\\u0417\\u0430\\u043A\\u0440\\u044B\\u0442\\u044C\"})]})}),(config===null||config===void 0?void 0:(_config$features2=config.features)===null||_config$features2===void 0?void 0:_config$features2.enableMiniGames)&&showPortalUI&&/*#__PURE__*/_jsx(\"div\",{className:\"modal-overlay\",onClick:()=>{setShowPortalUI(false);setPortalOpen(false);setPortalCharge(0);},children:/*#__PURE__*/_jsxs(\"div\",{className:\"modal-content\",onClick:e=>e.stopPropagation(),children:[/*#__PURE__*/_jsx(\"h3\",{children:\"\\u041F\\u043E\\u0440\\u0442\\u0430\\u043B \\u043E\\u0442\\u043A\\u0440\\u044B\\u0442 \\u2014 \\u0432\\u044B\\u0431\\u0435\\u0440\\u0438 \\u0437\\u0430\\u043D\\u044F\\u0442\\u0438\\u0435\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"portal-actions\",children:[/*#__PURE__*/_jsxs(\"button\",{className:\"action-button\",onClick:()=>{setShowPotionLab(true);setShowPortalUI(false);},children:[/*#__PURE__*/_jsx(GenerativeIcon,{name:\"potion\"}),/*#__PURE__*/_jsx(\"span\",{children:\"\\u0410\\u043B\\u0445\\u0438\\u043C\\u0438\\u044F\"})]}),/*#__PURE__*/_jsxs(\"button\",{className:\"action-button\",onClick:()=>{setShowCrystalMine(true);setShowPortalUI(false);},children:[/*#__PURE__*/_jsx(GenerativeIcon,{name:\"crystal\"}),/*#__PURE__*/_jsx(\"span\",{children:\"\\u0414\\u043E\\u0431\\u044B\\u0447\\u0430 \\u043A\\u0440\\u0438\\u0441\\u0442\\u0430\\u043B\\u043B\\u043E\\u0432\"})]})]}),/*#__PURE__*/_jsx(\"button\",{className:\"close-button\",onClick:()=>{setShowPortalUI(false);setPortalOpen(false);setPortalCharge(0);},children:\"\\u0417\\u0430\\u043A\\u0440\\u044B\\u0442\\u044C\"})]})}),(config===null||config===void 0?void 0:(_config$features3=config.features)===null||_config$features3===void 0?void 0:_config$features3.enableMiniGames)&&showPotionLab&&/*#__PURE__*/_jsx(AlchemyLab,{onClose:()=>{setShowPotionLab(false);setPortalOpen(false);setPortalCharge(0);},onBrew:reward=>{updateBalance(reward,reward*5);},onAddPotion:potion=>{setPotions(prev=>[...prev,potion]);localStorage.setItem('potions',JSON.stringify([...potions,potion]));}}),(config===null||config===void 0?void 0:(_config$features4=config.features)===null||_config$features4===void 0?void 0:_config$features4.enableMiniGames)&&showCrystalMine&&/*#__PURE__*/_jsx(CrystalMine,{onClose:()=>{setShowCrystalMine(false);setPortalOpen(false);setPortalCharge(0);},onMine:reward=>{updateBalance(reward,reward*3);}}),showAdvancedPortal&&/*#__PURE__*/_jsx(\"div\",{onClick:e=>{e.stopPropagation();// –ü—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–∞–µ–º –≤—Å–ø–ª—ã—Ç–∏–µ –∫–ª–∏–∫–æ–≤ –ø–æ –ø–æ—Ä—Ç–∞–ª—É\n},style:{position:'fixed',top:0,left:0,width:'100vw',height:'100vh',zIndex:10000,pointerEvents:'auto'},children:/*#__PURE__*/_jsx(AdvancedPortalManager,{isOpen:showAdvancedPortal,clickPosition:portalClickPosition,onClose:handleAdvancedPortalClose,onComplete:handleAdvancedPortalComplete})}),/*#__PURE__*/_jsx(\"style\",{jsx:true,children:\"\\n        .farm-screen.portal-ready {\\n          position: relative;\\n        }\\n        \\n        @keyframes portalReadyPulse {\\n          0%, 100% { \\n            background: radial-gradient(circle, rgba(168,199,250,0.1) 0%, transparent 70%);\\n            transform: scale(1);\\n          }\\n          50% { \\n            background: radial-gradient(circle, rgba(168,199,250,0.2) 0%, transparent 80%);\\n            transform: scale(1.02);\\n          }\\n        }\\n        \\n        @keyframes portalInstructionFloat {\\n          0%, 100% { \\n            transform: translate(-50%, -50%) translateY(0px);\\n            opacity: 0.8;\\n          }\\n          50% { \\n            transform: translate(-50%, -50%) translateY(-10px);\\n            opacity: 1;\\n          }\\n        }\\n        \\n        .portal-ready-overlay {\\n          border-radius: inherit;\\n        }\\n        \\n        .portal-instruction {\\n          font-family: serif;\\n          font-weight: bold;\\n          letter-spacing: 1px;\\n          user-select: none;\\n        }\\n        \\n        /* \\u041C\\u043E\\u0431\\u0438\\u043B\\u044C\\u043D\\u0430\\u044F \\u0430\\u0434\\u0430\\u043F\\u0442\\u0430\\u0446\\u0438\\u044F \\u0434\\u043B\\u044F \\u043F\\u043E\\u0440\\u0442\\u0430\\u043B\\u044C\\u043D\\u044B\\u0445 \\u0438\\u043D\\u0441\\u0442\\u0440\\u0443\\u043A\\u0446\\u0438\\u0439 */\\n        @media (max-width: 768px) {\\n          .portal-instruction {\\n            font-size: 16px !important;\\n          }\\n          \\n          .portal-instruction div:first-child {\\n            font-size: 20px !important;\\n          }\\n          \\n          .portal-instruction div:last-child {\\n            font-size: 12px !important;\\n          }\\n        }\\n        \\n        /* \\u0412\\u044B\\u0441\\u043E\\u043A\\u0438\\u0439 \\u043A\\u043E\\u043D\\u0442\\u0440\\u0430\\u0441\\u0442 */\\n        @media (prefers-color-scheme: dark) {\\n          .portal-ready-overlay {\\n            background: radial-gradient(circle, rgba(255,255,255,0.1) 0%, transparent 70%) !important;\\n          }\\n        }\\n        \\n        /* \\u0423\\u043C\\u0435\\u043D\\u044C\\u0448\\u0435\\u043D\\u043D\\u0430\\u044F \\u0430\\u043D\\u0438\\u043C\\u0430\\u0446\\u0438\\u044F */\\n        @media (prefers-reduced-motion: reduce) {\\n          .portal-ready-overlay,\\n          .portal-instruction {\\n            animation: none !important;\\n          }\\n          \\n          .farm-screen.portal-ready {\\n            outline: 2px dashed rgba(168,199,250,0.5);\\n          }\\n        }\\n      \"})]});};export default FarmScreen;","map":{"version":3,"names":["React","useState","useEffect","useRef","useCallback","FaLeaf","FaMoon","FaStar","FaInfoCircle","FaHistory","anime","BalanceButton","config","PortalReveal","AdvancedPortalManager","AlchemyLab","CrystalMine","GenerativeIcon","RuneProgress","jsx","_jsx","jsxs","_jsxs","COLOR_PALETTE","darkPurple","beigeParchment","darkTurquoise","inkyBlue","moonBlue","FarmScreen","_ref","_config$features2","_config$features3","_config$features4","balance","updateBalance","farmStats","setFarmStats","totalClicks","maxCombo","todayEarned","lastDate","Date","toDateString","comboCount","setComboCount","comboMultiplier","setComboMultiplier","showTutorial","setShowTutorial","showHistory","setShowHistory","energyHistory","setEnergyHistory","activeZone","setActiveZone","zoneStats","setZoneStats","crystal","level","totalEnergy","multiplier","moon","unlocked","forest","energyParticles","setEnergyParticles","portalCharge","setPortalCharge","portalOpen","setPortalOpen","showPortalUI","setShowPortalUI","showPotionLab","setShowPotionLab","showCrystalMine","setShowCrystalMine","potions","setPotions","crystalAttempts","setCrystalAttempts","enableCinematicPortals","artifacts","setArtifacts","showAdvancedPortal","setShowAdvancedPortal","portalClickPosition","setPortalClickPosition","containerRef","particlesRef","comboTimerRef","clickAreaRef","decayTimerRef","savedStats","JSON","parse","localStorage","getItem","today","savedZoneStats","savedHistory","savedPotions","savedArtifacts","createBackgroundParticles","current","setInterval","prev","next","Math","max","clearTimeout","clearInterval","forEach","particle","parentNode","removeChild","container","particles","i","document","createElement","className","size","random","posX","posY","delay","duration","color","Object","assign","style","position","width","concat","height","borderRadius","backgroundColor","opacity","top","left","boxShadow","zIndex","pointerEvents","appendChild","push","targets","translateY","translateX","scale","easing","loop","handleEnergyTap","amount","_config$features","activeZoneStats","baseEnergy","newStats","_objectSpread","parseFloat","toFixed","setItem","stringify","newZoneStats","currentLevel","requiredEnergy","historyEntry","timestamp","toISOString","zone","combo","newHistory","slice","features","enablePortalMechanic","increment","min","updateMaxCombo","getZoneIcon","getZoneName","getZoneDescription","getZoneColor","formatDate","dateString","date","getHours","toString","padStart","getMinutes","handlePortalEnergyReward","reward","type","handlePortalAddPotion","potion","enhancedPotion","now","fromPortal","newPotions","handlePortalAddArtifact","artifact","enhancedArtifact","newArtifacts","energyBonus","handleScreenClick","event","target","closest","console","log","preventDefault","stopPropagation","x","clientX","y","clientY","window","dispatchEvent","CustomEvent","detail","source","handleAdvancedPortalComplete","result","name","setTimeout","handleAdvancedPortalClose","ref","onClick","cursor","children","right","bottom","background","animation","transform","textAlign","fontSize","textShadow","marginBottom","marginTop","process","env","NODE_ENV","padding","fontFamily","round","onTap","onComboChange","progress","length","alert","map","p","join","a","e","entry","index","enableMiniGames","onClose","onBrew","onAddPotion","onMine","isOpen","clickPosition","onComplete"],"sources":["/var/www/www-root/data/www/knigavl.ru/src/screens/FarmScreen.js"],"sourcesContent":["// src/screens/FarmScreen.js - –ú–∏—Å—Ç–∏—á–µ—Å–∫–∞—è –≤–µ—Ä—Å–∏—è\r\nimport React, { useState, useEffect, useRef, useCallback } from 'react';\r\nimport { FaLeaf, FaMoon, FaStar, FaInfoCircle, FaHistory } from 'react-icons/fa';\r\nimport anime from 'animejs/lib/anime.js';\r\nimport BalanceButton from '../components/BalanceButton';\r\nimport './FarmScreen.css';\r\nimport config from '../config';\r\nimport PortalReveal from '../components/PortalReveal';\r\nimport AdvancedPortalManager from '../components/AdvancedPortalManager';\r\nimport AlchemyLab from './mini/AlchemyLab';\r\nimport CrystalMine from './mini/CrystalMine';\r\nimport GenerativeIcon from '../components/GenerativeIcon';\r\nimport RuneProgress from '../components/RuneProgress';\r\n\r\n// –¶–≤–µ—Ç–æ–≤–∞—è –ø–∞–ª–∏—Ç—Ä–∞ –∏–∑ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏–π\r\nconst COLOR_PALETTE = {\r\n  darkPurple: '#3C2F4F',    // –¢—ë–º–Ω–æ-—Ñ–∏–æ–ª–µ—Ç–æ–≤—ã–π ‚Äî –æ—Å–Ω–æ–≤–Ω–æ–π —Ñ–æ–Ω\r\n  beigeParchment: '#E8D3A9', // –ë–µ–∂–µ–≤–æ-–ø–µ—Ä–≥–∞–º–µ–Ω—Ç–Ω—ã–π ‚Äî —Ç–µ–∫—Å—Ç, –∞–∫—Ü–µ–Ω—Ç—ã\r\n  darkTurquoise: '#1A3C34',  // –¢—ë–º–Ω—ã–π –±–∏—Ä—é–∑–æ–≤—ã–π ‚Äî —Å–≤–µ—Ç–ª—è—á–∫–∏, —Å–≤–µ—á–µ–Ω–∏–µ\r\n  inkyBlue: '#1B263B',       // –ß–µ—Ä–Ω–∏–ª—å–Ω—ã–π —Å–∏–Ω–∏–π ‚Äî —Ç–µ–Ω–∏, –∫–æ–Ω—Ç—É—Ä—ã\r\n  moonBlue: '#A8C7FA',       // –ì–æ–ª—É–±–æ–≤–∞—Ç—ã–π –æ—Ç—Ç–µ–Ω–æ–∫ –ª—É–Ω—ã\r\n};\r\n\r\nconst FarmScreen = ({ balance, updateBalance }) => {\r\n  // –°–æ—Å—Ç–æ—è–Ω–∏—è\r\n  const [farmStats, setFarmStats] = useState({\r\n    totalClicks: 0,\r\n    maxCombo: 0,\r\n    todayEarned: 0,\r\n    lastDate: new Date().toDateString()\r\n  });\r\n  const [comboCount, setComboCount] = useState(0);\r\n  const [comboMultiplier, setComboMultiplier] = useState(1);\r\n  const [showTutorial, setShowTutorial] = useState(false);\r\n  const [showHistory, setShowHistory] = useState(false);\r\n  const [energyHistory, setEnergyHistory] = useState([]);\r\n  const [activeZone, setActiveZone] = useState('crystal'); // 'crystal', 'moon', 'forest'\r\n  const [zoneStats, setZoneStats] = useState({\r\n    crystal: { level: 1, totalEnergy: 0, multiplier: 1 },\r\n    moon: { level: 1, totalEnergy: 0, multiplier: 1.5, unlocked: false },\r\n    forest: { level: 1, totalEnergy: 0, multiplier: 2, unlocked: false }\r\n  });\r\n  const [energyParticles, setEnergyParticles] = useState([]);\r\n  const [portalCharge, setPortalCharge] = useState(0); // 0..1 –ø—Ä–æ–≥—Ä–µ—Å—Å –æ—Ç–∫—Ä—ã—Ç–∏—è –ø–æ—Ä—Ç–∞–ª–∞\r\n  const [portalOpen, setPortalOpen] = useState(false);\r\n  const [showPortalUI, setShowPortalUI] = useState(false);\r\n  const [showPotionLab, setShowPotionLab] = useState(false);\r\n  const [showCrystalMine, setShowCrystalMine] = useState(false);\r\n  const [potions, setPotions] = useState([]);\r\n  const [crystalAttempts, setCrystalAttempts] = useState(3);\r\n  const [enableCinematicPortals] = useState(true); // –í—Å–µ–≥–¥–∞ –≤–∫–ª—é—á–µ–Ω\r\n  const [artifacts, setArtifacts] = useState([]);\r\n  const [showAdvancedPortal, setShowAdvancedPortal] = useState(false);\r\n  const [portalClickPosition, setPortalClickPosition] = useState(null);\r\n  \r\n  // Refs\r\n  const containerRef = useRef(null);\r\n  const particlesRef = useRef([]);\r\n  const comboTimerRef = useRef(null);\r\n  const clickAreaRef = useRef(null);\r\n  const decayTimerRef = useRef(null);\r\n  \r\n  // –ó–∞–≥—Ä—É–∑–∫–∞ –¥–∞–Ω–Ω—ã—Ö –ø—Ä–∏ –º–æ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∏–∏\r\n  useEffect(() => {\r\n    // –ó–∞–≥—Ä—É–∂–∞–µ–º —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É —Ñ–µ—Ä–º—ã\r\n    const savedStats = JSON.parse(localStorage.getItem('farmStats')) || {\r\n      totalClicks: 0,\r\n      maxCombo: 0,\r\n      todayEarned: 0,\r\n      lastDate: new Date().toDateString()\r\n    };\r\n    \r\n    // –°–±—Ä–∞—Å—ã–≤–∞–µ–º –¥–Ω–µ–≤–Ω–æ–π –∑–∞—Ä–∞–±–æ—Ç–æ–∫, –µ—Å–ª–∏ —ç—Ç–æ –Ω–æ–≤—ã–π –¥–µ–Ω—å\r\n    const today = new Date().toDateString();\r\n    if (savedStats.lastDate !== today) {\r\n      savedStats.todayEarned = 0;\r\n      savedStats.lastDate = today;\r\n    }\r\n    \r\n    setFarmStats(savedStats);\r\n    \r\n    // –ó–∞–≥—Ä—É–∂–∞–µ–º —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É –∑–æ–Ω\r\n    const savedZoneStats = JSON.parse(localStorage.getItem('zoneStats')) || {\r\n      crystal: { level: 1, totalEnergy: 0, multiplier: 1 },\r\n      moon: { level: 1, totalEnergy: 0, multiplier: 1.5, unlocked: false },\r\n      forest: { level: 1, totalEnergy: 0, multiplier: 2, unlocked: false }\r\n    };\r\n    \r\n    setZoneStats(savedZoneStats);\r\n    \r\n    // –ó–∞–≥—Ä—É–∂–∞–µ–º –∏—Å—Ç–æ—Ä–∏—é —Å–±–æ—Ä–∞ —ç–Ω–µ—Ä–≥–∏–∏\r\n    const savedHistory = JSON.parse(localStorage.getItem('energyHistory')) || [];\r\n    setEnergyHistory(savedHistory);\r\n    \r\n    // –ó–∞–≥—Ä—É–∂–∞–µ–º –∑–µ–ª—å—è\r\n    const savedPotions = JSON.parse(localStorage.getItem('potions')) || [];\r\n    setPotions(savedPotions);\r\n    \r\n    // –ó–∞–≥—Ä—É–∂–∞–µ–º –∞—Ä—Ç–µ—Ñ–∞–∫—Ç—ã\r\n    const savedArtifacts = JSON.parse(localStorage.getItem('artifacts')) || [];\r\n    setArtifacts(savedArtifacts);\r\n    \r\n    // –°–æ–∑–¥–∞–µ–º —Ñ–æ–Ω–æ–≤—ã–µ —á–∞—Å—Ç–∏—Ü—ã\r\n    createBackgroundParticles();\r\n\r\n    // –ó–∞–ø—É—Å–∫–∞–µ–º –ø–ª–∞–≤–Ω—ã–π —Å–ø–∞–¥ –∑–∞—Ä—è–¥–∫–∏ –ø–æ—Ä—Ç–∞–ª–∞\r\n    if (!decayTimerRef.current) {\r\n      decayTimerRef.current = setInterval(() => {\r\n        setPortalCharge(prev => {\r\n          if (portalOpen || showPortalUI || showPotionLab || showCrystalMine) return prev;\r\n          const next = Math.max(0, prev - 0.002); // –ú–µ–¥–ª–µ–Ω–Ω–µ–µ —Å–ø–∞–¥–∞–µ—Ç\r\n          return next;\r\n        });\r\n      }, 200); // –†–µ–∂–µ –ø—Ä–æ–≤–µ—Ä—è–µ–º\r\n    }\r\n    \r\n    // –û—á–∏—Å—Ç–∫–∞ –ø—Ä–∏ —Ä–∞–∑–º–æ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∏–∏\r\n    return () => {\r\n      if (comboTimerRef.current) {\r\n        clearTimeout(comboTimerRef.current);\r\n      }\r\n      if (decayTimerRef.current) {\r\n        clearInterval(decayTimerRef.current);\r\n        decayTimerRef.current = null;\r\n      }\r\n      \r\n      particlesRef.current.forEach(particle => {\r\n        if (particle.parentNode) {\r\n          particle.parentNode.removeChild(particle);\r\n        }\r\n      });\r\n    };\r\n  }, []);\r\n  \r\n  // –°–æ–∑–¥–∞–Ω–∏–µ —Ñ–æ–Ω–æ–≤—ã—Ö —á–∞—Å—Ç–∏—Ü\r\n  const createBackgroundParticles = () => {\r\n    if (!containerRef.current) return;\r\n    \r\n    const container = containerRef.current;\r\n    const particles = [];\r\n    \r\n    // –£–¥–∞–ª—è–µ–º —Å—Ç–∞—Ä—ã–µ —á–∞—Å—Ç–∏—Ü—ã\r\n    particlesRef.current.forEach(particle => {\r\n      if (particle.parentNode) {\r\n        particle.parentNode.removeChild(particle);\r\n      }\r\n    });\r\n    \r\n    // –°–æ–∑–¥–∞–µ–º –Ω–æ–≤—ã–µ —á–∞—Å—Ç–∏—Ü—ã\r\n    for (let i = 0; i < 20; i++) {\r\n      const particle = document.createElement('div');\r\n      particle.className = 'mystical-particle';\r\n      \r\n      // –°–ª—É—á–∞–π–Ω—ã–π —Ä–∞–∑–º–µ—Ä –∏ –ø–æ–∑–∏—Ü–∏—è\r\n      const size = 2 + Math.random() * 4;\r\n      const posX = Math.random() * 100;\r\n      const posY = Math.random() * 100;\r\n      const delay = Math.random() * 5;\r\n      const duration = 10 + Math.random() * 20;\r\n      const color = Math.random() > 0.5 ? COLOR_PALETTE.beigeParchment : COLOR_PALETTE.moonBlue;\r\n      \r\n      // –°—Ç–∏–ª–∏ —á–∞—Å—Ç–∏—Ü—ã\r\n      Object.assign(particle.style, {\r\n        position: 'absolute',\r\n        width: `${size}px`,\r\n        height: `${size}px`,\r\n        borderRadius: '50%',\r\n        backgroundColor: color,\r\n        opacity: 0,\r\n        top: `${posY}%`,\r\n        left: `${posX}%`,\r\n        boxShadow: `0 0 ${size * 2}px ${color}`,\r\n        zIndex: -1,\r\n        pointerEvents: 'none'\r\n      });\r\n      \r\n      // –î–æ–±–∞–≤–ª—è–µ–º —á–∞—Å—Ç–∏—Ü—É –≤ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä\r\n      container.appendChild(particle);\r\n      particles.push(particle);\r\n      \r\n      // –ê–Ω–∏–º–∏—Ä—É–µ–º —á–∞—Å—Ç–∏—Ü—É\r\n      anime({\r\n        targets: particle,\r\n        opacity: [0, 0.3, 0],\r\n        translateY: [0, -100],\r\n        translateX: () => [0, (Math.random() - 0.5) * 50],\r\n        scale: [1, 0.5, 0],\r\n        easing: 'easeInOutQuad',\r\n        duration: duration * 1000,\r\n        delay: delay * 1000,\r\n        loop: true\r\n      });\r\n    }\r\n    \r\n    particlesRef.current = particles;\r\n  };\r\n  \r\n  // –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –Ω–∞–∂–∞—Ç–∏—è –Ω–∞ –æ–±–ª–∞—Å—Ç—å —Å–±–æ—Ä–∞ —ç–Ω–µ—Ä–≥–∏–∏\r\n  const handleEnergyTap = (amount) => {\r\n    // –†–∞—Å—Å—á–∏—Ç—ã–≤–∞–µ–º –±–∞–∑–æ–≤—É—é —ç–Ω–µ—Ä–≥–∏—é –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç –∞–∫—Ç–∏–≤–Ω–æ–π –∑–æ–Ω—ã\r\n    const activeZoneStats = zoneStats[activeZone];\r\n    const baseEnergy = amount * activeZoneStats.multiplier * activeZoneStats.level;\r\n    \r\n    // –û–±–Ω–æ–≤–ª—è–µ–º —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É —Ñ–µ—Ä–º—ã\r\n    const newStats = {\r\n      ...farmStats,\r\n      totalClicks: farmStats.totalClicks + 1,\r\n      todayEarned: parseFloat((farmStats.todayEarned + baseEnergy).toFixed(3)),\r\n      lastDate: new Date().toDateString()\r\n    };\r\n    \r\n    setFarmStats(newStats);\r\n    localStorage.setItem('farmStats', JSON.stringify(newStats));\r\n    \r\n    // –û–±–Ω–æ–≤–ª—è–µ–º —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É –∑–æ–Ω—ã\r\n    const newZoneStats = { ...zoneStats };\r\n    newZoneStats[activeZone].totalEnergy += baseEnergy;\r\n    \r\n    // –ü—Ä–æ–≤–µ—Ä—è–µ–º, –º–æ–∂–Ω–æ –ª–∏ –ø–æ–≤—ã—Å–∏—Ç—å —É—Ä–æ–≤–µ–Ω—å –∑–æ–Ω—ã\r\n    const currentLevel = newZoneStats[activeZone].level;\r\n    const requiredEnergy = currentLevel * 50; // 50, 100, 150, ...\r\n    \r\n    if (newZoneStats[activeZone].totalEnergy >= requiredEnergy) {\r\n      newZoneStats[activeZone].level += 1;\r\n      \r\n      // –ê–Ω–∏–º–∞—Ü–∏—è –ø–æ–≤—ã—à–µ–Ω–∏—è —É—Ä–æ–≤–Ω—è\r\n      anime({\r\n        targets: '.zone-level',\r\n        scale: [1, 1.5, 1],\r\n        opacity: [1, 0.5, 1],\r\n        duration: 1000,\r\n        easing: 'easeInOutQuad'\r\n      });\r\n    }\r\n    \r\n    // –ü—Ä–æ–≤–µ—Ä—è–µ–º, –º–æ–∂–Ω–æ –ª–∏ —Ä–∞–∑–±–ª–æ–∫–∏—Ä–æ–≤–∞—Ç—å –Ω–æ–≤—ã–µ –∑–æ–Ω—ã\r\n    if (!newZoneStats.moon.unlocked && newZoneStats.crystal.level >= 5) {\r\n      newZoneStats.moon.unlocked = true;\r\n      \r\n      // –ê–Ω–∏–º–∞—Ü–∏—è —Ä–∞–∑–±–ª–æ–∫–∏—Ä–æ–≤–∫–∏\r\n      anime({\r\n        targets: '.zone-selector',\r\n        scale: [1, 1.1, 1],\r\n        duration: 1000,\r\n        easing: 'easeInOutQuad'\r\n      });\r\n    }\r\n    \r\n    if (!newZoneStats.forest.unlocked && newZoneStats.moon.level >= 5) {\r\n      newZoneStats.forest.unlocked = true;\r\n      \r\n      // –ê–Ω–∏–º–∞—Ü–∏—è —Ä–∞–∑–±–ª–æ–∫–∏—Ä–æ–≤–∫–∏\r\n      anime({\r\n        targets: '.zone-selector',\r\n        scale: [1, 1.1, 1],\r\n        duration: 1000,\r\n        easing: 'easeInOutQuad'\r\n      });\r\n    }\r\n    \r\n    setZoneStats(newZoneStats);\r\n    localStorage.setItem('zoneStats', JSON.stringify(newZoneStats));\r\n    \r\n    // –î–æ–±–∞–≤–ª—è–µ–º –∑–∞–ø–∏—Å—å –≤ –∏—Å—Ç–æ—Ä–∏—é\r\n    const historyEntry = {\r\n      timestamp: new Date().toISOString(),\r\n      amount: baseEnergy,\r\n      zone: activeZone,\r\n      combo: comboMultiplier\r\n    };\r\n    \r\n    const newHistory = [historyEntry, ...energyHistory.slice(0, 19)]; // –•—Ä–∞–Ω–∏–º —Ç–æ–ª—å–∫–æ 20 –ø–æ—Å–ª–µ–¥–Ω–∏—Ö –∑–∞–ø–∏—Å–µ–π\r\n    setEnergyHistory(newHistory);\r\n    localStorage.setItem('energyHistory', JSON.stringify(newHistory));\r\n    \r\n    // –û–±–Ω–æ–≤–ª—è–µ–º –±–∞–ª–∞–Ω—Å\r\n    updateBalance(baseEnergy, baseEnergy * 0.1); // 10% —ç–Ω–µ—Ä–≥–∏–∏ –∏–¥–µ—Ç –Ω–∞ –æ–ø—ã—Ç\r\n\r\n    // –ó–∞—Ä—è–¥ –ø–æ—Ä—Ç–∞–ª–∞ (–ø–æ –∫–ª–∏–∫—É –ø–æ—Å—Ç–µ–ø–µ–Ω–Ω–æ –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç—Å—è –Ω–æ–≤–æ–µ –ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–æ)\r\n    if (config?.features?.enablePortalMechanic) {\r\n      const increment = 0.08; // –§–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –±—ã—Å—Ç—Ä—ã–π –∑–∞—Ä—è–¥ - –ø–æ—Ä—Ç–∞–ª –æ—Ç–∫—Ä–æ–µ—Ç—Å—è –∑–∞ ~12 –∫–ª–∏–∫–æ–≤\r\n      setPortalCharge(prev => {\r\n        const next = Math.min(1, prev + increment);\r\n        // –¢—Ä–∏–≥–≥–µ—Ä –æ—Ç–∫—Ä—ã—Ç–∏—è –ø–æ—Ä—Ç–∞–ª–∞ –ø—Ä–∏ –ø–æ–ª–Ω–æ–º –∑–∞—Ä—è–¥–µ\r\n        if (next >= 1 && !portalOpen) {\r\n          setPortalOpen(true);\r\n          // –ù–µ–±–æ–ª—å—à–æ–π –≤–∏–∑—É–∞–ª—å–Ω—ã–π –∏–º–ø—É–ª—å—Å –∑–∞–≥–æ–ª–æ–≤–∫–∞\r\n          anime({ targets: '.farm-header', scale: [1, 1.03, 1], duration: 600, easing: 'easeOutQuad' });\r\n        }\r\n        return next;\r\n      });\r\n    }\r\n  };\r\n  \r\n  // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–≥–æ –∫–æ–º–±–æ\r\n  const updateMaxCombo = (combo) => {\r\n    setComboCount(combo);\r\n    \r\n    if (combo >= 10) {\r\n      setComboMultiplier(3);\r\n    } else if (combo >= 5) {\r\n      setComboMultiplier(2);\r\n    } else {\r\n      setComboMultiplier(1);\r\n    }\r\n    \r\n    if (combo > farmStats.maxCombo) {\r\n      const newStats = {\r\n        ...farmStats,\r\n        maxCombo: combo\r\n      };\r\n      setFarmStats(newStats);\r\n      localStorage.setItem('farmStats', JSON.stringify(newStats));\r\n    }\r\n  };\r\n  \r\n  // –ü–æ–ª—É—á–µ–Ω–∏–µ –∏–∫–æ–Ω–∫–∏ –¥–ª—è –∞–∫—Ç–∏–≤–Ω–æ–π –∑–æ–Ω—ã\r\n  const getZoneIcon = () => {\r\n    switch (activeZone) {\r\n      case 'moon':\r\n        return <FaMoon className=\"zone-icon moon\" />;\r\n      case 'forest':\r\n        return <FaLeaf className=\"zone-icon forest\" />;\r\n      default:\r\n        return <FaStar className=\"zone-icon crystal\" />;\r\n    }\r\n  };\r\n  \r\n  // –ü–æ–ª—É—á–µ–Ω–∏–µ –Ω–∞–∑–≤–∞–Ω–∏—è –¥–ª—è –∞–∫—Ç–∏–≤–Ω–æ–π –∑–æ–Ω—ã\r\n  const getZoneName = () => {\r\n    switch (activeZone) {\r\n      case 'moon':\r\n        return '–õ—É–Ω–Ω–∞—è –ø–æ–ª—è–Ω–∞';\r\n      case 'forest':\r\n        return '–ú–∏—Å—Ç–∏—á–µ—Å–∫–∏–π –ª–µ—Å';\r\n      default:\r\n        return '–ö—Ä–∏—Å—Ç–∞–ª—å–Ω–∞—è –ø–µ—â–µ—Ä–∞';\r\n    }\r\n  };\r\n  \r\n  // –ü–æ–ª—É—á–µ–Ω–∏–µ –æ–ø–∏—Å–∞–Ω–∏—è –¥–ª—è –∞–∫—Ç–∏–≤–Ω–æ–π –∑–æ–Ω—ã\r\n  const getZoneDescription = () => {\r\n    switch (activeZone) {\r\n      case 'moon':\r\n        return '–≠–Ω–µ—Ä–≥–∏—è –ª—É–Ω–Ω–æ–≥–æ —Å–≤–µ—Ç–∞ —É—Å–∏–ª–∏–≤–∞–µ—Ç –≤–∞—à–∏ —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏. –ë–∞–∑–æ–≤—ã–π –º–Ω–æ–∂–∏—Ç–µ–ª—å: x1.5';\r\n      case 'forest':\r\n        return '–î—Ä–µ–≤–Ω—è—è —ç–Ω–µ—Ä–≥–∏—è –ª–µ—Å–∞ —Ç–µ—á–µ—Ç —Å–∫–≤–æ–∑—å –≤–∞—Å. –ë–∞–∑–æ–≤—ã–π –º–Ω–æ–∂–∏—Ç–µ–ª—å: x2';\r\n      default:\r\n        return '–ö—Ä–∏—Å—Ç–∞–ª–ª—ã —Ä–µ–∑–æ–Ω–∏—Ä—É—é—Ç —Å –≤–∞—à–µ–π —ç–Ω–µ—Ä–≥–∏–µ–π. –ë–∞–∑–æ–≤—ã–π –º–Ω–æ–∂–∏—Ç–µ–ª—å: x1';\r\n    }\r\n  };\r\n  \r\n  // –ü–æ–ª—É—á–µ–Ω–∏–µ —Ü–≤–µ—Ç–∞ –¥–ª—è –∞–∫—Ç–∏–≤–Ω–æ–π –∑–æ–Ω—ã\r\n  const getZoneColor = () => {\r\n    switch (activeZone) {\r\n      case 'moon':\r\n        return COLOR_PALETTE.moonBlue;\r\n      case 'forest':\r\n        return COLOR_PALETTE.darkTurquoise;\r\n      default:\r\n        return COLOR_PALETTE.beigeParchment;\r\n    }\r\n  };\r\n  \r\n  // –§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–∞—Ç—ã –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –≤ –∏—Å—Ç–æ—Ä–∏–∏\r\n  const formatDate = (dateString) => {\r\n    const date = new Date(dateString);\r\n    return `${date.getHours().toString().padStart(2, '0')}:${date.getMinutes().toString().padStart(2, '0')}`;\r\n  };\r\n\r\n  // –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –¥–ª—è –ø–æ—Ä—Ç–∞–ª—å–Ω–æ–π —Å–∏—Å—Ç–µ–º—ã\r\n  const handlePortalEnergyReward = (reward) => {\r\n    updateBalance(reward, reward * 0.2); // 20% –æ–ø—ã—Ç–∞ –æ—Ç –ø–æ—Ä—Ç–∞–ª—å–Ω—ã—Ö –Ω–∞–≥—Ä–∞–¥\r\n    \r\n    // –î–æ–±–∞–≤–ª—è–µ–º –∑–∞–ø–∏—Å—å –≤ –∏—Å—Ç–æ—Ä–∏—é –∫–∞–∫ –ø–æ—Ä—Ç–∞–ª—å–Ω—É—é –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å\r\n    const historyEntry = {\r\n      timestamp: new Date().toISOString(),\r\n      amount: reward,\r\n      zone: 'portal',\r\n      combo: 1,\r\n      type: 'portal_energy'\r\n    };\r\n    \r\n    const newHistory = [historyEntry, ...energyHistory.slice(0, 19)];\r\n    setEnergyHistory(newHistory);\r\n    localStorage.setItem('energyHistory', JSON.stringify(newHistory));\r\n  };\r\n\r\n  const handlePortalAddPotion = (potion) => {\r\n    const enhancedPotion = {\r\n      ...potion,\r\n      timestamp: Date.now(),\r\n      fromPortal: true\r\n    };\r\n    \r\n    const newPotions = [...potions, enhancedPotion];\r\n    setPotions(newPotions);\r\n    localStorage.setItem('potions', JSON.stringify(newPotions));\r\n    \r\n    // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –æ –ø–æ–ª—É—á–µ–Ω–∏–∏ –∑–µ–ª—å—è\r\n    anime({\r\n      targets: '.farm-actions',\r\n      scale: [1, 1.1, 1],\r\n      duration: 600,\r\n      easing: 'easeOutQuad'\r\n    });\r\n  };\r\n\r\n  const handlePortalAddArtifact = (artifact) => {\r\n    const enhancedArtifact = {\r\n      ...artifact,\r\n      timestamp: Date.now(),\r\n      fromPortal: true\r\n    };\r\n    \r\n    const newArtifacts = [...artifacts, enhancedArtifact];\r\n    setArtifacts(newArtifacts);\r\n    localStorage.setItem('artifacts', JSON.stringify(newArtifacts));\r\n    \r\n    // –ü–æ—Ä—Ç–∞–ª—å–Ω—ã–µ –∞—Ä—Ç–µ—Ñ–∞–∫—Ç—ã –¥–∞—é—Ç –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—É—é —ç–Ω–µ—Ä–≥–∏—é\r\n    if (artifact.energyBonus) {\r\n      updateBalance(artifact.energyBonus, 0);\r\n    }\r\n  };\r\n\r\n  // –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –∫–ª–∏–∫–∞ –ø–æ —ç–∫—Ä–∞–Ω—É –¥–ª—è –æ—Ç–∫—Ä—ã—Ç–∏—è –ø–æ—Ä—Ç–∞–ª–∞\r\n  const handleScreenClick = useCallback((event) => {\r\n    // –ü—Ä–æ–≤–µ—Ä—è–µ–º, —á—Ç–æ –∫–ª–∏–∫ –Ω–µ –ø–æ –∫–Ω–æ–ø–∫–∞–º –∏–ª–∏ –¥—Ä—É–≥–∏–º —ç–ª–µ–º–µ–Ω—Ç–∞–º —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è\r\n    if (event.target.closest('button') || \r\n        event.target.closest('.action-button') ||\r\n        event.target.closest('.zone-selector') ||\r\n        event.target.closest('.modal-overlay') ||\r\n        event.target.closest('.large-button-container') ||\r\n        event.target.closest('.tutorial-button') ||\r\n        event.target.closest('.balance-button')) {\r\n      return;\r\n    }\r\n\r\n    // –ü—Ä–æ–≤–µ—Ä—è–µ–º, –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –ª–∏ –∑–∞—Ä—è–¥–∞ –ø–æ—Ä—Ç–∞–ª–∞ –∏ –≤–∫–ª—é—á–µ–Ω—ã –ª–∏ –∫–∏–Ω–µ–º–∞—Ç–æ–≥—Ä–∞—Ñ–∏—á–µ—Å–∫–∏–µ –ø–æ—Ä—Ç–∞–ª—ã\r\n    if (enableCinematicPortals && portalCharge >= 0.8 && !showAdvancedPortal) {\r\n      console.log('üåÄ –û—Ç–∫—Ä—ã—Ç–∏–µ –ø–æ—Ä—Ç–∞–ª–∞...');\r\n      \r\n      // –ü—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–∞–µ–º –≤—Å–ø–ª—ã—Ç–∏–µ —Å–æ–±—ã—Ç–∏—è\r\n      event.preventDefault();\r\n      event.stopPropagation();\r\n      \r\n      // –ü–æ–ª—É—á–∞–µ–º –∞–±—Å–æ–ª—é—Ç–Ω—ã–µ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã –∫–ª–∏–∫–∞\r\n      const x = event.clientX;\r\n      const y = event.clientY;\r\n      \r\n      setPortalClickPosition({ x, y });\r\n      setShowAdvancedPortal(true);\r\n      \r\n      // –°–±—Ä–∞—Å—ã–≤–∞–µ–º –∑–∞—Ä—è–¥ –ø–æ—Ä—Ç–∞–ª–∞\r\n      setPortalCharge(0);\r\n      setPortalOpen(false);\r\n      \r\n      // –í–æ—Å–ø—Ä–æ–∏–∑–≤–æ–¥–∏–º —Å–æ–±—ã—Ç–∏–µ –æ—Ç–∫—Ä—ã—Ç–∏—è –ø–æ—Ä—Ç–∞–ª–∞\r\n      window.dispatchEvent(new CustomEvent('portal-opened', { \r\n        detail: { x, y, source: 'FarmScreen' } \r\n      }));\r\n    }\r\n  }, [enableCinematicPortals, portalCharge, showAdvancedPortal]);\r\n\r\n  // –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è –∫–∏–Ω–µ–º–∞—Ç–æ–≥—Ä–∞—Ñ–∏—á–µ—Å–∫–æ–≥–æ –ø–æ—Ä—Ç–∞–ª–∞\r\n  const handleAdvancedPortalComplete = useCallback((result) => {\r\n    if (result) {\r\n      switch (result.type) {\r\n        case 'brew':\r\n          handlePortalEnergyReward(result.reward);\r\n          if (result.potion) {\r\n            handlePortalAddPotion(result.potion);\r\n          }\r\n          console.log('‚ú® –ê–ª—Ö–∏–º–∏—è –∑–∞–≤–µ—Ä—à–µ–Ω–∞! –ù–∞–≥—Ä–∞–¥–∞:', result.reward);\r\n          break;\r\n        case 'potion':\r\n          handlePortalAddPotion(result.potion);\r\n          console.log('üß™ –ü–æ–ª—É—á–µ–Ω–æ –∑–µ–ª—å–µ:', result.potion.name);\r\n          break;\r\n        case 'crystal':\r\n          handlePortalEnergyReward(result.reward);\r\n          if (result.artifact) {\r\n            handlePortalAddArtifact(result.artifact);\r\n          }\r\n          console.log('üíé –ù–∞–π–¥–µ–Ω –∫—Ä–∏—Å—Ç–∞–ª–ª! –ù–∞–≥—Ä–∞–¥–∞:', result.reward);\r\n          break;\r\n        default:\r\n          handlePortalEnergyReward(0.05);\r\n      }\r\n      \r\n      // –ó–∞–∫—Ä—ã–≤–∞–µ–º –ø–æ—Ä—Ç–∞–ª —Ç–æ–ª—å–∫–æ –ø–æ—Å–ª–µ —Ä–µ–∞–ª—å–Ω–æ–≥–æ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏\r\n      setTimeout(() => {\r\n        setShowAdvancedPortal(false);\r\n        setPortalClickPosition(null);\r\n      }, 1000); // –î–∞–µ–º –±–æ–ª—å—à–µ –≤—Ä–µ–º–µ–Ω–∏ –Ω–∞ –∑–∞–≤–µ—Ä—à–µ–Ω–∏–µ –∞–Ω–∏–º–∞—Ü–∏–∏\r\n    }\r\n    // –ï—Å–ª–∏ result –ø—É—Å—Ç–æ–π - –ù–ï –∑–∞–∫—Ä—ã–≤–∞–µ–º –ø–æ—Ä—Ç–∞–ª (—ç—Ç–æ –±—ã–ª –ø—Ä–æ—Å—Ç–æ –≤—ã–∑–æ–≤ –æ—Ç–∫—Ä—ã—Ç–∏—è)\r\n  }, [handlePortalEnergyReward, handlePortalAddPotion, handlePortalAddArtifact]);\r\n\r\n  // –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –∑–∞–∫—Ä—ã—Ç–∏—è –∫–∏–Ω–µ–º–∞—Ç–æ–≥—Ä–∞—Ñ–∏—á–µ—Å–∫–æ–≥–æ –ø–æ—Ä—Ç–∞–ª–∞\r\n  const handleAdvancedPortalClose = useCallback(() => {\r\n    setShowAdvancedPortal(false);\r\n    setPortalClickPosition(null);\r\n  }, []);\r\n  \r\n  return (\r\n    <div \r\n      className={`farm-screen ${portalCharge >= 0.8 && enableCinematicPortals ? 'portal-ready' : ''}`} \r\n      ref={containerRef}\r\n      onClick={handleScreenClick}\r\n      style={{\r\n        cursor: (portalCharge >= 0.8 && enableCinematicPortals) ? 'pointer' : 'default'\r\n      }}\r\n    >\r\n      {/* –ú–∏—Å—Ç–∏—á–µ—Å–∫–∏–π —Ñ–æ–Ω —Å —á–∞—Å—Ç–∏—Ü–∞–º–∏ */}\r\n      <div className=\"mystical-overlay\"></div>\r\n\r\n      {/* –ü–æ–ª–Ω–æ—ç–∫—Ä–∞–Ω–Ω–∞—è –∏–Ω–¥–∏–∫–∞—Ü–∏—è –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç–∏ –ø–æ—Ä—Ç–∞–ª–∞ */}\r\n      {portalCharge >= 0.8 && enableCinematicPortals && !showAdvancedPortal && (\r\n        <div \r\n          className=\"portal-ready-overlay\"\r\n          style={{\r\n            position: 'absolute',\r\n            top: 0,\r\n            left: 0,\r\n            right: 0,\r\n            bottom: 0,\r\n            background: 'radial-gradient(circle, rgba(168,199,250,0.1) 0%, transparent 70%)',\r\n            pointerEvents: 'none',\r\n            zIndex: 1,\r\n            animation: 'portalReadyPulse 3s ease-in-out infinite'\r\n          }}\r\n        />\r\n      )}\r\n\r\n      {/* –ò–Ω–¥–∏–∫–∞—Ç–æ—Ä –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –¥–ª—è –ø–æ—Ä—Ç–∞–ª–∞ */}\r\n      {portalCharge >= 0.8 && enableCinematicPortals && !showAdvancedPortal && (\r\n        <div \r\n          className=\"portal-instruction\"\r\n          style={{\r\n            position: 'absolute',\r\n            top: '50%',\r\n            left: '50%',\r\n            transform: 'translate(-50%, -50%)',\r\n            textAlign: 'center',\r\n            color: COLOR_PALETTE.moonBlue,\r\n            fontSize: '18px',\r\n            textShadow: '0 0 20px currentColor',\r\n            pointerEvents: 'none',\r\n            zIndex: 10,\r\n            animation: 'portalInstructionFloat 4s ease-in-out infinite'\r\n          }}\r\n        >\r\n          <div style={{ marginBottom: '8px', fontSize: '24px' }}>‚ú® –ü–æ—Ä—Ç–∞–ª –≥–æ—Ç–æ–≤ –∫ –æ—Ç–∫—Ä—ã—Ç–∏—é ‚ú®</div>\r\n          <div style={{ fontSize: '14px', opacity: 0.8 }}>\r\n            –ö–ª–∏–∫–Ω–∏—Ç–µ –≤ –ª—é–±–æ–µ –º–µ—Å—Ç–æ —ç–∫—Ä–∞–Ω–∞\r\n          </div>\r\n          <div style={{ fontSize: '12px', opacity: 0.6, marginTop: '4px' }}>\r\n            (–∏–∑–±–µ–≥–∞–π—Ç–µ –∫–Ω–æ–ø–æ–∫ –∏ —ç–ª–µ–º–µ–Ω—Ç–æ–≤ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞)\r\n          </div>\r\n        </div>\r\n      )}\r\n\r\n      {/* –û—Ç–ª–∞–¥–æ—á–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è (—É–±—Ä–∞—Ç—å –≤ –ø—Ä–æ–¥–∞–∫—à–µ–Ω–µ) */}\r\n      {process.env.NODE_ENV === 'development' && (\r\n        <div style={{\r\n          position: 'fixed',\r\n          top: '10px',\r\n          left: '10px',\r\n          background: 'rgba(0,0,0,0.8)',\r\n          color: 'white',\r\n          padding: '8px',\r\n          fontSize: '12px',\r\n          fontFamily: 'monospace',\r\n          borderRadius: '4px',\r\n          zIndex: 1000,\r\n          pointerEvents: 'none'\r\n        }}>\r\n          <div>–ü–æ—Ä—Ç–∞–ª: {Math.round(portalCharge * 100)}%</div>\r\n          <div>–ö–∏–Ω–µ–º–∞—Ç–æ–≥—Ä–∞—Ñ: {enableCinematicPortals ? '–í–ö–õ' : '–í–´–ö–õ'}</div>\r\n          <div>–°—Ç–∞—Ç—É—Å: {showAdvancedPortal ? '–û–¢–ö–†–´–¢' : '–ó–ê–ö–†–´–¢'}</div>\r\n          {portalClickPosition && (\r\n            <div>–ü–æ–∑–∏—Ü–∏—è: {portalClickPosition.x}, {portalClickPosition.y}</div>\r\n          )}\r\n        </div>\r\n      )}\r\n\r\n      {/* –ó–∞–≥–æ–ª–æ–≤–æ–∫ —ç–∫—Ä–∞–Ω–∞ */}\r\n      <div className=\"farm-header\">\r\n        <h2>{getZoneName()}</h2>\r\n        <div className=\"zone-level\">–£—Ä–æ–≤–µ–Ω—å {zoneStats[activeZone].level}</div>\r\n      </div>\r\n      \r\n      {/* –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ —Å–±–æ—Ä–∞ —ç–Ω–µ—Ä–≥–∏–∏ */}\r\n      <div className=\"farm-stats\">\r\n        <div className=\"farm-stat\">\r\n          <span className=\"farm-stat-label\">–°–µ–≥–æ–¥–Ω—è —Å–æ–±—Ä–∞–Ω–æ</span>\r\n          <span className=\"farm-stat-value\">{farmStats.todayEarned.toFixed(3)} ‚ú¶</span>\r\n        </div>\r\n        <div className=\"farm-stat\">\r\n          <span className=\"farm-stat-label\">–ú–∞–∫—Å. –∫–æ–º–±–æ</span>\r\n          <span className=\"farm-stat-value\">√ó{farmStats.maxCombo}</span>\r\n        </div>\r\n        <div className=\"farm-stat\">\r\n          <span className=\"farm-stat-label\">–í—Å–µ–≥–æ –Ω–∞–∂–∞—Ç–∏–π</span>\r\n          <span className=\"farm-stat-value\">{farmStats.totalClicks}</span>\r\n        </div>\r\n      </div>\r\n      \r\n      {/* –°–µ–ª–µ–∫—Ç–æ—Ä –∑–æ–Ω */}\r\n      <div className=\"zone-selectors\">\r\n        <button \r\n          className={`zone-selector ${activeZone === 'crystal' ? 'active' : ''}`}\r\n          onClick={() => setActiveZone('crystal')}\r\n        >\r\n          <FaStar className=\"zone-selector-icon\" />\r\n          <span>–ö—Ä–∏—Å—Ç–∞–ª–ª</span>\r\n        </button>\r\n        \r\n        <button \r\n          className={`zone-selector ${activeZone === 'moon' ? 'active' : ''} ${!zoneStats.moon.unlocked ? 'locked' : ''}`}\r\n          onClick={() => zoneStats.moon.unlocked && setActiveZone('moon')}\r\n        >\r\n          <FaMoon className=\"zone-selector-icon\" />\r\n          <span>{zoneStats.moon.unlocked ? '–õ—É–Ω–∞' : '–ó–∞–∫—Ä—ã—Ç–æ'}</span>\r\n          {!zoneStats.moon.unlocked && (\r\n            <div className=\"unlock-info\">–¢—Ä–µ–±—É–µ—Ç—Å—è 5 —É—Ä. –∫—Ä–∏—Å—Ç–∞–ª–ª–∞</div>\r\n          )}\r\n        </button>\r\n        \r\n        <button \r\n          className={`zone-selector ${activeZone === 'forest' ? 'active' : ''} ${!zoneStats.forest.unlocked ? 'locked' : ''}`}\r\n          onClick={() => zoneStats.forest.unlocked && setActiveZone('forest')}\r\n        >\r\n          <FaLeaf className=\"zone-selector-icon\" />\r\n          <span>{zoneStats.forest.unlocked ? '–õ–µ—Å' : '–ó–∞–∫—Ä—ã—Ç–æ'}</span>\r\n          {!zoneStats.forest.unlocked && (\r\n            <div className=\"unlock-info\">–¢—Ä–µ–±—É–µ—Ç—Å—è 5 —É—Ä. –ª—É–Ω—ã</div>\r\n          )}\r\n        </button>\r\n      </div>\r\n      \r\n      {/* –û–±–ª–∞—Å—Ç—å —Å–±–æ—Ä–∞ —ç–Ω–µ—Ä–≥–∏–∏ */}\r\n      <div className=\"energy-collection-area\">\r\n        <div className=\"large-button-container\">\r\n          <BalanceButton \r\n            onTap={handleEnergyTap} \r\n            onComboChange={updateMaxCombo} \r\n            size=\"large\"\r\n            progress={Math.min(1, (zoneStats[activeZone].totalEnergy % (zoneStats[activeZone].level * 50)) / (zoneStats[activeZone].level * 50))}\r\n          />\r\n          \r\n          <button \r\n            className=\"tutorial-button\"\r\n            onClick={() => setShowTutorial(true)}\r\n          >\r\n            <FaInfoCircle />\r\n          </button>\r\n        </div>\r\n        \r\n        <p className=\"zone-description\">{getZoneDescription()}</p>\r\n        \r\n        <div className=\"progress-container\">\r\n          <div className=\"progress-label\">\r\n            –î–æ —Å–ª–µ–¥—É—é—â–µ–≥–æ —É—Ä–æ–≤–Ω—è: {(zoneStats[activeZone].level * 50 - zoneStats[activeZone].totalEnergy).toFixed(2)} ‚ú¶\r\n          </div>\r\n          <div className=\"progress-bar\">\r\n            <div \r\n              className=\"progress-fill\"\r\n              style={{\r\n                width: `${Math.min(100, (zoneStats[activeZone].totalEnergy / (zoneStats[activeZone].level * 50)) * 100)}%`,\r\n                backgroundColor: getZoneColor()\r\n              }}\r\n            ></div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n      \r\n      {/* –î–µ–π—Å—Ç–≤–∏—è */}\r\n      <div className=\"farm-actions\">\r\n        <button \r\n          className=\"action-button history-button\"\r\n          onClick={() => setShowHistory(true)}\r\n        >\r\n          <FaHistory /> –ò—Å—Ç–æ—Ä–∏—è\r\n        </button>\r\n        {potions.length > 0 && (\r\n          <button \r\n            className=\"action-button\"\r\n            onClick={() => alert(`–£ –≤–∞—Å ${potions.length} –∑–µ–ª–∏–π: ${potions.map(p => p.name).join(', ')}`)}\r\n          >\r\n            üß™ –ó–µ–ª—å—è ({potions.length})\r\n          </button>\r\n        )}\r\n        {artifacts.length > 0 && (\r\n          <button \r\n            className=\"action-button\"\r\n            onClick={() => alert(`–£ –≤–∞—Å ${artifacts.length} –∞—Ä—Ç–µ—Ñ–∞–∫—Ç–æ–≤: ${artifacts.map(a => a.name).join(', ')}`)}\r\n          >\r\n            üîÆ –ê—Ä—Ç–µ—Ñ–∞–∫—Ç—ã ({artifacts.length})\r\n          </button>\r\n        )}\r\n        {/* –ö–Ω–æ–ø–∫–∞ –±—ã—Å—Ç—Ä–æ–π –∑–∞—Ä—è–¥–∫–∏ –¥–ª—è —É–¥–æ–±—Å—Ç–≤–∞ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è */}\r\n        {process.env.NODE_ENV === 'development' && (\r\n          <button \r\n            className=\"action-button\"\r\n            onClick={(e) => {\r\n              e.stopPropagation();\r\n              setPortalCharge(1.0);\r\n            }}\r\n            style={{ \r\n              background: `linear-gradient(90deg, #A8C7FA ${portalCharge * 100}%, #333 ${portalCharge * 100}%)`,\r\n              fontSize: '11px',\r\n              color: 'white',\r\n              opacity: 0.7\r\n            }}\r\n          >\r\n            ‚ö° –ó–ê–†–Ø–î–ö–ê ({Math.round(portalCharge * 100)}%)\r\n          </button>\r\n        )}\r\n      </div>\r\n\r\n      \r\n      {/* –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ —Å –æ–±—É—á–µ–Ω–∏–µ–º */}\r\n      {showTutorial && (\r\n        <div className=\"modal-overlay\" onClick={() => setShowTutorial(false)}>\r\n          <div className=\"modal-content farm-tutorial\" onClick={e => e.stopPropagation()}>\r\n            <h3>–ö–∞–∫ —Å–æ–±–∏—Ä–∞—Ç—å —ç–Ω–µ—Ä–≥–∏—é</h3>\r\n            \r\n            <div className=\"tutorial-steps\">\r\n              <div className=\"tutorial-step\">\r\n                <div className=\"step-number\">1</div>\r\n                <div className=\"step-content\">\r\n                  <h4>–ù–∞–∂–∏–º–∞–π—Ç–µ –Ω–∞ —ç–Ω–µ—Ä–≥–µ—Ç–∏—á–µ—Å–∫—É—é —Å—Ñ–µ—Ä—É</h4>\r\n                  <p>–ö–∞–∂–¥–æ–µ –Ω–∞–∂–∞—Ç–∏–µ –ø—Ä–∏–Ω–æ—Å–∏—Ç —ç–Ω–µ—Ä–≥–∏—é –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç –≤—ã–±—Ä–∞–Ω–Ω–æ–π –∑–æ–Ω—ã</p>\r\n                </div>\r\n              </div>\r\n              \r\n              <div className=\"tutorial-step\">\r\n                <div className=\"step-number\">2</div>\r\n                <div className=\"step-content\">\r\n                  <h4>–°–æ–∑–¥–∞–≤–∞–π—Ç–µ –∫–æ–º–±–æ</h4>\r\n                  <p>5 –Ω–∞–∂–∞—Ç–∏–π –ø–æ–¥—Ä—è–¥ –∞–∫—Ç–∏–≤–∏—Ä—É—é—Ç –∫–æ–º–±–æ x2, 10 –Ω–∞–∂–∞—Ç–∏–π - –∫–æ–º–±–æ x3</p>\r\n                </div>\r\n              </div>\r\n              \r\n              <div className=\"tutorial-step\">\r\n                <div className=\"step-number\">3</div>\r\n                <div className=\"step-content\">\r\n                  <h4>–ü–æ–≤—ã—à–∞–π—Ç–µ —É—Ä–æ–≤–µ–Ω—å –∑–æ–Ω</h4>\r\n                  <p>–ö–∞–∂–¥—ã–π —É—Ä–æ–≤–µ–Ω—å –∑–æ–Ω—ã —É–≤–µ–ª–∏—á–∏–≤–∞–µ—Ç –±–∞–∑–æ–≤—É—é —ç–Ω–µ—Ä–≥–∏—é –æ—Ç –Ω–∞–∂–∞—Ç–∏—è</p>\r\n                </div>\r\n              </div>\r\n              \r\n              <div className=\"tutorial-step\">\r\n                <div className=\"step-number\">4</div>\r\n                <div className=\"step-content\">\r\n                  <h4>–û—Ç–∫—Ä—ã–≤–∞–π—Ç–µ –Ω–æ–≤—ã–µ –∑–æ–Ω—ã</h4>\r\n                  <p>–†–∞–∑–≤–∏–≤–∞–π—Ç–µ –∑–æ–Ω—ã –¥–ª—è –æ—Ç–∫—Ä—ã—Ç–∏—è –Ω–æ–≤—ã—Ö —Å –±–æ–ª–µ–µ –≤—ã—Å–æ–∫–∏–º–∏ –º–Ω–æ–∂–∏—Ç–µ–ª—è–º–∏</p>\r\n                </div>\r\n              </div>\r\n            </div>\r\n            \r\n            <button className=\"close-button\" onClick={() => setShowTutorial(false)}>\r\n              –ü–æ–Ω—è—Ç–Ω–æ\r\n            </button>\r\n          </div>\r\n        </div>\r\n      )}\r\n      \r\n      {/* –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ —Å –∏—Å—Ç–æ—Ä–∏–µ–π */}\r\n      {showHistory && (\r\n        <div className=\"modal-overlay\" onClick={() => setShowHistory(false)}>\r\n          <div className=\"modal-content history-modal\" onClick={e => e.stopPropagation()}>\r\n            <h3>–ò—Å—Ç–æ—Ä–∏—è —Å–±–æ—Ä–∞ —ç–Ω–µ—Ä–≥–∏–∏</h3>\r\n            \r\n            {energyHistory.length === 0 ? (\r\n              <p className=\"empty-history\">–ò—Å—Ç–æ—Ä–∏—è –ø—É—Å—Ç–∞</p>\r\n            ) : (\r\n              <div className=\"history-list\">\r\n                {energyHistory.map((entry, index) => (\r\n                  <div key={index} className=\"history-item\">\r\n                    <div className=\"history-time\">{formatDate(entry.timestamp)}</div>\r\n                    <div className=\"history-zone\">\r\n                      {entry.zone === 'crystal' && <FaStar className=\"history-icon crystal\" />}\r\n                      {entry.zone === 'moon' && <FaMoon className=\"history-icon moon\" />}\r\n                      {entry.zone === 'forest' && <FaLeaf className=\"history-icon forest\" />}\r\n                    </div>\r\n                    <div className=\"history-amount\">+{entry.amount.toFixed(3)} ‚ú¶</div>\r\n                    {entry.combo > 1 && (\r\n                      <div className=\"history-combo\">x{entry.combo}</div>\r\n                    )}\r\n                  </div>\r\n                ))}\r\n              </div>\r\n            )}\r\n            \r\n            <button className=\"close-button\" onClick={() => setShowHistory(false)}>\r\n              –ó–∞–∫—Ä—ã—Ç—å\r\n            </button>\r\n          </div>\r\n        </div>\r\n      )}\r\n      {/* UI –≤—ã–±–æ—Ä–∞ –º–∏–Ω–∏-–∏–≥—Ä—ã –ø–æ—Å–ª–µ –æ—Ç–∫—Ä—ã—Ç–∏—è –ø–æ—Ä—Ç–∞–ª–∞ */}\r\n      {config?.features?.enableMiniGames && showPortalUI && (\r\n        <div className=\"modal-overlay\" onClick={() => { setShowPortalUI(false); setPortalOpen(false); setPortalCharge(0); }}>\r\n          <div className=\"modal-content\" onClick={e => e.stopPropagation()}>\r\n            <h3>–ü–æ—Ä—Ç–∞–ª –æ—Ç–∫—Ä—ã—Ç ‚Äî –≤—ã–±–µ—Ä–∏ –∑–∞–Ω—è—Ç–∏–µ</h3>\r\n            <div className=\"portal-actions\">\r\n              <button className=\"action-button\" onClick={() => { setShowPotionLab(true); setShowPortalUI(false); }}>\r\n                <GenerativeIcon name=\"potion\" />\r\n                <span>–ê–ª—Ö–∏–º–∏—è</span>\r\n              </button>\r\n              <button className=\"action-button\" onClick={() => { setShowCrystalMine(true); setShowPortalUI(false); }}>\r\n                <GenerativeIcon name=\"crystal\" />\r\n                <span>–î–æ–±—ã—á–∞ –∫—Ä–∏—Å—Ç–∞–ª–ª–æ–≤</span>\r\n              </button>\r\n            </div>\r\n            <button className=\"close-button\" onClick={() => { setShowPortalUI(false); setPortalOpen(false); setPortalCharge(0); }}>–ó–∞–∫—Ä—ã—Ç—å</button>\r\n          </div>\r\n        </div>\r\n      )}\r\n\r\n      {/* –ú–∏–Ω–∏-–∏–≥—Ä–∞: –ê–ª—Ö–∏–º–∏—á–µ—Å–∫–∞—è –ª–∞–±–æ—Ä–∞—Ç–æ—Ä–∏—è */}\r\n      {config?.features?.enableMiniGames && showPotionLab && (\r\n        <AlchemyLab \r\n          onClose={() => { setShowPotionLab(false); setPortalOpen(false); setPortalCharge(0); }}\r\n          onBrew={(reward) => { updateBalance(reward, reward * 5); }}\r\n          onAddPotion={(potion) => { \r\n            setPotions(prev => [...prev, potion]); \r\n            localStorage.setItem('potions', JSON.stringify([...potions, potion]));\r\n          }}\r\n        />\r\n      )}\r\n\r\n      {/* –ú–∏–Ω–∏-–∏–≥—Ä–∞: –ö—Ä–∏—Å—Ç–∞–ª—å–Ω–∞—è –∂–∏–ª–∞ */}\r\n      {config?.features?.enableMiniGames && showCrystalMine && (\r\n        <CrystalMine \r\n          onClose={() => { setShowCrystalMine(false); setPortalOpen(false); setPortalCharge(0); }}\r\n          onMine={(reward) => { updateBalance(reward, reward * 3); }}\r\n        />\r\n      )}\r\n\r\n      {/* –ö–∏–Ω–µ–º–∞—Ç–æ–≥—Ä–∞—Ñ–∏—á–µ—Å–∫–∏–π –ø–æ—Ä—Ç–∞–ª - –Ω–µ–∑–∞–≤–∏—Å–∏–º–æ–µ –ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–æ */}\r\n      {showAdvancedPortal && (\r\n        <div\r\n          onClick={(e) => {\r\n            e.stopPropagation(); // –ü—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–∞–µ–º –≤—Å–ø–ª—ã—Ç–∏–µ –∫–ª–∏–∫–æ–≤ –ø–æ –ø–æ—Ä—Ç–∞–ª—É\r\n          }}\r\n          style={{ \r\n            position: 'fixed',\r\n            top: 0,\r\n            left: 0,\r\n            width: '100vw',\r\n            height: '100vh',\r\n            zIndex: 10000,\r\n            pointerEvents: 'auto'\r\n          }}\r\n        >\r\n          <AdvancedPortalManager\r\n            isOpen={showAdvancedPortal}\r\n            clickPosition={portalClickPosition}\r\n            onClose={handleAdvancedPortalClose}\r\n            onComplete={handleAdvancedPortalComplete}\r\n          />\r\n        </div>\r\n      )}\r\n\r\n      {/* CSS –∞–Ω–∏–º–∞—Ü–∏–∏ –¥–ª—è –ø–æ—Ä—Ç–∞–ª—å–Ω—ã—Ö —ç—Ñ—Ñ–µ–∫—Ç–æ–≤ */}\r\n      <style jsx>{`\r\n        .farm-screen.portal-ready {\r\n          position: relative;\r\n        }\r\n        \r\n        @keyframes portalReadyPulse {\r\n          0%, 100% { \r\n            background: radial-gradient(circle, rgba(168,199,250,0.1) 0%, transparent 70%);\r\n            transform: scale(1);\r\n          }\r\n          50% { \r\n            background: radial-gradient(circle, rgba(168,199,250,0.2) 0%, transparent 80%);\r\n            transform: scale(1.02);\r\n          }\r\n        }\r\n        \r\n        @keyframes portalInstructionFloat {\r\n          0%, 100% { \r\n            transform: translate(-50%, -50%) translateY(0px);\r\n            opacity: 0.8;\r\n          }\r\n          50% { \r\n            transform: translate(-50%, -50%) translateY(-10px);\r\n            opacity: 1;\r\n          }\r\n        }\r\n        \r\n        .portal-ready-overlay {\r\n          border-radius: inherit;\r\n        }\r\n        \r\n        .portal-instruction {\r\n          font-family: serif;\r\n          font-weight: bold;\r\n          letter-spacing: 1px;\r\n          user-select: none;\r\n        }\r\n        \r\n        /* –ú–æ–±–∏–ª—å–Ω–∞—è –∞–¥–∞–ø—Ç–∞—Ü–∏—è –¥–ª—è –ø–æ—Ä—Ç–∞–ª—å–Ω—ã—Ö –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–π */\r\n        @media (max-width: 768px) {\r\n          .portal-instruction {\r\n            font-size: 16px !important;\r\n          }\r\n          \r\n          .portal-instruction div:first-child {\r\n            font-size: 20px !important;\r\n          }\r\n          \r\n          .portal-instruction div:last-child {\r\n            font-size: 12px !important;\r\n          }\r\n        }\r\n        \r\n        /* –í—ã—Å–æ–∫–∏–π –∫–æ–Ω—Ç—Ä–∞—Å—Ç */\r\n        @media (prefers-color-scheme: dark) {\r\n          .portal-ready-overlay {\r\n            background: radial-gradient(circle, rgba(255,255,255,0.1) 0%, transparent 70%) !important;\r\n          }\r\n        }\r\n        \r\n        /* –£–º–µ–Ω—å—à–µ–Ω–Ω–∞—è –∞–Ω–∏–º–∞—Ü–∏—è */\r\n        @media (prefers-reduced-motion: reduce) {\r\n          .portal-ready-overlay,\r\n          .portal-instruction {\r\n            animation: none !important;\r\n          }\r\n          \r\n          .farm-screen.portal-ready {\r\n            outline: 2px dashed rgba(168,199,250,0.5);\r\n          }\r\n        }\r\n      `}</style>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default FarmScreen; "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}