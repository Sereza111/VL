{"ast":null,"code":"import React,{useState,useRef,useEffect}from'react';import'./BalanceButton.css';import PortalReveal from'./PortalReveal';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const BalanceButton=_ref=>{let{onTap,onComboChange,size='normal',progress=0,accentColor='#c6f3ff',// Portal-in-button props\nportalProgress=0,portalOpen=false,onPortalOpen=null}=_ref;const[isAnimating,setIsAnimating]=useState(false);const[particles,setParticles]=useState([]);const[isHovering,setIsHovering]=useState(false);const[tapCount,setTapCount]=useState(0);const[comboActive,setComboActive]=useState(false);const[orbitAngle,setOrbitAngle]=useState(0);const buttonRef=useRef(null);const comboTimeoutRef=useRef(null);const runeSymbols=['✦','✧','⚝','⚜','☽','☾','⚹','♱','♰','☥'];const[currentSymbol,setCurrentSymbol]=useState('✦');// Rotate symbols periodically\nuseEffect(()=>{const symbolInterval=setInterval(()=>{if(!isAnimating){const randomIndex=Math.floor(Math.random()*runeSymbols.length);setCurrentSymbol(runeSymbols[randomIndex]);}},5000);return()=>clearInterval(symbolInterval);},[isAnimating]);// Reset combo after inactivity\nuseEffect(()=>{if(tapCount>0){if(comboTimeoutRef.current){clearTimeout(comboTimeoutRef.current);}comboTimeoutRef.current=setTimeout(()=>{setTapCount(0);setComboActive(false);},3000);}return()=>{if(comboTimeoutRef.current){clearTimeout(comboTimeoutRef.current);}};},[tapCount]);// Орбитальные руны вокруг кнопки (GPU-friendly)\nuseEffect(()=>{let rafId;const tick=()=>{setOrbitAngle(prev=>(prev+(comboActive?1.6:0.8))%360);rafId=requestAnimationFrame(tick);};rafId=requestAnimationFrame(tick);return()=>cancelAnimationFrame(rafId);},[comboActive]);const handleTap=()=>{if(isAnimating)return;// Keep a very short lock to avoid accidental multi-fire, but allow fast tapping\nsetIsAnimating(true);// Increment tap count for combo\nconst newTapCount=tapCount+1;setTapCount(newTapCount);// Activate combo effect after 5 consecutive taps\nif(newTapCount>=5&&!comboActive){setComboActive(true);}// Notify parent about combo changes if callback exists\nif(onComboChange&&newTapCount>=5){onComboChange(newTapCount);}// Create particles\nconst newParticles=[];const particleCount=comboActive?20:12;for(let i=0;i<particleCount;i++){const angle=i/particleCount*360;const speed=2+Math.random()*3;const size=5+Math.random()*10;// Use more vibrant colors for combo mode\nconst hue=comboActive?Math.random()*360// Full spectrum for combo\n:Math.random()*30+40;// Gold/amber for normal\nconst saturation=comboActive?'90%':'80%';const lightness=comboActive?'60%':'70%';const color=\"hsl(\".concat(hue,\", \").concat(saturation,\", \").concat(lightness,\")\");newParticles.push({id:Date.now()+i,angle,speed,size,color,x:0,y:0,opacity:1,symbol:Math.random()>0.6?runeSymbols[Math.floor(Math.random()*runeSymbols.length)]:''});}setParticles(newParticles);// Call the onTap callback with tiered bonus for combo (x2 after 5, x3 after 10)\nif(onTap){const bonusMultiplier=newTapCount>=10?3:newTapCount>=5?2:1;onTap(0.01*bonusMultiplier);}// Dispatch global event to animate energy orb to balance counter\ntry{var _buttonRef$current;const rect=(_buttonRef$current=buttonRef.current)===null||_buttonRef$current===void 0?void 0:_buttonRef$current.getBoundingClientRect();if(rect){const event=new CustomEvent('energy-collected',{detail:{x:rect.left+rect.width/2,y:rect.top+rect.height/2,amount:0.01}});window.dispatchEvent(event);}}catch(_){}// Change symbol during animation\nconst randomIndex=Math.floor(Math.random()*runeSymbols.length);setCurrentSymbol(runeSymbols[randomIndex]);// Reset quickly to allow rapid tapping\nsetTimeout(()=>{setIsAnimating(false);setParticles([]);},120);};const buttonSizeClass=size==='large'?'mystic-button-large':'';const clampedProgress=Math.max(0,Math.min(1,progress||0));return/*#__PURE__*/_jsxs(\"div\",{className:\"mystic-button-container \".concat(size==='large'?'large-container':''),style:{['--accent']:accentColor},children:[/*#__PURE__*/_jsxs(\"button\",{ref:buttonRef,className:\"mystic-button \".concat(buttonSizeClass,\" \").concat(isAnimating?'animate':'',\" \").concat(comboActive?'combo-active':'',\" \").concat(isHovering?'hover':''),onClick:handleTap,onMouseEnter:()=>setIsHovering(true),onMouseLeave:()=>setIsHovering(false),onTouchStart:()=>setIsHovering(true),onTouchEnd:()=>setIsHovering(false),disabled:isAnimating,\"aria-label\":\"Collect mystical energy\",\"aria-live\":\"polite\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"portal-overlay\",\"aria-hidden\":true,children:/*#__PURE__*/_jsx(PortalReveal,{isOpen:portalOpen,progress:portalProgress,accentColor:accentColor,size:size==='large'?200:110,onOpen:()=>{try{window.dispatchEvent(new Event('portal-opened'));}catch(_){}if(onPortalOpen)onPortalOpen();}})}),/*#__PURE__*/_jsx(\"div\",{className:\"progress-ring\",style:{['--progressDeg']:\"\".concat(clampedProgress*360,\"deg\")},\"aria-hidden\":true}),comboActive&&/*#__PURE__*/_jsx(\"div\",{className:\"combo-ring\",style:{['--comboDeg']:\"\".concat(Math.min(240,tapCount%10*24),\"deg\")},\"aria-hidden\":true}),/*#__PURE__*/_jsx(\"div\",{className:\"mystic-symbol \".concat(size==='large'?'symbol-large':''),children:currentSymbol}),/*#__PURE__*/_jsx(\"div\",{className:\"mystic-glow\"}),/*#__PURE__*/_jsx(\"div\",{className:\"orbits\",\"aria-hidden\":true,children:[0,1,2].map(i=>/*#__PURE__*/_jsx(\"div\",{className:\"orbit orbit-\".concat(i+1),style:{['--angle']:\"\".concat(orbitAngle+i*120,\"deg\")},children:/*#__PURE__*/_jsx(\"span\",{className:\"rune\",children:runeSymbols[i*3%runeSymbols.length]})},i))}),/*#__PURE__*/_jsx(\"div\",{className:\"mystic-circle circle-1\"}),/*#__PURE__*/_jsx(\"div\",{className:\"mystic-circle circle-2\"}),tapCount>0&&/*#__PURE__*/_jsxs(\"div\",{className:\"combo-counter \".concat(size==='large'?'counter-large':''),style:{opacity:Math.min(tapCount*0.2,1)},children:[tapCount,\"x\"]}),particles.map(particle=>/*#__PURE__*/_jsx(\"div\",{className:\"mystic-particle\",style:{width:\"\".concat(particle.size*(size==='large'?1.5:1),\"px\"),height:\"\".concat(particle.size*(size==='large'?1.5:1),\"px\"),backgroundColor:particle.symbol?'transparent':particle.color,color:particle.color,transform:\"rotate(\".concat(particle.angle,\"deg) translateY(-\").concat(size==='large'?80:50,\"px)\"),opacity:particle.opacity,fontSize:\"\".concat(particle.size*(size==='large'?1.8:1.2),\"px\"),display:'flex',alignItems:'center',justifyContent:'center','--angle':\"\".concat(particle.angle,\"deg\")},children:particle.symbol},particle.id))]}),size!=='large'&&/*#__PURE__*/_jsx(\"div\",{className:\"tap-hint\",children:comboActive?'Комбо активировано! x2':'Нажимай для сбора энергии'})]});};export default BalanceButton;","map":{"version":3,"names":["React","useState","useRef","useEffect","PortalReveal","jsx","_jsx","jsxs","_jsxs","BalanceButton","_ref","onTap","onComboChange","size","progress","accentColor","portalProgress","portalOpen","onPortalOpen","isAnimating","setIsAnimating","particles","setParticles","isHovering","setIsHovering","tapCount","setTapCount","comboActive","setComboActive","orbitAngle","setOrbitAngle","buttonRef","comboTimeoutRef","runeSymbols","currentSymbol","setCurrentSymbol","symbolInterval","setInterval","randomIndex","Math","floor","random","length","clearInterval","current","clearTimeout","setTimeout","rafId","tick","prev","requestAnimationFrame","cancelAnimationFrame","handleTap","newTapCount","newParticles","particleCount","i","angle","speed","hue","saturation","lightness","color","concat","push","id","Date","now","x","y","opacity","symbol","bonusMultiplier","_buttonRef$current","rect","getBoundingClientRect","event","CustomEvent","detail","left","width","top","height","amount","window","dispatchEvent","_","buttonSizeClass","clampedProgress","max","min","className","style","children","ref","onClick","onMouseEnter","onMouseLeave","onTouchStart","onTouchEnd","disabled","isOpen","onOpen","Event","map","particle","backgroundColor","transform","fontSize","display","alignItems","justifyContent"],"sources":["/var/www/www-root/data/www/knigavl.ru/src/components/BalanceButton.js"],"sourcesContent":["import React, { useState, useRef, useEffect } from 'react';\nimport './BalanceButton.css';\nimport PortalReveal from './PortalReveal';\n\nconst BalanceButton = ({ \n  onTap, \n  onComboChange, \n  size = 'normal', \n  progress = 0, \n  accentColor = '#c6f3ff',\n  // Portal-in-button props\n  portalProgress = 0,\n  portalOpen = false,\n  onPortalOpen = null\n}) => {\n  const [isAnimating, setIsAnimating] = useState(false);\n  const [particles, setParticles] = useState([]);\n  const [isHovering, setIsHovering] = useState(false);\n  const [tapCount, setTapCount] = useState(0);\n  const [comboActive, setComboActive] = useState(false);\n  const [orbitAngle, setOrbitAngle] = useState(0);\n  const buttonRef = useRef(null);\n  const comboTimeoutRef = useRef(null);\n  \n  const runeSymbols = ['✦', '✧', '⚝', '⚜', '☽', '☾', '⚹', '♱', '♰', '☥'];\n  const [currentSymbol, setCurrentSymbol] = useState('✦');\n  \n  // Rotate symbols periodically\n  useEffect(() => {\n    const symbolInterval = setInterval(() => {\n      if (!isAnimating) {\n        const randomIndex = Math.floor(Math.random() * runeSymbols.length);\n        setCurrentSymbol(runeSymbols[randomIndex]);\n      }\n    }, 5000);\n    \n    return () => clearInterval(symbolInterval);\n  }, [isAnimating]);\n  \n  // Reset combo after inactivity\n  useEffect(() => {\n    if (tapCount > 0) {\n      if (comboTimeoutRef.current) {\n        clearTimeout(comboTimeoutRef.current);\n      }\n      \n      comboTimeoutRef.current = setTimeout(() => {\n        setTapCount(0);\n        setComboActive(false);\n      }, 3000);\n    }\n    \n    return () => {\n      if (comboTimeoutRef.current) {\n        clearTimeout(comboTimeoutRef.current);\n      }\n    };\n  }, [tapCount]);\n\n  // Орбитальные руны вокруг кнопки (GPU-friendly)\n  useEffect(() => {\n    let rafId;\n    const tick = () => {\n      setOrbitAngle(prev => (prev + (comboActive ? 1.6 : 0.8)) % 360);\n      rafId = requestAnimationFrame(tick);\n    };\n    rafId = requestAnimationFrame(tick);\n    return () => cancelAnimationFrame(rafId);\n  }, [comboActive]);\n  \n  const handleTap = () => {\n    if (isAnimating) return;\n    \n    // Keep a very short lock to avoid accidental multi-fire, but allow fast tapping\n    setIsAnimating(true);\n    \n    // Increment tap count for combo\n    const newTapCount = tapCount + 1;\n    setTapCount(newTapCount);\n    \n    // Activate combo effect after 5 consecutive taps\n    if (newTapCount >= 5 && !comboActive) {\n      setComboActive(true);\n    }\n    \n    // Notify parent about combo changes if callback exists\n    if (onComboChange && newTapCount >= 5) {\n      onComboChange(newTapCount);\n    }\n    \n    // Create particles\n    const newParticles = [];\n    const particleCount = comboActive ? 20 : 12;\n    \n    for (let i = 0; i < particleCount; i++) {\n      const angle = (i / particleCount) * 360;\n      const speed = 2 + Math.random() * 3;\n      const size = 5 + Math.random() * 10;\n      \n      // Use more vibrant colors for combo mode\n      const hue = comboActive \n        ? Math.random() * 360 // Full spectrum for combo\n        : Math.random() * 30 + 40; // Gold/amber for normal\n      \n      const saturation = comboActive ? '90%' : '80%';\n      const lightness = comboActive ? '60%' : '70%';\n      const color = `hsl(${hue}, ${saturation}, ${lightness})`;\n      \n      newParticles.push({\n        id: Date.now() + i,\n        angle,\n        speed,\n        size,\n        color,\n        x: 0,\n        y: 0,\n        opacity: 1,\n        symbol: Math.random() > 0.6 ? runeSymbols[Math.floor(Math.random() * runeSymbols.length)] : ''\n      });\n    }\n    \n    setParticles(newParticles);\n    \n    // Call the onTap callback with tiered bonus for combo (x2 after 5, x3 after 10)\n    if (onTap) {\n      const bonusMultiplier = newTapCount >= 10 ? 3 : (newTapCount >= 5 ? 2 : 1);\n      onTap(0.01 * bonusMultiplier);\n    }\n\n    // Dispatch global event to animate energy orb to balance counter\n    try {\n      const rect = buttonRef.current?.getBoundingClientRect();\n      if (rect) {\n        const event = new CustomEvent('energy-collected', {\n          detail: {\n            x: rect.left + rect.width / 2,\n            y: rect.top + rect.height / 2,\n            amount: 0.01\n          }\n        });\n        window.dispatchEvent(event);\n      }\n    } catch (_) {}\n    \n    // Change symbol during animation\n    const randomIndex = Math.floor(Math.random() * runeSymbols.length);\n    setCurrentSymbol(runeSymbols[randomIndex]);\n    \n    // Reset quickly to allow rapid tapping\n    setTimeout(() => {\n      setIsAnimating(false);\n      setParticles([]);\n    }, 120);\n  };\n  \n  const buttonSizeClass = size === 'large' ? 'mystic-button-large' : '';\n  const clampedProgress = Math.max(0, Math.min(1, progress || 0));\n  \n  return (\n    <div \n      className={`mystic-button-container ${size === 'large' ? 'large-container' : ''}`}\n      style={{ ['--accent']: accentColor }}\n    >\n      <button \n        ref={buttonRef}\n        className={`mystic-button ${buttonSizeClass} ${isAnimating ? 'animate' : ''} ${comboActive ? 'combo-active' : ''} ${isHovering ? 'hover' : ''}`}\n        onClick={handleTap}\n        onMouseEnter={() => setIsHovering(true)}\n        onMouseLeave={() => setIsHovering(false)}\n        onTouchStart={() => setIsHovering(true)}\n        onTouchEnd={() => setIsHovering(false)}\n        disabled={isAnimating}\n        aria-label=\"Collect mystical energy\"\n        aria-live=\"polite\"\n      >\n        {/* Embedded Portal Reveal */}\n        <div className=\"portal-overlay\" aria-hidden>\n          <PortalReveal \n            isOpen={portalOpen}\n            progress={portalProgress}\n            accentColor={accentColor}\n            size={size === 'large' ? 200 : 110}\n            onOpen={() => {\n              try { window.dispatchEvent(new Event('portal-opened')); } catch(_) {}\n              if (onPortalOpen) onPortalOpen();\n            }}\n          />\n        </div>\n        {/* Прогресс-дуга уровня зоны */}\n        <div \n          className=\"progress-ring\"\n          style={{ ['--progressDeg']: `${clampedProgress * 360}deg` }}\n          aria-hidden\n        />\n        {/* Дуга комбо: растёт от 0 до 120° при 5 и 240° при 10 */}\n        {comboActive && (\n          <div\n            className=\"combo-ring\"\n            style={{ ['--comboDeg']: `${Math.min(240, (tapCount % 10) * 24)}deg` }}\n            aria-hidden\n          />\n        )}\n        <div className={`mystic-symbol ${size === 'large' ? 'symbol-large' : ''}`}>{currentSymbol}</div>\n        <div className=\"mystic-glow\"></div>\n        {/* Орбиты с рунами */}\n        <div className=\"orbits\" aria-hidden>\n          {[0, 1, 2].map(i => (\n            <div key={i} className={`orbit orbit-${i + 1}`} style={{ ['--angle']: `${orbitAngle + i * 120}deg` }}>\n              <span className=\"rune\">{runeSymbols[(i * 3) % runeSymbols.length]}</span>\n            </div>\n          ))}\n        </div>\n        \n        {/* Inner circles */}\n        <div className=\"mystic-circle circle-1\"></div>\n        <div className=\"mystic-circle circle-2\"></div>\n        \n        {/* Combo indicator */}\n        {tapCount > 0 && (\n          <div className={`combo-counter ${size === 'large' ? 'counter-large' : ''}`} style={{ opacity: Math.min(tapCount * 0.2, 1) }}>\n            {tapCount}x\n          </div>\n        )}\n        \n        {/* Particles */}\n        {particles.map(particle => (\n          <div\n            key={particle.id}\n            className=\"mystic-particle\"\n            style={{\n              width: `${particle.size * (size === 'large' ? 1.5 : 1)}px`,\n              height: `${particle.size * (size === 'large' ? 1.5 : 1)}px`,\n              backgroundColor: particle.symbol ? 'transparent' : particle.color,\n              color: particle.color,\n              transform: `rotate(${particle.angle}deg) translateY(-${size === 'large' ? 80 : 50}px)`,\n              opacity: particle.opacity,\n              fontSize: `${particle.size * (size === 'large' ? 1.8 : 1.2)}px`,\n              display: 'flex',\n              alignItems: 'center',\n              justifyContent: 'center',\n              '--angle': `${particle.angle}deg`\n            }}\n          >\n            {particle.symbol}\n          </div>\n        ))}\n      </button>\n      \n      {/* Tap hint - only show for normal size */}\n      {size !== 'large' && (\n        <div className=\"tap-hint\">\n          {comboActive ? 'Комбо активировано! x2' : 'Нажимай для сбора энергии'}\n        </div>\n      )}\n    </div>\n  );\n};\n\nexport default BalanceButton;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}