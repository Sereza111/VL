{"ast":null,"code":"// Ð”Ð¾Ð±Ð°Ð²Ð»ÑÐµÐ¼ Ñ„ÑƒÐ½ÐºÑ†Ð¸Ð¸ Ð´Ð»Ñ Ñ€Ð°Ð±Ð¾Ñ‚Ñ‹ Ñ Telegram-Ð±Ð¾Ñ‚Ð¾Ð¼\n// ÐšÐ¾Ð½ÑÑ‚Ð°Ð½Ñ‚Ð° Ð´Ð»Ñ username Ñ‡Ð°Ñ‚Ð° Ð¿Ð¾Ð´Ð´ÐµÑ€Ð¶ÐºÐ¸\nconst SUPPORT_CHAT_USERNAME='VL_BOT_SUPPORT';// ÐšÐ¾Ð½ÑÑ‚Ð°Ð½Ñ‚Ð° Ð´Ð»Ñ username Ð±Ð¾Ñ‚Ð° Ð¿Ð¾Ð´Ð´ÐµÑ€Ð¶ÐºÐ¸\nconst SUPPORT_BOT_USERNAME='VLSupportBot';// Ð¤ÑƒÐ½ÐºÑ†Ð¸Ñ Ð¾Ñ‚ÐºÑ€Ñ‹Ñ‚Ð¸Ñ Ñ‡Ð°Ñ‚Ð° Ð¿Ð¾Ð´Ð´ÐµÑ€Ð¶ÐºÐ¸\nexport const openSupportChat=()=>{var _window$Telegram;const tg=(_window$Telegram=window.Telegram)===null||_window$Telegram===void 0?void 0:_window$Telegram.WebApp;if(tg){// ÐžÑ‚ÐºÑ€Ñ‹Ð²Ð°ÐµÐ¼ Ñ‡Ð°Ñ‚ Ð¿Ð¾Ð´Ð´ÐµÑ€Ð¶ÐºÐ¸ Ñ‡ÐµÑ€ÐµÐ· ÑÑÑ‹Ð»ÐºÑƒ Telegram\nconst supportLink=\"https://t.me/\".concat(SUPPORT_CHAT_USERNAME);// Ð•ÑÐ»Ð¸ ÑÑ‚Ð¾ Ð²ÐµÐ±-Ð²ÐµÑ€ÑÐ¸Ñ Telegram\nif(tg.platform==='web'){window.open(supportLink,'_blank');}// Ð•ÑÐ»Ð¸ Ð¼Ð¾Ð±Ð¸Ð»ÑŒÐ½Ð¾Ðµ Ð¿Ñ€Ð¸Ð»Ð¾Ð¶ÐµÐ½Ð¸Ðµ Telegram\nelse{tg.openTelegramLink(supportLink);}}};// Ð¤ÑƒÐ½ÐºÑ†Ð¸Ñ Ð¾Ñ‚ÐºÑ€Ñ‹Ñ‚Ð¸Ñ Ð±Ð¾Ñ‚Ð° Ð¿Ð¾Ð´Ð´ÐµÑ€Ð¶ÐºÐ¸\nexport const openSupportBot=()=>{var _window$Telegram2;const tg=(_window$Telegram2=window.Telegram)===null||_window$Telegram2===void 0?void 0:_window$Telegram2.WebApp;if(tg){// Ð¡Ð¾Ð·Ð´Ð°ÐµÐ¼ ÑÑÑ‹Ð»ÐºÑƒ Ð´Ð»Ñ Ð¾Ñ‚ÐºÑ€Ñ‹Ñ‚Ð¸Ñ Ð±Ð¾Ñ‚Ð° Ð¿Ð¾Ð´Ð´ÐµÑ€Ð¶ÐºÐ¸\nconst supportBotLink=\"https://t.me/\".concat(SUPPORT_BOT_USERNAME);// Ð•ÑÐ»Ð¸ ÑÑ‚Ð¾ Ð²ÐµÐ±-Ð²ÐµÑ€ÑÐ¸Ñ Telegram\nif(tg.platform==='web'){window.open(supportBotLink,'_blank');}// Ð•ÑÐ»Ð¸ Ð¼Ð¾Ð±Ð¸Ð»ÑŒÐ½Ð¾Ðµ Ð¿Ñ€Ð¸Ð»Ð¾Ð¶ÐµÐ½Ð¸Ðµ Telegram\nelse{tg.openTelegramLink(supportBotLink);}// Ð”Ð¾Ð¿Ð¾Ð»Ð½Ð¸Ñ‚ÐµÐ»ÑŒÐ½Ð¾Ðµ ÑƒÐ²ÐµÐ´Ð¾Ð¼Ð»ÐµÐ½Ð¸Ðµ\ntg.HapticFeedback.impactOccurred('light');}};// ÐžÐ±Ð½Ð¾Ð²Ð»ÑÐµÐ¼ Ñ„ÑƒÐ½ÐºÑ†Ð¸ÑŽ ÑÐ¾Ð·Ð´Ð°Ð½Ð¸Ñ Ð³Ð»Ð°Ð²Ð½Ð¾Ð³Ð¾ Ð¼ÐµÐ½ÑŽ\nexport const createMainMenuButtons=()=>{var _window$Telegram3;const tg=(_window$Telegram3=window.Telegram)===null||_window$Telegram3===void 0?void 0:_window$Telegram3.WebApp;if(tg){// Ð“Ð»Ð°Ð²Ð½Ð°Ñ ÐºÐ½Ð¾Ð¿ÐºÐ°\ntg.MainButton.setText('ÐÐ°Ñ‡Ð°Ñ‚ÑŒ Ð¿ÑƒÑ‚ÐµÑˆÐµÑÑ‚Ð²Ð¸Ðµ');tg.MainButton.show();tg.MainButton.onClick(()=>{tg.MainButton.hide();});// Ð¡Ð¾Ð·Ð´Ð°ÐµÐ¼ ÐºÐ½Ð¾Ð¿ÐºÑƒ Ð¿Ð¾Ð´Ð´ÐµÑ€Ð¶ÐºÐ¸\nconst supportButton=tg.BackButton;supportButton.setText('ÐŸÐ¾Ð´Ð´ÐµÑ€Ð¶ÐºÐ° ðŸ†˜');supportButton.show();supportButton.onClick(openSupportBot);// Ð¡Ñ‚Ð¸Ð»Ð¸Ð·Ð°Ñ†Ð¸Ñ\ntg.setBackgroundColor('#1B263B');tg.MainButton.color='#3C2F4F';}};// ÐžÑ‚Ð¿Ñ€Ð°Ð²Ð»ÑÐµÐ¼ Ð¿Ñ€Ð¸Ð²ÐµÑ‚ÑÑ‚Ð²ÐµÐ½Ð½Ð¾Ðµ ÑÐ¾Ð¾Ð±Ñ‰ÐµÐ½Ð¸Ðµ\nexport const sendWelcomeMessage=userData=>{var _window$Telegram4;const tg=(_window$Telegram4=window.Telegram)===null||_window$Telegram4===void 0?void 0:_window$Telegram4.WebApp;if(tg){const welcomeText=\"\\n\\uD83C\\uDF1F \\u041F\\u0440\\u0438\\u0432\\u0435\\u0442, \".concat(userData.firstName,\"! \\n\\n\\u0414\\u043E\\u0431\\u0440\\u043E \\u043F\\u043E\\u0436\\u0430\\u043B\\u043E\\u0432\\u0430\\u0442\\u044C \\u0432 \\u043C\\u0438\\u0441\\u0442\\u0438\\u0447\\u0435\\u0441\\u043A\\u0438\\u0439 \\u043C\\u0438\\u0440 VL-BOT \\uD83D\\uDD2E\\n\\n\\u0417\\u0434\\u0435\\u0441\\u044C \\u0442\\u044B \\u0441\\u043C\\u043E\\u0436\\u0435\\u0448\\u044C:\\n\\u2728 \\u0421\\u043E\\u0431\\u0438\\u0440\\u0430\\u0442\\u044C \\u043C\\u0430\\u0433\\u0438\\u0447\\u0435\\u0441\\u043A\\u0443\\u044E \\u044D\\u043D\\u0435\\u0440\\u0433\\u0438\\u044E\\n\\uD83D\\uDCD4 \\u0412\\u0435\\u0441\\u0442\\u0438 \\u043B\\u0438\\u0447\\u043D\\u044B\\u0439 \\u0434\\u043D\\u0435\\u0432\\u043D\\u0438\\u043A \\u043C\\u0430\\u0433\\u0430\\n\\uD83C\\uDFC6 \\u0420\\u0430\\u0437\\u0432\\u0438\\u0432\\u0430\\u0442\\u044C\\u0441\\u044F \\u0438 \\u043F\\u043E\\u043B\\u0443\\u0447\\u0430\\u0442\\u044C \\u043D\\u0430\\u0433\\u0440\\u0430\\u0434\\u044B\\n\\n\\u041D\\u0430\\u0436\\u043C\\u0438 \\\"\\u041D\\u0430\\u0447\\u0430\\u0442\\u044C \\u043F\\u0443\\u0442\\u0435\\u0448\\u0435\\u0441\\u0442\\u0432\\u0438\\u0435\\\", \\u0447\\u0442\\u043E\\u0431\\u044B \\u043D\\u0430\\u0447\\u0430\\u0442\\u044C \\u0441\\u0432\\u043E\\u0439 \\u043C\\u0438\\u0441\\u0442\\u0438\\u0447\\u0435\\u0441\\u043A\\u0438\\u0439 \\u043F\\u0443\\u0442\\u044C!\\n    \");// ÐŸÐ¾ÐºÐ°Ð·Ñ‹Ð²Ð°ÐµÐ¼ Ð¿Ñ€Ð¸Ð²ÐµÑ‚ÑÑ‚Ð²ÐµÐ½Ð½Ð¾Ðµ ÑÐ¾Ð¾Ð±Ñ‰ÐµÐ½Ð¸Ðµ\ntg.sendMessage(welcomeText);}};let currentInitData=null;export const getTelegramInitData=()=>currentInitData;// ÐžÐ±Ð½Ð¾Ð²Ð»ÑÐµÐ¼ ÑÑƒÑ‰ÐµÑÑ‚Ð²ÑƒÑŽÑ‰ÑƒÑŽ Ñ„ÑƒÐ½ÐºÑ†Ð¸ÑŽ Ð¸Ð½Ð¸Ñ†Ð¸Ð°Ð»Ð¸Ð·Ð°Ñ†Ð¸Ð¸\nexport const initTelegramApp=()=>{try{var _window$Telegram5;// Check if we're in Telegram WebApp environment\nif((_window$Telegram5=window.Telegram)!==null&&_window$Telegram5!==void 0&&_window$Telegram5.WebApp){var _tg$initDataUnsafe;const tg=window.Telegram.WebApp;// Initialize and expand the WebApp\ntg.ready();tg.expand();// Get user data from Telegram\nconst user=(_tg$initDataUnsafe=tg.initDataUnsafe)===null||_tg$initDataUnsafe===void 0?void 0:_tg$initDataUnsafe.user;if(!(user!==null&&user!==void 0&&user.id)){console.warn(\"Telegram user data not available\");return createDevUser();}// Store init data for backend auth\ncurrentInitData=tg.initData||null;// Return user data\nreturn{userId:user.id.toString(),firstName:user.first_name||\"User\",username:user.username||\"\",theme:tg.colorScheme||\"dark\",isTelegram:true,initData:currentInitData};}}catch(error){console.error(\"Error initializing Telegram WebApp:\",error);}return createDevUser();};// Helper function to create a development user\nconst createDevUser=()=>{const devId=Math.floor(Math.random()*1000000).toString();return{userId:\"dev-\".concat(devId),firstName:\"Developer\",username:\"dev\",theme:\"dark\",isTelegram:false,initData:null};};// Save data to storage\nexport const saveToStorage=async(key,data)=>{try{var _window$Telegram6;const tg=(_window$Telegram6=window.Telegram)===null||_window$Telegram6===void 0?void 0:_window$Telegram6.WebApp;const storage=tg===null||tg===void 0?void 0:tg.CloudStorage;if(storage){await new Promise((resolve,reject)=>{storage.setItem(key,JSON.stringify(data),error=>{if(error)reject(error);else resolve();});});}else{localStorage.setItem(key,JSON.stringify(data));}return true;}catch(error){console.error(\"Storage error:\",error);return false;}};// Load data from storage\nexport const loadFromStorage=async key=>{try{var _window$Telegram7;const tg=(_window$Telegram7=window.Telegram)===null||_window$Telegram7===void 0?void 0:_window$Telegram7.WebApp;const storage=tg===null||tg===void 0?void 0:tg.CloudStorage;if(storage){const value=await new Promise((resolve,reject)=>{storage.getItem(key,(error,result)=>{if(error)reject(error);else resolve(result);});});return value?JSON.parse(value):null;}const localData=localStorage.getItem(key);return localData?JSON.parse(localData):null;}catch(error){console.error(\"Load error:\",error);return null;}};","map":{"version":3,"names":["SUPPORT_CHAT_USERNAME","SUPPORT_BOT_USERNAME","openSupportChat","_window$Telegram","tg","window","Telegram","WebApp","supportLink","concat","platform","open","openTelegramLink","openSupportBot","_window$Telegram2","supportBotLink","HapticFeedback","impactOccurred","createMainMenuButtons","_window$Telegram3","MainButton","setText","show","onClick","hide","supportButton","BackButton","setBackgroundColor","color","sendWelcomeMessage","userData","_window$Telegram4","welcomeText","firstName","sendMessage","currentInitData","getTelegramInitData","initTelegramApp","_window$Telegram5","_tg$initDataUnsafe","ready","expand","user","initDataUnsafe","id","console","warn","createDevUser","initData","userId","toString","first_name","username","theme","colorScheme","isTelegram","error","devId","Math","floor","random","saveToStorage","key","data","_window$Telegram6","storage","CloudStorage","Promise","resolve","reject","setItem","JSON","stringify","localStorage","loadFromStorage","_window$Telegram7","value","getItem","result","parse","localData"],"sources":["/var/www/www-root/data/www/knigavl.ru/src/services/telegram.js"],"sourcesContent":["// Ð”Ð¾Ð±Ð°Ð²Ð»ÑÐµÐ¼ Ñ„ÑƒÐ½ÐºÑ†Ð¸Ð¸ Ð´Ð»Ñ Ñ€Ð°Ð±Ð¾Ñ‚Ñ‹ Ñ Telegram-Ð±Ð¾Ñ‚Ð¾Ð¼\n\n// ÐšÐ¾Ð½ÑÑ‚Ð°Ð½Ñ‚Ð° Ð´Ð»Ñ username Ñ‡Ð°Ñ‚Ð° Ð¿Ð¾Ð´Ð´ÐµÑ€Ð¶ÐºÐ¸\nconst SUPPORT_CHAT_USERNAME = 'VL_BOT_SUPPORT';\n\n// ÐšÐ¾Ð½ÑÑ‚Ð°Ð½Ñ‚Ð° Ð´Ð»Ñ username Ð±Ð¾Ñ‚Ð° Ð¿Ð¾Ð´Ð´ÐµÑ€Ð¶ÐºÐ¸\nconst SUPPORT_BOT_USERNAME = 'VLSupportBot';\n\n// Ð¤ÑƒÐ½ÐºÑ†Ð¸Ñ Ð¾Ñ‚ÐºÑ€Ñ‹Ñ‚Ð¸Ñ Ñ‡Ð°Ñ‚Ð° Ð¿Ð¾Ð´Ð´ÐµÑ€Ð¶ÐºÐ¸\nexport const openSupportChat = () => {\n  const tg = window.Telegram?.WebApp;\n  if (tg) {\n    // ÐžÑ‚ÐºÑ€Ñ‹Ð²Ð°ÐµÐ¼ Ñ‡Ð°Ñ‚ Ð¿Ð¾Ð´Ð´ÐµÑ€Ð¶ÐºÐ¸ Ñ‡ÐµÑ€ÐµÐ· ÑÑÑ‹Ð»ÐºÑƒ Telegram\n    const supportLink = `https://t.me/${SUPPORT_CHAT_USERNAME}`;\n    \n    // Ð•ÑÐ»Ð¸ ÑÑ‚Ð¾ Ð²ÐµÐ±-Ð²ÐµÑ€ÑÐ¸Ñ Telegram\n    if (tg.platform === 'web') {\n      window.open(supportLink, '_blank');\n    } \n    // Ð•ÑÐ»Ð¸ Ð¼Ð¾Ð±Ð¸Ð»ÑŒÐ½Ð¾Ðµ Ð¿Ñ€Ð¸Ð»Ð¾Ð¶ÐµÐ½Ð¸Ðµ Telegram\n    else {\n      tg.openTelegramLink(supportLink);\n    }\n  }\n};\n\n// Ð¤ÑƒÐ½ÐºÑ†Ð¸Ñ Ð¾Ñ‚ÐºÑ€Ñ‹Ñ‚Ð¸Ñ Ð±Ð¾Ñ‚Ð° Ð¿Ð¾Ð´Ð´ÐµÑ€Ð¶ÐºÐ¸\nexport const openSupportBot = () => {\n  const tg = window.Telegram?.WebApp;\n  if (tg) {\n    // Ð¡Ð¾Ð·Ð´Ð°ÐµÐ¼ ÑÑÑ‹Ð»ÐºÑƒ Ð´Ð»Ñ Ð¾Ñ‚ÐºÑ€Ñ‹Ñ‚Ð¸Ñ Ð±Ð¾Ñ‚Ð° Ð¿Ð¾Ð´Ð´ÐµÑ€Ð¶ÐºÐ¸\n    const supportBotLink = `https://t.me/${SUPPORT_BOT_USERNAME}`;\n    \n    // Ð•ÑÐ»Ð¸ ÑÑ‚Ð¾ Ð²ÐµÐ±-Ð²ÐµÑ€ÑÐ¸Ñ Telegram\n    if (tg.platform === 'web') {\n      window.open(supportBotLink, '_blank');\n    } \n    // Ð•ÑÐ»Ð¸ Ð¼Ð¾Ð±Ð¸Ð»ÑŒÐ½Ð¾Ðµ Ð¿Ñ€Ð¸Ð»Ð¾Ð¶ÐµÐ½Ð¸Ðµ Telegram\n    else {\n      tg.openTelegramLink(supportBotLink);\n    }\n\n    // Ð”Ð¾Ð¿Ð¾Ð»Ð½Ð¸Ñ‚ÐµÐ»ÑŒÐ½Ð¾Ðµ ÑƒÐ²ÐµÐ´Ð¾Ð¼Ð»ÐµÐ½Ð¸Ðµ\n    tg.HapticFeedback.impactOccurred('light');\n  }\n};\n\n// ÐžÐ±Ð½Ð¾Ð²Ð»ÑÐµÐ¼ Ñ„ÑƒÐ½ÐºÑ†Ð¸ÑŽ ÑÐ¾Ð·Ð´Ð°Ð½Ð¸Ñ Ð³Ð»Ð°Ð²Ð½Ð¾Ð³Ð¾ Ð¼ÐµÐ½ÑŽ\nexport const createMainMenuButtons = () => {\n  const tg = window.Telegram?.WebApp;\n  if (tg) {\n    // Ð“Ð»Ð°Ð²Ð½Ð°Ñ ÐºÐ½Ð¾Ð¿ÐºÐ°\n    tg.MainButton.setText('ÐÐ°Ñ‡Ð°Ñ‚ÑŒ Ð¿ÑƒÑ‚ÐµÑˆÐµÑÑ‚Ð²Ð¸Ðµ');\n    tg.MainButton.show();\n    tg.MainButton.onClick(() => {\n      tg.MainButton.hide();\n    });\n\n    // Ð¡Ð¾Ð·Ð´Ð°ÐµÐ¼ ÐºÐ½Ð¾Ð¿ÐºÑƒ Ð¿Ð¾Ð´Ð´ÐµÑ€Ð¶ÐºÐ¸\n    const supportButton = tg.BackButton;\n    supportButton.setText('ÐŸÐ¾Ð´Ð´ÐµÑ€Ð¶ÐºÐ° ðŸ†˜');\n    supportButton.show();\n    supportButton.onClick(openSupportBot);\n\n    // Ð¡Ñ‚Ð¸Ð»Ð¸Ð·Ð°Ñ†Ð¸Ñ\n    tg.setBackgroundColor('#1B263B');\n    tg.MainButton.color = '#3C2F4F';\n  }\n};\n\n// ÐžÑ‚Ð¿Ñ€Ð°Ð²Ð»ÑÐµÐ¼ Ð¿Ñ€Ð¸Ð²ÐµÑ‚ÑÑ‚Ð²ÐµÐ½Ð½Ð¾Ðµ ÑÐ¾Ð¾Ð±Ñ‰ÐµÐ½Ð¸Ðµ\nexport const sendWelcomeMessage = (userData) => {\n  const tg = window.Telegram?.WebApp;\n  if (tg) {\n    const welcomeText = `\nðŸŒŸ ÐŸÑ€Ð¸Ð²ÐµÑ‚, ${userData.firstName}! \n\nÐ”Ð¾Ð±Ñ€Ð¾ Ð¿Ð¾Ð¶Ð°Ð»Ð¾Ð²Ð°Ñ‚ÑŒ Ð² Ð¼Ð¸ÑÑ‚Ð¸Ñ‡ÐµÑÐºÐ¸Ð¹ Ð¼Ð¸Ñ€ VL-BOT ðŸ”®\n\nÐ—Ð´ÐµÑÑŒ Ñ‚Ñ‹ ÑÐ¼Ð¾Ð¶ÐµÑˆÑŒ:\nâœ¨ Ð¡Ð¾Ð±Ð¸Ñ€Ð°Ñ‚ÑŒ Ð¼Ð°Ð³Ð¸Ñ‡ÐµÑÐºÑƒÑŽ ÑÐ½ÐµÑ€Ð³Ð¸ÑŽ\nðŸ“” Ð’ÐµÑÑ‚Ð¸ Ð»Ð¸Ñ‡Ð½Ñ‹Ð¹ Ð´Ð½ÐµÐ²Ð½Ð¸Ðº Ð¼Ð°Ð³Ð°\nðŸ† Ð Ð°Ð·Ð²Ð¸Ð²Ð°Ñ‚ÑŒÑÑ Ð¸ Ð¿Ð¾Ð»ÑƒÑ‡Ð°Ñ‚ÑŒ Ð½Ð°Ð³Ñ€Ð°Ð´Ñ‹\n\nÐÐ°Ð¶Ð¼Ð¸ \"ÐÐ°Ñ‡Ð°Ñ‚ÑŒ Ð¿ÑƒÑ‚ÐµÑˆÐµÑÑ‚Ð²Ð¸Ðµ\", Ñ‡Ñ‚Ð¾Ð±Ñ‹ Ð½Ð°Ñ‡Ð°Ñ‚ÑŒ ÑÐ²Ð¾Ð¹ Ð¼Ð¸ÑÑ‚Ð¸Ñ‡ÐµÑÐºÐ¸Ð¹ Ð¿ÑƒÑ‚ÑŒ!\n    `;\n\n    // ÐŸÐ¾ÐºÐ°Ð·Ñ‹Ð²Ð°ÐµÐ¼ Ð¿Ñ€Ð¸Ð²ÐµÑ‚ÑÑ‚Ð²ÐµÐ½Ð½Ð¾Ðµ ÑÐ¾Ð¾Ð±Ñ‰ÐµÐ½Ð¸Ðµ\n    tg.sendMessage(welcomeText);\n  }\n};\n\nlet currentInitData = null;\n\nexport const getTelegramInitData = () => currentInitData;\n\n// ÐžÐ±Ð½Ð¾Ð²Ð»ÑÐµÐ¼ ÑÑƒÑ‰ÐµÑÑ‚Ð²ÑƒÑŽÑ‰ÑƒÑŽ Ñ„ÑƒÐ½ÐºÑ†Ð¸ÑŽ Ð¸Ð½Ð¸Ñ†Ð¸Ð°Ð»Ð¸Ð·Ð°Ñ†Ð¸Ð¸\nexport const initTelegramApp = () => {\n  try {\n    // Check if we're in Telegram WebApp environment\n    if (window.Telegram?.WebApp) {\n      const tg = window.Telegram.WebApp;\n      \n      // Initialize and expand the WebApp\n      tg.ready();\n      tg.expand();\n\n      // Get user data from Telegram\n      const user = tg.initDataUnsafe?.user;\n      if (!user?.id) {\n        console.warn(\"Telegram user data not available\");\n        return createDevUser();\n      }\n\n      // Store init data for backend auth\n      currentInitData = tg.initData || null;\n\n      // Return user data\n      return {\n        userId: user.id.toString(),\n        firstName: user.first_name || \"User\",\n        username: user.username || \"\",\n        theme: tg.colorScheme || \"dark\",\n        isTelegram: true,\n        initData: currentInitData\n      };\n    }\n  } catch (error) {\n    console.error(\"Error initializing Telegram WebApp:\", error);\n  }\n\n  return createDevUser();\n};\n\n// Helper function to create a development user\nconst createDevUser = () => {\n  const devId = Math.floor(Math.random() * 1000000).toString();\n  return {\n    userId: `dev-${devId}`,\n    firstName: \"Developer\",\n    username: \"dev\",\n    theme: \"dark\",\n    isTelegram: false,\n    initData: null\n  };\n};\n\n// Save data to storage\nexport const saveToStorage = async (key, data) => {\n  try {\n    const tg = window.Telegram?.WebApp;\n    const storage = tg?.CloudStorage;\n    \n    if (storage) {\n      await new Promise((resolve, reject) => {\n        storage.setItem(key, JSON.stringify(data), (error) => {\n          if (error) reject(error);\n          else resolve();\n        });\n      });\n    } else {\n      localStorage.setItem(key, JSON.stringify(data));\n    }\n    return true;\n  } catch (error) {\n    console.error(\"Storage error:\", error);\n    return false;\n  }\n};\n\n// Load data from storage\nexport const loadFromStorage = async (key) => {\n  try {\n    const tg = window.Telegram?.WebApp;\n    const storage = tg?.CloudStorage;\n\n    if (storage) {\n      const value = await new Promise((resolve, reject) => {\n        storage.getItem(key, (error, result) => {\n          if (error) reject(error);\n          else resolve(result);\n        });\n      });\n      return value ? JSON.parse(value) : null;\n    }\n    \n    const localData = localStorage.getItem(key);\n    return localData ? JSON.parse(localData) : null;\n  } catch (error) {\n    console.error(\"Load error:\", error);\n    return null;\n  }\n};"],"mappings":"AAAA;AAEA;AACA,KAAM,CAAAA,qBAAqB,CAAG,gBAAgB,CAE9C;AACA,KAAM,CAAAC,oBAAoB,CAAG,cAAc,CAE3C;AACA,MAAO,MAAM,CAAAC,eAAe,CAAGA,CAAA,GAAM,KAAAC,gBAAA,CACnC,KAAM,CAAAC,EAAE,EAAAD,gBAAA,CAAGE,MAAM,CAACC,QAAQ,UAAAH,gBAAA,iBAAfA,gBAAA,CAAiBI,MAAM,CAClC,GAAIH,EAAE,CAAE,CACN;AACA,KAAM,CAAAI,WAAW,iBAAAC,MAAA,CAAmBT,qBAAqB,CAAE,CAE3D;AACA,GAAII,EAAE,CAACM,QAAQ,GAAK,KAAK,CAAE,CACzBL,MAAM,CAACM,IAAI,CAACH,WAAW,CAAE,QAAQ,CAAC,CACpC,CACA;AAAA,IACK,CACHJ,EAAE,CAACQ,gBAAgB,CAACJ,WAAW,CAAC,CAClC,CACF,CACF,CAAC,CAED;AACA,MAAO,MAAM,CAAAK,cAAc,CAAGA,CAAA,GAAM,KAAAC,iBAAA,CAClC,KAAM,CAAAV,EAAE,EAAAU,iBAAA,CAAGT,MAAM,CAACC,QAAQ,UAAAQ,iBAAA,iBAAfA,iBAAA,CAAiBP,MAAM,CAClC,GAAIH,EAAE,CAAE,CACN;AACA,KAAM,CAAAW,cAAc,iBAAAN,MAAA,CAAmBR,oBAAoB,CAAE,CAE7D;AACA,GAAIG,EAAE,CAACM,QAAQ,GAAK,KAAK,CAAE,CACzBL,MAAM,CAACM,IAAI,CAACI,cAAc,CAAE,QAAQ,CAAC,CACvC,CACA;AAAA,IACK,CACHX,EAAE,CAACQ,gBAAgB,CAACG,cAAc,CAAC,CACrC,CAEA;AACAX,EAAE,CAACY,cAAc,CAACC,cAAc,CAAC,OAAO,CAAC,CAC3C,CACF,CAAC,CAED;AACA,MAAO,MAAM,CAAAC,qBAAqB,CAAGA,CAAA,GAAM,KAAAC,iBAAA,CACzC,KAAM,CAAAf,EAAE,EAAAe,iBAAA,CAAGd,MAAM,CAACC,QAAQ,UAAAa,iBAAA,iBAAfA,iBAAA,CAAiBZ,MAAM,CAClC,GAAIH,EAAE,CAAE,CACN;AACAA,EAAE,CAACgB,UAAU,CAACC,OAAO,CAAC,oBAAoB,CAAC,CAC3CjB,EAAE,CAACgB,UAAU,CAACE,IAAI,CAAC,CAAC,CACpBlB,EAAE,CAACgB,UAAU,CAACG,OAAO,CAAC,IAAM,CAC1BnB,EAAE,CAACgB,UAAU,CAACI,IAAI,CAAC,CAAC,CACtB,CAAC,CAAC,CAEF;AACA,KAAM,CAAAC,aAAa,CAAGrB,EAAE,CAACsB,UAAU,CACnCD,aAAa,CAACJ,OAAO,CAAC,cAAc,CAAC,CACrCI,aAAa,CAACH,IAAI,CAAC,CAAC,CACpBG,aAAa,CAACF,OAAO,CAACV,cAAc,CAAC,CAErC;AACAT,EAAE,CAACuB,kBAAkB,CAAC,SAAS,CAAC,CAChCvB,EAAE,CAACgB,UAAU,CAACQ,KAAK,CAAG,SAAS,CACjC,CACF,CAAC,CAED;AACA,MAAO,MAAM,CAAAC,kBAAkB,CAAIC,QAAQ,EAAK,KAAAC,iBAAA,CAC9C,KAAM,CAAA3B,EAAE,EAAA2B,iBAAA,CAAG1B,MAAM,CAACC,QAAQ,UAAAyB,iBAAA,iBAAfA,iBAAA,CAAiBxB,MAAM,CAClC,GAAIH,EAAE,CAAE,CACN,KAAM,CAAA4B,WAAW,yDAAAvB,MAAA,CACRqB,QAAQ,CAACG,SAAS,2mCAU1B,CAED;AACA7B,EAAE,CAAC8B,WAAW,CAACF,WAAW,CAAC,CAC7B,CACF,CAAC,CAED,GAAI,CAAAG,eAAe,CAAG,IAAI,CAE1B,MAAO,MAAM,CAAAC,mBAAmB,CAAGA,CAAA,GAAMD,eAAe,CAExD;AACA,MAAO,MAAM,CAAAE,eAAe,CAAGA,CAAA,GAAM,CACnC,GAAI,KAAAC,iBAAA,CACF;AACA,IAAAA,iBAAA,CAAIjC,MAAM,CAACC,QAAQ,UAAAgC,iBAAA,WAAfA,iBAAA,CAAiB/B,MAAM,CAAE,KAAAgC,kBAAA,CAC3B,KAAM,CAAAnC,EAAE,CAAGC,MAAM,CAACC,QAAQ,CAACC,MAAM,CAEjC;AACAH,EAAE,CAACoC,KAAK,CAAC,CAAC,CACVpC,EAAE,CAACqC,MAAM,CAAC,CAAC,CAEX;AACA,KAAM,CAAAC,IAAI,EAAAH,kBAAA,CAAGnC,EAAE,CAACuC,cAAc,UAAAJ,kBAAA,iBAAjBA,kBAAA,CAAmBG,IAAI,CACpC,GAAI,EAACA,IAAI,SAAJA,IAAI,WAAJA,IAAI,CAAEE,EAAE,EAAE,CACbC,OAAO,CAACC,IAAI,CAAC,kCAAkC,CAAC,CAChD,MAAO,CAAAC,aAAa,CAAC,CAAC,CACxB,CAEA;AACAZ,eAAe,CAAG/B,EAAE,CAAC4C,QAAQ,EAAI,IAAI,CAErC;AACA,MAAO,CACLC,MAAM,CAAEP,IAAI,CAACE,EAAE,CAACM,QAAQ,CAAC,CAAC,CAC1BjB,SAAS,CAAES,IAAI,CAACS,UAAU,EAAI,MAAM,CACpCC,QAAQ,CAAEV,IAAI,CAACU,QAAQ,EAAI,EAAE,CAC7BC,KAAK,CAAEjD,EAAE,CAACkD,WAAW,EAAI,MAAM,CAC/BC,UAAU,CAAE,IAAI,CAChBP,QAAQ,CAAEb,eACZ,CAAC,CACH,CACF,CAAE,MAAOqB,KAAK,CAAE,CACdX,OAAO,CAACW,KAAK,CAAC,qCAAqC,CAAEA,KAAK,CAAC,CAC7D,CAEA,MAAO,CAAAT,aAAa,CAAC,CAAC,CACxB,CAAC,CAED;AACA,KAAM,CAAAA,aAAa,CAAGA,CAAA,GAAM,CAC1B,KAAM,CAAAU,KAAK,CAAGC,IAAI,CAACC,KAAK,CAACD,IAAI,CAACE,MAAM,CAAC,CAAC,CAAG,OAAO,CAAC,CAACV,QAAQ,CAAC,CAAC,CAC5D,MAAO,CACLD,MAAM,QAAAxC,MAAA,CAASgD,KAAK,CAAE,CACtBxB,SAAS,CAAE,WAAW,CACtBmB,QAAQ,CAAE,KAAK,CACfC,KAAK,CAAE,MAAM,CACbE,UAAU,CAAE,KAAK,CACjBP,QAAQ,CAAE,IACZ,CAAC,CACH,CAAC,CAED;AACA,MAAO,MAAM,CAAAa,aAAa,CAAG,KAAAA,CAAOC,GAAG,CAAEC,IAAI,GAAK,CAChD,GAAI,KAAAC,iBAAA,CACF,KAAM,CAAA5D,EAAE,EAAA4D,iBAAA,CAAG3D,MAAM,CAACC,QAAQ,UAAA0D,iBAAA,iBAAfA,iBAAA,CAAiBzD,MAAM,CAClC,KAAM,CAAA0D,OAAO,CAAG7D,EAAE,SAAFA,EAAE,iBAAFA,EAAE,CAAE8D,YAAY,CAEhC,GAAID,OAAO,CAAE,CACX,KAAM,IAAI,CAAAE,OAAO,CAAC,CAACC,OAAO,CAAEC,MAAM,GAAK,CACrCJ,OAAO,CAACK,OAAO,CAACR,GAAG,CAAES,IAAI,CAACC,SAAS,CAACT,IAAI,CAAC,CAAGP,KAAK,EAAK,CACpD,GAAIA,KAAK,CAAEa,MAAM,CAACb,KAAK,CAAC,CAAC,IACpB,CAAAY,OAAO,CAAC,CAAC,CAChB,CAAC,CAAC,CACJ,CAAC,CAAC,CACJ,CAAC,IAAM,CACLK,YAAY,CAACH,OAAO,CAACR,GAAG,CAAES,IAAI,CAACC,SAAS,CAACT,IAAI,CAAC,CAAC,CACjD,CACA,MAAO,KAAI,CACb,CAAE,MAAOP,KAAK,CAAE,CACdX,OAAO,CAACW,KAAK,CAAC,gBAAgB,CAAEA,KAAK,CAAC,CACtC,MAAO,MAAK,CACd,CACF,CAAC,CAED;AACA,MAAO,MAAM,CAAAkB,eAAe,CAAG,KAAO,CAAAZ,GAAG,EAAK,CAC5C,GAAI,KAAAa,iBAAA,CACF,KAAM,CAAAvE,EAAE,EAAAuE,iBAAA,CAAGtE,MAAM,CAACC,QAAQ,UAAAqE,iBAAA,iBAAfA,iBAAA,CAAiBpE,MAAM,CAClC,KAAM,CAAA0D,OAAO,CAAG7D,EAAE,SAAFA,EAAE,iBAAFA,EAAE,CAAE8D,YAAY,CAEhC,GAAID,OAAO,CAAE,CACX,KAAM,CAAAW,KAAK,CAAG,KAAM,IAAI,CAAAT,OAAO,CAAC,CAACC,OAAO,CAAEC,MAAM,GAAK,CACnDJ,OAAO,CAACY,OAAO,CAACf,GAAG,CAAE,CAACN,KAAK,CAAEsB,MAAM,GAAK,CACtC,GAAItB,KAAK,CAAEa,MAAM,CAACb,KAAK,CAAC,CAAC,IACpB,CAAAY,OAAO,CAACU,MAAM,CAAC,CACtB,CAAC,CAAC,CACJ,CAAC,CAAC,CACF,MAAO,CAAAF,KAAK,CAAGL,IAAI,CAACQ,KAAK,CAACH,KAAK,CAAC,CAAG,IAAI,CACzC,CAEA,KAAM,CAAAI,SAAS,CAAGP,YAAY,CAACI,OAAO,CAACf,GAAG,CAAC,CAC3C,MAAO,CAAAkB,SAAS,CAAGT,IAAI,CAACQ,KAAK,CAACC,SAAS,CAAC,CAAG,IAAI,CACjD,CAAE,MAAOxB,KAAK,CAAE,CACdX,OAAO,CAACW,KAAK,CAAC,aAAa,CAAEA,KAAK,CAAC,CACnC,MAAO,KAAI,CACb,CACF,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}