{"ast":null,"code":"import React,{useEffect,useRef}from'react';// Lazy-load p5 to reduce initial bundle size\nlet P5Constructor=null;import anime from'animejs/lib/anime.js';import'./FloatingTarotCards.css';// Цветовая палитра из требований\nimport{jsx as _jsx}from\"react/jsx-runtime\";const COLOR_PALETTE={darkPurple:'#3C2F4F',// Тёмно-фиолетовый — основной фон\nbeigeParchment:'#E8D3A9',// Бежево-пергаментный — текст, акценты\ndarkTurquoise:'#1A3C34',// Тёмный бирюзовый — светлячки, свечение\ninkyBlue:'#1B263B',// Чернильный синий — тени, контуры\nmoonBlue:'#A8C7FA'// Голубоватый оттенок луны\n};// Данные карт Таро\nconst TAROT_CARDS=[{name:'Луна',symbolism:'Интуиция',color:COLOR_PALETTE.moonBlue,image:null,// Убираем ссылку на изображение\nwidth:120,height:200,section:'home'},{name:'Маг',symbolism:'Проявление',color:COLOR_PALETTE.beigeParchment,image:null,// Убираем ссылку на изображение\nwidth:120,height:200,section:'earn'},{name:'Башня',symbolism:'Разрушение',color:COLOR_PALETTE.darkPurple,image:null,// Убираем ссылку на изображение\nwidth:120,height:200,section:'shop'},{name:'Шут',symbolism:'Новые начинания',color:COLOR_PALETTE.beigeParchment,image:null,// Убираем ссылку на изображение\nwidth:120,height:200,section:'profile'}];// Класс для карты Таро\nclass TarotCard{constructor(p,data,canvasWidth,canvasHeight){this.p=p;this.data=data;this.width=data.width||120;this.height=data.height||200;// Начальная позиция\nthis.x=p.random(this.width,canvasWidth-this.width);this.y=p.random(this.height,canvasHeight-this.height);// Скорость движения\nthis.vx=p.random(-0.2,0.2);this.vy=p.random(-0.2,0.2);// Вращение\nthis.angle=p.random(0,p.TWO_PI);this.rotationSpeed=p.random(-0.005,0.005);// Параметры анимации\nthis.scale=1;this.opacity=p.random(0.7,0.9);this.hovered=false;this.image=null;// Загружаем изображение, если есть\nif(data.image){this.image=p.loadImage(data.image);}// Создаем анимацию парения\nthis.floatOffset=p.random(0,p.TWO_PI);this.floatAmplitude=p.random(5,15);this.floatFrequency=p.random(0.001,0.003);}update(){const p=this.p;// Обновляем позицию\nthis.x+=this.vx;this.y+=this.vy+Math.sin(p.frameCount*this.floatFrequency+this.floatOffset)*0.3;// Обновляем угол\nthis.angle+=this.rotationSpeed;// Проверяем границы\nif(this.x<this.width/2||this.x>p.width-this.width/2){this.vx*=-1;}if(this.y<this.height/2||this.y>p.height-this.height/2){this.vy*=-1;}// Обновляем эффект парения\nconst floatY=Math.sin(p.frameCount*this.floatFrequency+this.floatOffset)*this.floatAmplitude;this.displayY=this.y+floatY;// Если карта наведена, увеличиваем ее\nif(this.hovered){this.scale=p.lerp(this.scale,1.2,0.1);this.opacity=p.lerp(this.opacity,1,0.1);}else{this.scale=p.lerp(this.scale,1,0.1);this.opacity=p.lerp(this.opacity,0.8,0.1);}}display(){const p=this.p;p.push();p.translate(this.x,this.displayY);p.rotate(this.angle);p.scale(this.scale);// Рисуем карту\np.noStroke();p.fill(this.data.color+parseInt(this.opacity*255).toString(16));if(this.image&&this.image.width>0){// Если изображение загружено, рисуем его\np.image(this.image,-this.width/2,-this.height/2,this.width,this.height);}else{// Иначе рисуем заглушку\np.rect(-this.width/2,-this.height/2,this.width,this.height,10);// Рисуем рамку\np.noFill();p.stroke(COLOR_PALETTE.beigeParchment+'80');p.strokeWeight(3);p.rect(-this.width/2+5,-this.height/2+5,this.width-10,this.height-10,7);// Рисуем название карты\np.fill(COLOR_PALETTE.beigeParchment);p.noStroke();p.textAlign(p.CENTER,p.CENTER);p.textSize(16);p.text(this.data.name,0,0);// Рисуем символизм\np.textSize(12);p.text(this.data.symbolism,0,30);}// Рисуем свечение при наведении\nif(this.hovered){p.noFill();p.stroke(COLOR_PALETTE.moonBlue+'80');p.strokeWeight(5);p.rect(-this.width/2-5,-this.height/2-5,this.width+10,this.height+10,15);}p.pop();}checkHover(mouseX,mouseY){// Проверяем, находится ли мышь над картой\nconst dx=mouseX-this.x;const dy=mouseY-this.displayY;const distance=Math.sqrt(dx*dx+dy*dy);// Учитываем поворот карты и масштаб при проверке\nconst effectiveRadius=Math.max(this.width,this.height)/2*this.scale;this.hovered=distance<effectiveRadius;return this.hovered;}onClick(callback){if(this.hovered){callback(this.data);return true;}return false;}}// Класс для частиц лунной пыли\nclass MoonDustParticle{constructor(p,x,y){this.p=p;this.x=x;this.y=y;this.size=p.random(1,3);this.opacity=p.random(0.3,0.7);this.color=p.random()>0.5?COLOR_PALETTE.moonBlue:COLOR_PALETTE.beigeParchment;// Скорость и направление\nthis.vx=p.random(-0.5,0.5);this.vy=p.random(-0.5,0.5);// Время жизни\nthis.lifespan=p.random(100,300);this.age=0;}update(){// Обновляем позицию\nthis.x+=this.vx;this.y+=this.vy;// Увеличиваем возраст\nthis.age++;// Обновляем прозрачность в зависимости от возраста\nif(this.age<30){this.opacity=this.p.map(this.age,0,30,0,this.opacity);}else if(this.age>this.lifespan-30){this.opacity=this.p.map(this.age,this.lifespan-30,this.lifespan,this.opacity,0);}// Добавляем небольшое случайное движение\nthis.vx+=this.p.random(-0.03,0.03);this.vy+=this.p.random(-0.03,0.03);// Ограничиваем скорость\nconst speed=Math.sqrt(this.vx*this.vx+this.vy*this.vy);if(speed>1){this.vx=this.vx/speed;this.vy=this.vy/speed;}}display(){const p=this.p;p.noStroke();p.fill(this.color+parseInt(this.opacity*255).toString(16));// Рисуем частицу с размытием для эффекта свечения\np.circle(this.x,this.y,this.size);p.fill(this.color+parseInt(this.opacity*0.5*255).toString(16));p.circle(this.x,this.y,this.size*1.5);p.fill(this.color+parseInt(this.opacity*0.2*255).toString(16));p.circle(this.x,this.y,this.size*2.5);}isDead(){return this.age>=this.lifespan;}}const FloatingTarotCards=_ref=>{let{onCardClick,currentScreen}=_ref;const containerRef=useRef(null);const p5InstanceRef=useRef(null);const cardsRef=useRef([]);const particlesRef=useRef([]);const lastInteractionRef=useRef(0);useEffect(()=>{// Создаем экземпляр P5\nconst sketch=p=>{let canvas;let cards=[];let particles=[];p.setup=()=>{// Создаем холст на всю ширину контейнера\nconst container=containerRef.current;const width=container.clientWidth;const height=container.clientHeight;canvas=p.createCanvas(width,height);canvas.parent(container);// Создаем карты\ncards=TAROT_CARDS.map(cardData=>new TarotCard(p,cardData,width,height));cardsRef.current=cards;// Создаем начальные частицы\nfor(let i=0;i<50;i++){particles.push(new MoonDustParticle(p,p.random(width),p.random(height)));}particlesRef.current=particles;// Обработчики событий\ncanvas.mousePressed(()=>{let cardClicked=false;// Проверяем клик по картам в обратном порядке (верхние карты первыми)\nfor(let i=cards.length-1;i>=0;i--){if(cards[i].onClick(data=>{if(onCardClick&&data.section){onCardClick(data.section);}})){cardClicked=true;break;}}// Если не кликнули по карте, создаем частицы\nif(!cardClicked){createParticlesBurst(p.mouseX,p.mouseY,20);lastInteractionRef.current=p.frameCount;}});canvas.mouseMoved(()=>{// Обновляем состояние наведения для карт\nfor(const card of cards){card.checkHover(p.mouseX,p.mouseY);}});};p.draw=()=>{// Прозрачный фон\np.clear();// Обновляем и отображаем частицы\nfor(let i=particles.length-1;i>=0;i--){particles[i].update();particles[i].display();// Удаляем мертвые частицы\nif(particles[i].isDead()){particles.splice(i,1);}}// Добавляем новые частицы с небольшой вероятностью\nif(p.random()<0.1&&particles.length<100){particles.push(new MoonDustParticle(p,p.random(p.width),p.random(p.height)));}// Обновляем и отображаем карты\nfor(const card of cards){card.update();card.display();}// Создаем частицы при движении мыши с задержкой\nif(p.frameCount%5===0&&p.frameCount-lastInteractionRef.current<30){createParticlesBurst(p.mouseX,p.mouseY,1);}};p.windowResized=()=>{// Изменяем размер холста при изменении размера окна\nconst container=containerRef.current;const width=container.clientWidth;const height=container.clientHeight;p.resizeCanvas(width,height);};// Функция для создания взрыва частиц\nconst createParticlesBurst=(x,y,count)=>{for(let i=0;i<count;i++){const particle=new MoonDustParticle(p,x,y);particles.push(particle);}// Ограничиваем количество частиц\nwhile(particles.length>100){particles.shift();}};};// Lazy import p5 at runtime\nconst initP5=async()=>{try{if(!P5Constructor){const mod=await import('p5');P5Constructor=mod.default||mod;}p5InstanceRef.current=new P5Constructor(sketch);}catch(e){console.error('Не удалось загрузить p5:',e);}};initP5();// Очистка при размонтировании\nreturn()=>{if(p5InstanceRef.current){p5InstanceRef.current.remove();}};},[onCardClick]);// Эффект для анимации карт при смене экрана\nuseEffect(()=>{if(cardsRef.current.length>0){// Находим карту, соответствующую текущему экрану\nconst activeCard=cardsRef.current.find(card=>card.data.section===currentScreen);if(activeCard){// Анимируем активную карту\nanime({targets:activeCard,scale:[1,1.3,1],opacity:[0.8,1,0.8],duration:1500,easing:'easeInOutQuad'});}}},[currentScreen]);return/*#__PURE__*/_jsx(\"div\",{ref:containerRef,style:{position:'absolute',top:0,left:0,width:'100%',height:'100%',pointerEvents:'none',zIndex:10}});};export default FloatingTarotCards;","map":{"version":3,"names":["React","useEffect","useRef","P5Constructor","anime","jsx","_jsx","COLOR_PALETTE","darkPurple","beigeParchment","darkTurquoise","inkyBlue","moonBlue","TAROT_CARDS","name","symbolism","color","image","width","height","section","TarotCard","constructor","p","data","canvasWidth","canvasHeight","x","random","y","vx","vy","angle","TWO_PI","rotationSpeed","scale","opacity","hovered","loadImage","floatOffset","floatAmplitude","floatFrequency","update","Math","sin","frameCount","floatY","displayY","lerp","display","push","translate","rotate","noStroke","fill","parseInt","toString","rect","noFill","stroke","strokeWeight","textAlign","CENTER","textSize","text","pop","checkHover","mouseX","mouseY","dx","dy","distance","sqrt","effectiveRadius","max","onClick","callback","MoonDustParticle","size","lifespan","age","map","speed","circle","isDead","FloatingTarotCards","_ref","onCardClick","currentScreen","containerRef","p5InstanceRef","cardsRef","particlesRef","lastInteractionRef","sketch","canvas","cards","particles","setup","container","current","clientWidth","clientHeight","createCanvas","parent","cardData","i","mousePressed","cardClicked","length","createParticlesBurst","mouseMoved","card","draw","clear","splice","windowResized","resizeCanvas","count","particle","shift","initP5","mod","default","e","console","error","remove","activeCard","find","targets","duration","easing","ref","style","position","top","left","pointerEvents","zIndex"],"sources":["/var/www/www-root/data/www/knigavl.ru/src/components/FloatingTarotCards.js"],"sourcesContent":["import React, { useEffect, useRef } from 'react';\r\n// Lazy-load p5 to reduce initial bundle size\r\nlet P5Constructor = null;\r\nimport anime from 'animejs/lib/anime.js';\r\nimport './FloatingTarotCards.css';\r\n\r\n// Цветовая палитра из требований\r\nconst COLOR_PALETTE = {\r\n  darkPurple: '#3C2F4F',    // Тёмно-фиолетовый — основной фон\r\n  beigeParchment: '#E8D3A9', // Бежево-пергаментный — текст, акценты\r\n  darkTurquoise: '#1A3C34',  // Тёмный бирюзовый — светлячки, свечение\r\n  inkyBlue: '#1B263B',       // Чернильный синий — тени, контуры\r\n  moonBlue: '#A8C7FA',       // Голубоватый оттенок луны\r\n};\r\n\r\n// Данные карт Таро\r\nconst TAROT_CARDS = [\r\n  { \r\n    name: 'Луна', \r\n    symbolism: 'Интуиция', \r\n    color: COLOR_PALETTE.moonBlue, \r\n    image: null, // Убираем ссылку на изображение\r\n    width: 120,\r\n    height: 200,\r\n    section: 'home'\r\n  },\r\n  { \r\n    name: 'Маг', \r\n    symbolism: 'Проявление', \r\n    color: COLOR_PALETTE.beigeParchment, \r\n    image: null, // Убираем ссылку на изображение\r\n    width: 120,\r\n    height: 200,\r\n    section: 'earn'\r\n  },\r\n  { \r\n    name: 'Башня', \r\n    symbolism: 'Разрушение', \r\n    color: COLOR_PALETTE.darkPurple, \r\n    image: null, // Убираем ссылку на изображение\r\n    width: 120,\r\n    height: 200,\r\n    section: 'shop'\r\n  },\r\n  { \r\n    name: 'Шут', \r\n    symbolism: 'Новые начинания', \r\n    color: COLOR_PALETTE.beigeParchment, \r\n    image: null, // Убираем ссылку на изображение\r\n    width: 120,\r\n    height: 200,\r\n    section: 'profile'\r\n  }\r\n];\r\n\r\n// Класс для карты Таро\r\nclass TarotCard {\r\n  constructor(p, data, canvasWidth, canvasHeight) {\r\n    this.p = p;\r\n    this.data = data;\r\n    this.width = data.width || 120;\r\n    this.height = data.height || 200;\r\n    \r\n    // Начальная позиция\r\n    this.x = p.random(this.width, canvasWidth - this.width);\r\n    this.y = p.random(this.height, canvasHeight - this.height);\r\n    \r\n    // Скорость движения\r\n    this.vx = p.random(-0.2, 0.2);\r\n    this.vy = p.random(-0.2, 0.2);\r\n    \r\n    // Вращение\r\n    this.angle = p.random(0, p.TWO_PI);\r\n    this.rotationSpeed = p.random(-0.005, 0.005);\r\n    \r\n    // Параметры анимации\r\n    this.scale = 1;\r\n    this.opacity = p.random(0.7, 0.9);\r\n    this.hovered = false;\r\n    this.image = null;\r\n    \r\n    // Загружаем изображение, если есть\r\n    if (data.image) {\r\n      this.image = p.loadImage(data.image);\r\n    }\r\n    \r\n    // Создаем анимацию парения\r\n    this.floatOffset = p.random(0, p.TWO_PI);\r\n    this.floatAmplitude = p.random(5, 15);\r\n    this.floatFrequency = p.random(0.001, 0.003);\r\n  }\r\n  \r\n  update() {\r\n    const p = this.p;\r\n    \r\n    // Обновляем позицию\r\n    this.x += this.vx;\r\n    this.y += this.vy + Math.sin(p.frameCount * this.floatFrequency + this.floatOffset) * 0.3;\r\n    \r\n    // Обновляем угол\r\n    this.angle += this.rotationSpeed;\r\n    \r\n    // Проверяем границы\r\n    if (this.x < this.width/2 || this.x > p.width - this.width/2) {\r\n      this.vx *= -1;\r\n    }\r\n    if (this.y < this.height/2 || this.y > p.height - this.height/2) {\r\n      this.vy *= -1;\r\n    }\r\n    \r\n    // Обновляем эффект парения\r\n    const floatY = Math.sin(p.frameCount * this.floatFrequency + this.floatOffset) * this.floatAmplitude;\r\n    this.displayY = this.y + floatY;\r\n    \r\n    // Если карта наведена, увеличиваем ее\r\n    if (this.hovered) {\r\n      this.scale = p.lerp(this.scale, 1.2, 0.1);\r\n      this.opacity = p.lerp(this.opacity, 1, 0.1);\r\n    } else {\r\n      this.scale = p.lerp(this.scale, 1, 0.1);\r\n      this.opacity = p.lerp(this.opacity, 0.8, 0.1);\r\n    }\r\n  }\r\n  \r\n  display() {\r\n    const p = this.p;\r\n    \r\n    p.push();\r\n    p.translate(this.x, this.displayY);\r\n    p.rotate(this.angle);\r\n    p.scale(this.scale);\r\n    \r\n    // Рисуем карту\r\n    p.noStroke();\r\n    p.fill(this.data.color + parseInt(this.opacity * 255).toString(16));\r\n    \r\n    if (this.image && this.image.width > 0) {\r\n      // Если изображение загружено, рисуем его\r\n      p.image(this.image, -this.width/2, -this.height/2, this.width, this.height);\r\n    } else {\r\n      // Иначе рисуем заглушку\r\n      p.rect(-this.width/2, -this.height/2, this.width, this.height, 10);\r\n      \r\n      // Рисуем рамку\r\n      p.noFill();\r\n      p.stroke(COLOR_PALETTE.beigeParchment + '80');\r\n      p.strokeWeight(3);\r\n      p.rect(-this.width/2 + 5, -this.height/2 + 5, this.width - 10, this.height - 10, 7);\r\n      \r\n      // Рисуем название карты\r\n      p.fill(COLOR_PALETTE.beigeParchment);\r\n      p.noStroke();\r\n      p.textAlign(p.CENTER, p.CENTER);\r\n      p.textSize(16);\r\n      p.text(this.data.name, 0, 0);\r\n      \r\n      // Рисуем символизм\r\n      p.textSize(12);\r\n      p.text(this.data.symbolism, 0, 30);\r\n    }\r\n    \r\n    // Рисуем свечение при наведении\r\n    if (this.hovered) {\r\n      p.noFill();\r\n      p.stroke(COLOR_PALETTE.moonBlue + '80');\r\n      p.strokeWeight(5);\r\n      p.rect(-this.width/2 - 5, -this.height/2 - 5, this.width + 10, this.height + 10, 15);\r\n    }\r\n    \r\n    p.pop();\r\n  }\r\n  \r\n  checkHover(mouseX, mouseY) {\r\n    // Проверяем, находится ли мышь над картой\r\n    const dx = mouseX - this.x;\r\n    const dy = mouseY - this.displayY;\r\n    const distance = Math.sqrt(dx * dx + dy * dy);\r\n    \r\n    // Учитываем поворот карты и масштаб при проверке\r\n    const effectiveRadius = Math.max(this.width, this.height) / 2 * this.scale;\r\n    \r\n    this.hovered = distance < effectiveRadius;\r\n    return this.hovered;\r\n  }\r\n  \r\n  onClick(callback) {\r\n    if (this.hovered) {\r\n      callback(this.data);\r\n      return true;\r\n    }\r\n    return false;\r\n  }\r\n}\r\n\r\n// Класс для частиц лунной пыли\r\nclass MoonDustParticle {\r\n  constructor(p, x, y) {\r\n    this.p = p;\r\n    this.x = x;\r\n    this.y = y;\r\n    this.size = p.random(1, 3);\r\n    this.opacity = p.random(0.3, 0.7);\r\n    this.color = p.random() > 0.5 ? COLOR_PALETTE.moonBlue : COLOR_PALETTE.beigeParchment;\r\n    \r\n    // Скорость и направление\r\n    this.vx = p.random(-0.5, 0.5);\r\n    this.vy = p.random(-0.5, 0.5);\r\n    \r\n    // Время жизни\r\n    this.lifespan = p.random(100, 300);\r\n    this.age = 0;\r\n  }\r\n  \r\n  update() {\r\n    // Обновляем позицию\r\n    this.x += this.vx;\r\n    this.y += this.vy;\r\n    \r\n    // Увеличиваем возраст\r\n    this.age++;\r\n    \r\n    // Обновляем прозрачность в зависимости от возраста\r\n    if (this.age < 30) {\r\n      this.opacity = this.p.map(this.age, 0, 30, 0, this.opacity);\r\n    } else if (this.age > this.lifespan - 30) {\r\n      this.opacity = this.p.map(this.age, this.lifespan - 30, this.lifespan, this.opacity, 0);\r\n    }\r\n    \r\n    // Добавляем небольшое случайное движение\r\n    this.vx += this.p.random(-0.03, 0.03);\r\n    this.vy += this.p.random(-0.03, 0.03);\r\n    \r\n    // Ограничиваем скорость\r\n    const speed = Math.sqrt(this.vx * this.vx + this.vy * this.vy);\r\n    if (speed > 1) {\r\n      this.vx = this.vx / speed;\r\n      this.vy = this.vy / speed;\r\n    }\r\n  }\r\n  \r\n  display() {\r\n    const p = this.p;\r\n    \r\n    p.noStroke();\r\n    p.fill(this.color + parseInt(this.opacity * 255).toString(16));\r\n    \r\n    // Рисуем частицу с размытием для эффекта свечения\r\n    p.circle(this.x, this.y, this.size);\r\n    p.fill(this.color + parseInt(this.opacity * 0.5 * 255).toString(16));\r\n    p.circle(this.x, this.y, this.size * 1.5);\r\n    p.fill(this.color + parseInt(this.opacity * 0.2 * 255).toString(16));\r\n    p.circle(this.x, this.y, this.size * 2.5);\r\n  }\r\n  \r\n  isDead() {\r\n    return this.age >= this.lifespan;\r\n  }\r\n}\r\n\r\nconst FloatingTarotCards = ({ onCardClick, currentScreen }) => {\r\n  const containerRef = useRef(null);\r\n  const p5InstanceRef = useRef(null);\r\n  const cardsRef = useRef([]);\r\n  const particlesRef = useRef([]);\r\n  const lastInteractionRef = useRef(0);\r\n  \r\n  useEffect(() => {\r\n    // Создаем экземпляр P5\r\n    const sketch = (p) => {\r\n      let canvas;\r\n      let cards = [];\r\n      let particles = [];\r\n      \r\n      p.setup = () => {\r\n        // Создаем холст на всю ширину контейнера\r\n        const container = containerRef.current;\r\n        const width = container.clientWidth;\r\n        const height = container.clientHeight;\r\n        canvas = p.createCanvas(width, height);\r\n        canvas.parent(container);\r\n        \r\n        // Создаем карты\r\n        cards = TAROT_CARDS.map(cardData => \r\n          new TarotCard(p, cardData, width, height)\r\n        );\r\n        cardsRef.current = cards;\r\n        \r\n        // Создаем начальные частицы\r\n        for (let i = 0; i < 50; i++) {\r\n          particles.push(new MoonDustParticle(p, p.random(width), p.random(height)));\r\n        }\r\n        particlesRef.current = particles;\r\n        \r\n        // Обработчики событий\r\n        canvas.mousePressed(() => {\r\n          let cardClicked = false;\r\n          \r\n          // Проверяем клик по картам в обратном порядке (верхние карты первыми)\r\n          for (let i = cards.length - 1; i >= 0; i--) {\r\n            if (cards[i].onClick((data) => {\r\n              if (onCardClick && data.section) {\r\n                onCardClick(data.section);\r\n              }\r\n            })) {\r\n              cardClicked = true;\r\n              break;\r\n            }\r\n          }\r\n          \r\n          // Если не кликнули по карте, создаем частицы\r\n          if (!cardClicked) {\r\n            createParticlesBurst(p.mouseX, p.mouseY, 20);\r\n            lastInteractionRef.current = p.frameCount;\r\n          }\r\n        });\r\n        \r\n        canvas.mouseMoved(() => {\r\n          // Обновляем состояние наведения для карт\r\n          for (const card of cards) {\r\n            card.checkHover(p.mouseX, p.mouseY);\r\n          }\r\n        });\r\n      };\r\n      \r\n      p.draw = () => {\r\n        // Прозрачный фон\r\n        p.clear();\r\n        \r\n        // Обновляем и отображаем частицы\r\n        for (let i = particles.length - 1; i >= 0; i--) {\r\n          particles[i].update();\r\n          particles[i].display();\r\n          \r\n          // Удаляем мертвые частицы\r\n          if (particles[i].isDead()) {\r\n            particles.splice(i, 1);\r\n          }\r\n        }\r\n        \r\n        // Добавляем новые частицы с небольшой вероятностью\r\n        if (p.random() < 0.1 && particles.length < 100) {\r\n          particles.push(new MoonDustParticle(p, p.random(p.width), p.random(p.height)));\r\n        }\r\n        \r\n        // Обновляем и отображаем карты\r\n        for (const card of cards) {\r\n          card.update();\r\n          card.display();\r\n        }\r\n        \r\n        // Создаем частицы при движении мыши с задержкой\r\n        if (p.frameCount % 5 === 0 && p.frameCount - lastInteractionRef.current < 30) {\r\n          createParticlesBurst(p.mouseX, p.mouseY, 1);\r\n        }\r\n      };\r\n      \r\n      p.windowResized = () => {\r\n        // Изменяем размер холста при изменении размера окна\r\n        const container = containerRef.current;\r\n        const width = container.clientWidth;\r\n        const height = container.clientHeight;\r\n        p.resizeCanvas(width, height);\r\n      };\r\n      \r\n      // Функция для создания взрыва частиц\r\n      const createParticlesBurst = (x, y, count) => {\r\n        for (let i = 0; i < count; i++) {\r\n          const particle = new MoonDustParticle(p, x, y);\r\n          particles.push(particle);\r\n        }\r\n        \r\n        // Ограничиваем количество частиц\r\n        while (particles.length > 100) {\r\n          particles.shift();\r\n        }\r\n      };\r\n    };\r\n    \r\n    // Lazy import p5 at runtime\r\n    const initP5 = async () => {\r\n      try {\r\n        if (!P5Constructor) {\r\n          const mod = await import('p5');\r\n          P5Constructor = mod.default || mod;\r\n        }\r\n        p5InstanceRef.current = new P5Constructor(sketch);\r\n      } catch (e) {\r\n        console.error('Не удалось загрузить p5:', e);\r\n      }\r\n    };\r\n    initP5();\r\n    \r\n    // Очистка при размонтировании\r\n    return () => {\r\n      if (p5InstanceRef.current) {\r\n        p5InstanceRef.current.remove();\r\n      }\r\n    };\r\n  }, [onCardClick]);\r\n  \r\n  // Эффект для анимации карт при смене экрана\r\n  useEffect(() => {\r\n    if (cardsRef.current.length > 0) {\r\n      // Находим карту, соответствующую текущему экрану\r\n      const activeCard = cardsRef.current.find(card => card.data.section === currentScreen);\r\n      \r\n      if (activeCard) {\r\n        // Анимируем активную карту\r\n        anime({\r\n          targets: activeCard,\r\n          scale: [1, 1.3, 1],\r\n          opacity: [0.8, 1, 0.8],\r\n          duration: 1500,\r\n          easing: 'easeInOutQuad'\r\n        });\r\n      }\r\n    }\r\n  }, [currentScreen]);\r\n  \r\n  return (\r\n    <div \r\n      ref={containerRef} \r\n      style={{ \r\n        position: 'absolute', \r\n        top: 0, \r\n        left: 0, \r\n        width: '100%', \r\n        height: '100%', \r\n        pointerEvents: 'none',\r\n        zIndex: 10\r\n      }}\r\n    />\r\n  );\r\n};\r\n\r\nexport default FloatingTarotCards; "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}